{"openapi":"3.0.0","servers":[{"description":"InsightFinder production SaaS site","url":"https://app.insightfinder.com"},{"description":"InsightFinder production Staging site","url":"http://stg.insightfinder.com:8080"}],"info":{"version":"1.0.5","title":"InsightFinder APIs","contact":{"email":"support@insightfinder.com"},"description":"InsightFinder provides REST APIs to allow customers to interact with/retrieve their data. This document assumes that the APIs will be interacted with from the admin account.\n"},"tags":[{"name":"Authentication"},{"name":"Preliminary"},{"name":"Data Ingestion"},{"name":"Unified Health View"},{"name":"Incident Prediction"},{"name":"Root Cause Analysis"},{"name":"Alert Summary"},{"name":"Capacity Planning"}],"paths":{"/api/v2/globalinfo":{"get":{"description":"Get the system metadata information for the global view","parameters":[{"name":"tzOffset","description":"used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"startTime","description":"Used to determine the start timestamp of the global view of the system","required":true,"in":"query","schema":{"type":"number"},"example":"1577750400000"},{"name":"endTime","description":"Used to determine the end timestamp of global view of the system","required":true,"in":"query","schema":{"type":"number"},"example":"1577836799999"},{"name":"userName","description":"Used to determine the which user is request the information","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"customerName","description":"Used to determine the user name of the system","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"Auto generated using Swagger Inspector","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GlobalInfo"}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Preliminary"]}},"/api/v1/login-check":{"post":{"description":"Used to let user log in to the system to get the token for authentication use of other APIs","parameters":[{"name":"userName","description":"the user to log in the system","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"password","description":"the password of the user","required":true,"in":"query","schema":{"type":"string"},"example":"Password1!"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"}],"responses":{"200":{"description":"Successfully authenticated. The logged in token is returned in a cookie named 'token'. You need to include this token in every API call","headers":{"Set-Cookie":{"schema":{"type":"string","example":"token=eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk; path=/;"}}},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogInResponse"}}}}},"tags":["Authentication"]}},"/api/v1/refreshusertoken":{"get":{"description":"Used to exchange the old token for the new token, before the current token is expired","parameters":[{"name":"userName","description":"the user to log in the system","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for exchange the new token, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"Successfully exchanged the refreshed token. The logged in token is returned in a cookie named 'token'. You need to include this token in every API call","headers":{"Set-Cookie":{"schema":{"type":"string","example":"token=eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk; path=/;"}}},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTokenResponse"}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Authentication"]}},"/api/v2/info/metadata":{"get":{"description":"Used to get the global view metadata information","parameters":[{"name":"anomalyInstanceOnly","description":"Used to determine if only showing the anomaly instance timeline","required":true,"in":"query","schema":{"type":"boolean"},"example":"false"},{"name":"systemArray","description":"Used to determine the systems want to query","required":true,"in":"query","schema":{"type":"string"},"example":"[{\"systemName\":\"IF Staging\",\"environmentName\":\"All\"}]"},{"name":"tzOffset","description":"used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":true,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"startTime","description":"Used to determine the start time of the data","required":true,"in":"query","schema":{"type":"string"},"example":"1577750400000"},{"name":"endTime","description":"Used to determine the end time of the data","required":true,"in":"query","schema":{"type":"string"},"example":"1577836799999"},{"name":"userName","description":"Used to determine which user is requesting the information","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"customerName","description":"Used to determine the owner of the system","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"The meta data of the global view of the systems, including some basic information(time, owner), System information(instance id set), instance information and component information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MetaData"}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Preliminary"]}},"/api/v1/loadinitdata":{"get":{"summary":"","operationId":"loadinitdata","description":"Delivers the basic information required for other data to be queried\n","parameters":[{"in":"query","name":"userName","description":"Used to determine which user is requesting information.","required":true,"schema":{"type":"string"},"example":"user"},{"in":"query","name":"tzOffset","description":"used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":true,"schema":{"type":"number"},"example":"-18000000"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"search results matching criteria","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitData"}}}},"400":{"description":"bad input parameter"},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Preliminary"]}},"/api/v2/alertsummarytimelines":{"get":{"description":"Get the anomaly events from the alert project of the system","parameters":[{"name":"userName","description":"Used to determine which user is requesting the information.","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"customerName","description":"Used to determine the user of the request system","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"systemIds","description":"Used to determine the system names of the timelines","required":true,"in":"query","schema":{"type":"string"},"example":"[{\"id\":\"IF Staging\"}]"},{"name":"environmentName","description":"Used to determine the environment name of the system","required":true,"in":"query","schema":{"type":"string"},"example":"All"},{"name":"startTime","description":"Used to determine the start time of the root cause anomaly events to fetch","required":true,"in":"query","schema":{"type":"string"},"example":"1577750400000"},{"name":"tzOffset","description":"used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"System's anomlay events from the alert project only","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AlertSummaryTimeline"}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Alert Summary"]}},"/api/v2/incidentpredictiontimelines":{"get":{"description":"Get the predicted incident timeline of the system","parameters":[{"name":"userName","description":"Used to determine which user is requesting information.","required":true,"in":"query","schema":{"type":"string"},"example":"admin"},{"name":"customerName","description":"Used to determine which user owns system","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"systemIds","description":"Used to determine the system name","required":true,"in":"query","schema":{"type":"string"},"example":"[{\"id\":\"IF Staging\"}]"},{"name":"environmentName","description":"Used to determine the environment of the system","required":true,"in":"query","schema":{"type":"string"},"example":"All"},{"name":"startTime","description":"Used to determine the start time of the data to fetch","required":true,"in":"query","schema":{"type":"number"},"example":"1577750400000"},{"name":"endTime","description":"Used to determine the end time of the data to fetch","required":false,"in":"query","schema":{"type":"number"},"example":"1577750500000"},{"name":"tzOffset","description":"Used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"return the predicted incident timeline of the system","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PredictedIncidentTimeLine"}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Incident Prediction"]}},"/api/v1/incidentrelation":{"get":{"description":"Find corresponding/historical detected incident to selected predicted incident","parameters":[{"name":"predictedTime","description":"Used to determine the predicted time of the predicted incident","required":true,"in":"query","schema":{"type":"string"},"example":"1577830200000"},{"name":"instanceName","description":"Used to determine the instance name of the predicted incident","required":true,"in":"query","schema":{"type":"string"},"example":"ip-172-31-52-141.ec2.internal"},{"name":"tzOffset","description":"used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"patternId","description":"Used to determine the pattern id of the predicted incident","required":true,"in":"query","schema":{"type":"string"},"example":"306"},{"name":"userName","description":"Used to determine which user is requesting the information","required":true,"in":"query","schema":{"type":"string"},"example":"admin"},{"name":"projectName","description":"Used to determine the project name of the corresponding detected incident event","required":true,"in":"query","schema":{"type":"string"},"example":"app-tdagentlogs"},{"name":"systemName","description":"Used to determine the system name of the corresponding detected incident event","required":true,"in":"query","schema":{"type":"string"},"example":"IF Staging"},{"name":"customerName","description":"Used to determine the user name of the corresponding the detected incident event","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"Return the corresponding/historical detected incident events","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"tell whether backend process is successful","example":true},"incidentRelationList":{"type":"array","description":"incident relation list","items":{"type":"object","description":"incident relation","properties":{"predictionTime":{"type":"number","description":"prediction time of predicted incident","example":1583919600000},"relationStatus":{"type":"string","description":"tell this detected incident's relation to given predicted incident","example":"corresponding"},"relatedIncident":{"type":"object","properties":{"incidentKey":{"type":"string","description":"primary key of incident","example":"{\"incidentCompositeKey\":{\"projectName\":\"app-tdagentlogs\",\"userName\":\"user\",\"id\":\"ip-172-31-52-141.ec2.internal\",\"dailyStartTimestamp\":1583884800000},\"timestamp\":\"Mar 11, 2020 9:50:40 AM\"}"},"incidentData":{"type":"string","description":"incident raw data","example":"hello word"},"predictionFlag":{"type":"boolean","description":"tell whether this incident is predicted incident","example":false},"incidentKeyword":{"type":"string","description":"keyword of this incident. only for detected incident","example":"started o.e.j.w.webappcontext"},"fixFlag":{"type":"boolean","description":"tell whether this incident has been fixed","example":true},"patternId":{"type":"integer","description":"pattern id of this incident","example":1032},"leadTime":{"type":"number","description":"predicted Incident occurrence time - detected incident occurrence time. the unit is millis","example":640000},"isIgnored":{"type":"boolean","description":"tell whether this incident is ignored"},"patternName":{"type":"string","description":"pattern name of this incident","example":"jettryRestart"}}}}}}}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Incident Prediction"]}},"/api/v1/logCausalInfoServlet":{"get":{"description":"Fetch preceding/trailing events to a selected pattern (pattern type can be either metric, log or incident)","parameters":[{"name":"instanceName","description":"Used to determine the instance name of the selected pattern","required":true,"in":"query","schema":{"type":"string"},"example":"ip-172-31-52-141.ec2.internal"},{"name":"tzOffset","description":"used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"startTime","description":"Used to determine the search start time","required":true,"in":"query","schema":{"type":"string"},"example":"1577750400000"},{"name":"endTime","description":"Used to determine the search end time","required":true,"in":"query","schema":{"type":"string"},"example":"1577836799999"},{"name":"userName","description":"Used to determine which user is requesting the information","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"projectName","description":"Used to determine the project name and owner name of the pattern","required":true,"in":"query","schema":{"type":"string"},"example":"app-tdagentlogs@user"},{"name":"event","description":"Used to determine timestamp, pattern id and event type of the pattern","required":true,"in":"query","schema":{"type":"string"},"example":"{\"timestamp\":1582316232000,\"nid\":1032,\"eventType\":\"Incident\"}"},{"name":"operation","description":"Used to determine whether to fetch preceding events or trailing events","required":true,"in":"query","schema":{"type":"string"},"example":"rootCauseEvents"},{"name":"topKResult","description":"Used to determine the number of events to be fetched. if this field is missing, the default number of events to be fetched is 5.","required":false,"in":"query","schema":{"type":"integer"},"example":5},{"name":"count","description":"Used to determine the count filter for events (i.e fetched events whose count is larger or equal to this value are being considered as result). if this field is missing, the count values is reading from count in project setting","required":false,"in":"query","schema":{"type":"integer"},"example":1},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"Return the preceding/trailing events to the selected pattern depending on user's request","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"tell whether backend process is successful","example":true},"causalGraphInfo":{"description":"include the causal graph information that backend use","type":"object","properties":{"startTime":{"type":"number","description":"start time of causal graph","example":1583193600000},"endTime":{"type":"number","description":"end time of causal graph","example":1583798399999},"causalKey":{"type":"string","description":"causal group key of causal graph","example":"1e8b49a87fc1d809c037f7a73c0d28e974590a812"},"isOldCausal":{"type":"boolean","description":"tell whether use old causal graph","example":false},"duration":{"type":"string","description":"tell which duration that backend uses for traversing causal graph","example":14400000},"joinDependency":{"type":"boolean","description":"tell whether backend join dependency for traversing causal graph","example":true}}},"totalResultNum":{"type":"integer","description":"total number of result","example":10},"rootCauseEvents":{"type":"object","properties":{"Metric":{"type":"array","items":{"type":"string","description":"metric type object string"}},"Log":{"type":"array","items":{"type":"string","description":"log type object string"}},"Incident":{"type":"array","items":{"type":"string","description":"incident type object string"}}}}}},"examples":{"0":{"value":"{\"success\":true,\"totalResultNum\":1,\"causalGraphInfo\":\"{\\\"startTime\\\":1583193600000,\\\"endTime\\\":1583798399999,\\\"causalKey\\\":\\\"1e8b49a87fc1d809c037f7a73c0d28e974590a82\\\",\\\"isOldCausal\\\":false,\\\"duration\\\":14400000,\\\"joinDependency\\\":true}\",\"rootCauseEvents\":{\"Log\":[{\"patternId\":17,\"predictionFlag\":false,\"isDeployment\":true,\"rawData\":\"buildStatus: SUCCESS\\ntriggeringRepository: /home/ubuntu/workspace/CI_Pipelines/Test_Branch_Pipeline/1-Build_Web_Repository\\ngitLog: commit 16e7a321af48afb04fdb101cf372cd9585ce0d42\\nMerge: fd7607fb7 20204a9d7\\nAuthor: zhangzinan <zhangzinan@insightfinder.com>\\nDate:   Mon Mar 9 16:34:59 2020 +0800\\n\\n    Merge branch 'II-6222' into test\\n    \\n    # Conflicts:\\n    #       frontend/version\\n    #       frontend/version.js\\n\",\"type\":\"normal\",\"isIgnored\":false,\"anomalyScore\":0,\"metricInstanceName\":\"build-server\",\"srcTimestamp\":1583743459000,\"causalDelay\":0,\"percentage\":0,\"triedPrediction\":false,\"componentName\":\"build-server\",\"rootCauseSourceInfo\":\"[{\\\"sourceInstanceName\\\":\\\"ip-172-31-52-141.ec2.internal\\\",\\\"sourceDetail\\\":\\\"{\\\\\\\"timeStamp\\\\\\\":1583197380000,\\\\\\\"valid\\\\\\\":true,\\\\\\\"patternName\\\\\\\":\\\\\\\"jettyStart\\\\\\\",\\\\\\\"count\\\\\\\":1,\\\\\\\"nid\\\\\\\":889,\\\\\\\"type\\\\\\\":\\\\\\\"Incident\\\\\\\",\\\\\\\"projectName\\\\\\\":\\\\\\\"app-tdagentlogs\\\\\\\",\\\\\\\"content\\\\\\\":\\\\\\\"Mar 09, 2020 8:44:19 AM com.insightfinder.datastore.CassandraSession createSession\\\\\\\"}\\\",\\\"sourceProjectName\\\":\\\"app-tdagentlogs\\\",\\\"predictionTime\\\":1583743459000,\\\"accumulativeDelay\\\":889000,\\\"delay\\\":889000,\\\"probability\\\":0.958,\\\"timePairStr\\\":\\\"[\\\\\\\"1583197200,1583197380\\\\\\\"]\\\",\\\"count\\\":29,\\\"incidentPredictionFlag\\\":false,\\\"minDelay\\\":120000,\\\"didPredictionTime\\\":1583765901705,\\\"eventTimestamp\\\":1583743459000,\\\"componentName\\\":\\\"App Server\\\",\\\"metricInstanceName\\\":\\\"ip-172-31-52-141\\\"}]\",\"key\":{\"instanceName\":\"build-server\",\"projectName\":\"jenkins-deployment\",\"uuid\":\"0454070a-c833-4521-a2c8-af09df3ac4b6\",\"user\":\"user\",\"timestamp\":1583742570000},\"eventTimestamp\":1583743323301}],\"Metric\":[],\"Incident\":[]}}"}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Root Cause Analysis"]}},"/api/v2/statistics":{"get":{"description":"Get the overview anomaly stats of the system","parameters":[{"name":"getPredictIncidentStats","description":"Used to determine if get the predicted incident stats for onlycurrent day","required":false,"in":"query","schema":{"type":"boolean"},"example":"true"},{"name":"systemName","description":"Used to determine the which system to request the information","required":true,"in":"query","schema":{"type":"string"},"example":"IF Staging"},{"name":"tzOffset","description":"used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"environmentName","description":"Used to determine the environment name of the system","required":true,"in":"query","schema":{"type":"string"},"example":"All"},{"name":"includeIgnore","description":"Used to determine include the ignored events' stats or not","required":false,"in":"query","schema":{"type":"boolean"},"example":"false"},{"name":"dayTimeMillis","description":"Used to determine the date of the system to request","required":true,"in":"query","schema":{"type":"string"},"example":"1577750400000"},{"name":"userName","description":"Used to determine which user is requesting the information","required":true,"in":"query","schema":{"type":"string"},"example":"admin"},{"name":"customerName","description":"Used to determine the user of the requested system","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"Anomaly statistics of the global view system","content":{"application/json":{"schema":{"type":"object","properties":{"predictIncidentStatistics":{"type":"object","description":"predict incident related statistics","properties":{"avgLeadTime":{"type":"number","description":"average lead time between predicted incidents and detected incidents","example":12272800},"totalMatch":{"type":"integer","description":"number of predicted incidents that have corresponding detected incidents","example":5},"predictionAccuracy":{"type":"number","description":"how accurate predicted incidents that have corresponding detected incidents","example":1}}},"statisticsPieChart":{"type":"object","description":"statistics about metric disctribution, log percentage pie chart and instance percentage pie chart","properties":{"logPercentagePieChart":{"description":"log event type distribution","type":"array","items":{"type":"string","example":"{\"percentage\":0,\"type\":\"hot\"}"}},"instancePercentagePieChart":{"description":"instance distribution","type":"array","items":{"type":"string","example":"{\"percentage\":0.18584070796460178,\"id\":\"ip-172-31-61-203\"}"}},"metricPercentagePieChart":{"description":"metric distribution","type":"string","example":"{\"NetworkOut\":0.0625,\"DiskRead\":0.234375,\"LoadAvg1\":0.375,\"CPU\":0.578125,\"LoadAvg5\":0.546875,\"LoadAvg15\":0.21875}"}}},"anomalyTimeLineStatistics":{"type":"object","description":"each event type (e.x log, metric, incident) events statistics","properties":{"predictionCount":{"type":"integer","description":"number of prediction type event","example":0},"detectionCount":{"type":"integer","description":"number of detected type event","example":10},"fixedPredictedIncidentCount":{"type":"integer","description":"number of prediction type event that has been fixed","example":0},"fixedDetectedIncidentCount":{"type":"integer","description":"number of detected type event that has been fixed","example":5},"name":{"type":"string","description":"name of event type","example":"Log"}}}}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Preliminary"]}},"/api/v2/rootcausetimelines":{"get":{"description":"Get the anomaly events of the system","parameters":[{"name":"userName","description":"Used to determine which user is requesting the information.","required":true,"in":"query","schema":{"type":"string"},"example":"admin"},{"name":"customerName","description":"Used to determine the user of the request system","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"systemIds","description":"Used to determine the system names of the timelines","required":true,"in":"query","schema":{"type":"string"},"example":"[{\"id\":\"IF Staging\"}]"},{"name":"environmentName","description":"Used to determine the environment name of the system","required":true,"in":"query","schema":{"type":"string"},"example":"All"},{"name":"startTime","description":"Used to determine the start time of the root cause anomaly events to fetch","required":true,"in":"query","schema":{"type":"string"},"example":"1577750400000"},{"name":"endTime","description":"Used to determine the end time of the root cause anomaly events to fetch","required":false,"in":"query","schema":{"type":"number"},"example":"1577750500000"},{"name":"tzOffset","description":"used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"System's anomlay events","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RootCauseTimeLine"}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Root Cause Analysis"]}},"/api/v1/fetchrealtimecapacityscore":{"get":{"description":"Get real time capacity score and predicted capacity score from all projects under an user","parameters":[{"name":"userName","description":"Used to determine which user is requesting information.","required":true,"in":"query","schema":{"type":"string"},"example":"admin"},{"name":"customerName","description":"Used to determine which user owns system","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"requestLevel","description":"Used to determine which level (project level or user level) of return information","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"env","description":"Used to determine the environment name of the system","required":true,"in":"query","schema":{"type":"string"},"example":"PROD(All)"},{"name":"endTimestamp","description":"Used to determine which date of the capacity score to fetch. If this field is missing, the time is current system time","required":false,"in":"query","schema":{"type":"number"},"example":"1577750500000"},{"name":"tzOffset","description":"Used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"return real time capacity score and predicted capacity score from all projects under an user","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"aggregatedPredictedWeightedScore":{"type":"number","description":"daily predicted capacity score"},"aggregatedWeightedScore":{"type":"number","description":"daily real time capacity score"}}}},"examples":{"0":{"value":"{\"staging-infra\":{\"All\":{\"aggregatedWeightedScore\":0.62980189459634,\"aggregatedPredictedWeightedScore\":0.290909869739524}},\"prod_infra\":{\"All\":{\"aggregatedWeightedScore\":0.8540148746322245,\"aggregatedPredictedWeightedScore\":0.4998151140965362}}}"}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Capacity Planning"]}},"/api/v1/fetchpredictedcapacityscore":{"get":{"description":"Get predicted capacity score(s) in a given time range for a project","parameters":[{"name":"userName","description":"Used to determine which user is requesting information.","required":true,"in":"query","schema":{"type":"string"},"example":"admin"},{"name":"projectName","description":"Used to determine project name and project's owner name","required":true,"in":"query","schema":{"type":"string"},"example":"staging-infra@user"},{"name":"instanceGroup","description":"Used to determine the environment name of the system. If this field is missing, the default value is All","required":false,"in":"query","schema":{"type":"string"},"example":"All"},{"name":"startTimestamp","description":"Used to determine start date of the capacity score to fetch","required":true,"in":"query","schema":{"type":"number"},"example":"1577750500000"},{"name":"endTimestamp","description":"Used to determine end date of the capacity score to fetch","required":true,"in":"query","schema":{"type":"number"},"example":"1577760500000"},{"name":"tzOffset","description":"Used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"return predicted capacity score(s) in a given time range for a project","content":{"application/json":{"schema":{"type":"object","properties":{"PredictCapacityPlaningScoreResult":{"type":"array","items":{"type":"number","description":"daily basis predicted capacity score"}},"realTimeCapacityPlaningScoreResult":{"type":"array","items":{"type":"number","description":"daily basis real capacity score"}}}},"examples":{"0":{"value":"{\"realTimeCapacityPlaningScoreResult\":{\"20200309\":0.6688182465373359},\"PredictCapacityPlaningScoreResult\":{\"20200322\":0.5273328613033705,\"20200321\":0.5015928184962639,\"20200320\":0.49092406712156467,\"20200315\":0.48386959558133996,\"20200314\":0.484514489566455,\"20200313\":0.483742101813247,\"20200312\":0.4837867618548413,\"20200319\":0.4879796359574473,\"20200318\":0.5004844211178274,\"20200317\":0.505619625010998,\"20200316\":0.48385272730476764,\"20200311\":0.4837332305785768,\"20200310\":0.4843964449424568,\"20200331\":0.5463878498023406,\"20200330\":0.5441923577924975,\"20200326\":0.5232673453444971,\"20200403\":0.5795318505874435,\"20200325\":0.5174961200429337,\"20200402\":0.5787445450283552,\"20200324\":0.5170065356303936,\"20200401\":0.5616075787482466,\"20200323\":0.5321013686738271,\"20200407\":0.5796449505743875,\"20200329\":0.5497751271655754,\"20200406\":0.5788609310460217,\"20200328\":0.5612064081328171,\"20200405\":0.5724637840946332,\"20200327\":0.5444814286051879,\"20200404\":0.5700181287416473,\"20200309\":0.29100663860105935,\"20200408\":0.578985468782092}}"}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Capacity Planning"]}},"/api/v1/capacityplanning":{"get":{"description":"Get a project's detailed capacity planning result in a selected date","parameters":[{"name":"userName","description":"Used to determine which user is requesting information.","required":true,"in":"query","schema":{"type":"string"},"example":"admin"},{"name":"projectName","description":"Used to determine project name and project's owner name","required":true,"in":"query","schema":{"type":"string"},"example":"staging-infra@user"},{"name":"env","description":"Used to determine the environment name of the system. If this field is missing, the default value is PROD(All)","required":false,"in":"query","schema":{"type":"string"},"example":"PROD(All)"},{"name":"startTimestamp","description":"Used to determine start date of detailed capacity planning result","required":true,"in":"query","schema":{"type":"number"},"example":"1577750500000"},{"name":"endTimestamp","description":"Used to determine end date of detailed capacity planning result","required":true,"in":"query","schema":{"type":"number"},"example":"1577760500000"},{"name":"isRealCapacityPlanning","description":"Used to determine whether to request prediction info or real info. if isRealCapacityPlanning = true, it means request real info","required":false,"in":"query","schema":{"type":"string"},"example":"true"},{"name":"tzOffset","description":"Used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"return project's detailed capacity planning result in a selected date","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"tell whether backend process is successful"},"instanceObj":{"type":"array","items":{"type":"object","description":"component name to instance names mapping"}},"aggregatedWeightedScore":{"type":"number","description":"predicted capacity planning score"},"metricGroupingPriorityMap":{"type":"object","description":"grouping priority for each metric"},"componentResult":{"type":"array","description":"daily baisis component result","items":{"type":"object","description":"component level result"}}}},"examples":{"0":{"value":"{\"aggregatedWeightedScore\":0.3639910714285714,\"success\":true,\"instanceObj\":{\"All\":{\"backend\":[\"172.31.53.193 (backend)\"],\"frontend\":[\"172.31.53.193 (frontend)\",\"frontend\"]}},\"metricGroupingPriorityMap\":{\"backend\":3,\"frontend\":4},\"componentResult\":{\"20200309\":{\"backend\":[{\"capacityThreshold\":3000,\"capacityScore\":0.18264583333333334,\"thresholdL1\":1500,\"thresholdL2\":2400,\"predictAvg\":547.9375,\"realMax\":578,\"MetricName\":\"get\",\"targetAvgInstancesL1\":1,\"targetAvgInstancesL2\":1,\"realAvg\":552.984121875336,\"targetMaxInstancesL1\":1,\"predictMax\":557.5,\"targetMaxInstancesL2\":1},{\"MetricName\":\"All Metrics\",\"capacityScore\":0.18264583333333334}],\"frontend\":[{\"capacityThreshold\":3290,\"capacityScore\":0.5,\"thresholdL1\":1645,\"thresholdL2\":2632,\"predictAvg\":1645,\"realMax\":2085,\"MetricName\":\"post\",\"targetAvgInstancesL1\":2,\"targetAvgInstancesL2\":1,\"realAvg\":1179.6842105263158,\"targetMaxInstancesL1\":2,\"predictMax\":1645,\"targetMaxInstancesL2\":2},{\"capacityThreshold\":3000,\"capacityScore\":0.44246875,\"thresholdL1\":1500,\"thresholdL2\":2400,\"predictAvg\":1327.40625,\"realMax\":1563.0833333333333,\"MetricName\":\"get\",\"targetAvgInstancesL1\":2,\"targetAvgInstancesL2\":2,\"realAvg\":1335.853650359403,\"targetMaxInstancesL1\":3,\"predictMax\":1517.75,\"targetMaxInstancesL2\":2},{\"capacityThreshold\":2750,\"capacityScore\":0.4792727272727273,\"thresholdL1\":1375,\"thresholdL2\":2200,\"predictAvg\":1318,\"realMax\":1365.8472222222222,\"MetricName\":\"payme\",\"targetAvgInstancesL1\":2,\"targetAvgInstancesL2\":2,\"realAvg\":1325.6531443335834,\"targetMaxInstancesL1\":2,\"predictMax\":1332.75,\"targetMaxInstancesL2\":2},{\"MetricName\":\"All Metrics\",\"capacityScore\":0.5}]}}}"}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Capacity Planning"]}},"/api/v2/healthviewsetting":{"get":{"description":"Get the unified health view setting for the logged in user","parameters":[{"name":"tzOffset","description":"Used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"environmentName","description":"Used to determine the environment name of the unified health view","required":true,"in":"query","schema":{"type":"string"},"example":"All"},{"name":"userName","required":true,"description":"Used to determine which logged in user is requesting information.","in":"query","schema":{"type":"string"},"example":"user"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"Returns the unified health view setting of the logged in user","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/HealthViewSetting"}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Unified Health View"]}},"/api/v2/stats/global/globalviewsystemtimelines":{"get":{"description":"Get the global view system time line includes all the anomaly events","parameters":[{"name":"userName","description":"Used to determine which user is requesting information.","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"customerName","description":"Used to determine the user of the request system","required":true,"in":"query","schema":{"type":"string"},"example":"user"},{"name":"environmentId","description":"Used to determine the environment of the system","required":true,"in":"query","schema":{"type":"string"},"example":"All"},{"name":"systemIds","description":"Used to determine the which systems to fetch,this will fetch all anomaly time line for those systems, you should not pass it with \"systemId\" and \"instanceIds\"","required":false,"in":"query","schema":{"type":"string"},"example":"[{\"id\":\"IF Staging\"}]"},{"name":"systemId","description":"Used to determine the which system to fetch you need to pass it with \"instanceIds\", you should not pass it with \"systemIds\"","required":false,"in":"query","schema":{"type":"string"},"example":"IF Staging"},{"name":"instanceIds","description":"Used to determine the which instances anomaly you want to fetch you need to pass it with \"systemId\", you should not pass it with \"systemIds\"","required":false,"in":"query","schema":{"type":"string"},"example":[{"id":"ip-172-31-63-68","chunk":0},{"id":"ip-172-31-52-238","chunk":0},{"id":"ip-172-31-60-25","chunk":0},{"id":"ip-172-31-48-17","chunk":0},{"id":"ip-172-31-61-203","chunk":0},{"id":"ip-172-31-50-76","chunk":0},{"id":"ip-172-31-53-54","chunk":0},{"id":"build-server","chunk":0},{"id":"stg.insightfinder.com","chunk":0},{"id":"ip-172-31-52-141","chunk":0}]},{"name":"environmentName","description":"Used to determine the environment name of the system","required":true,"in":"query","schema":{"type":"string"},"example":"All"},{"name":"anomalyType","description":"Used to determine the anomaly type of the timeline to get it could be \"incidentPrediction\" or \"rootCause\" or \"alertSummary\"","required":false,"in":"query","schema":{"type":"string"},"example":"incident"},{"name":"startTime","description":"Used to determine the start time of the timeline is requested","required":true,"in":"query","schema":{"type":"string"},"example":"1577750400000"},{"name":"tzOffset","description":"used for time zone localization. The offset should be the difference of the user’s timezone from GMT. (Timezone localization is not a feature that is currently active within the system, but this parameter should still be passed).","required":false,"in":"query","schema":{"type":"number"},"example":"-18000000"},{"name":"User-Agent","description":"used for authentication, describe the machine information and ip address","required":true,"in":"header","schema":{"type":"string"},"example":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36"},{"name":"token","description":"used for authentication, user can get the token after you log in the system. It will expire after certain time, user can get a refreshed token calling userTokenRefresh API","required":true,"in":"cookie","schema":{"type":"string"},"example":"eyJ0eXAiOiJKV1QiLCJleHBpcmVkVGltZXN0YW1wIjoxNTg2MTk5NDYzODQ5LCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJRi1TRUNVUklUWSJ9.OCgWPQZ2zKxVY813P2wWDRXqQtcLQiyJAQ9Km0-0GDk"}],"responses":{"200":{"description":"Get the system anomaly timeline for","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GlobalViewSystemTimeline"}}}}},"401":{"description":"Failed API call","content":{"application/json":{"schema":{"items":{"oneOf":[{"$ref":"#/components/schemas/ExpiredToken"},{"$ref":"#/components/schemas/NoUserAgentInHeader"},{"$ref":"#/components/schemas/NoTokenInCookie"}]}}}}}},"tags":["Unified Health View"]}}},"components":{"securitySchemes":{"Authorization":{"type":"http","scheme":"bearer"}},"schemas":{"GlobalInfo":{"type":"object","properties":{"20191231":{"type":"object","properties":{"infoResult":{"type":"object","properties":{"patternActionMap":{"type":"object","properties":{"IF Staging on Prod":{"type":"string","example":"{\"stg_infra2\":{}}"}}},"environments":{"description":"The environments user owned or shared","type":"array","items":{"properties":{"id":{"type":"string","example":"All","description":"the id of the environment"},"systemIds":{"type":"array","items":{"type":"string","example":"IF Staging on Prod","description":"the id of the system"}}}}},"systems":{"description":"The systems user owned or shared","type":"array","items":{"type":"object","properties":{"id":{"type":"string","example":"IF Staging on Prod","description":"id of the system"},"projectNameSet":{"type":"array","items":{"type":"string","example":"{\"dataType\":\"Alert\",\"projectName\":\"sql_db_alert_v2\",\"userName\":\"user\"}"}},"systemInfo":{"type":"object","properties":{"currentStartTime":{"type":"number","example":1577832961909,"description":"The timestamp of start of the current time and end timestamp for past time"},"currentEndTime":{"type":"number","example":1577832961909,"description":"The timestamp of end of the current time and start timestamp for future time"},"pastStartTime":{"type":"number","example":1577750400000,"description":"The timestamp of start of the past time"},"futureEndTime":{"type":"number","example":1577966161909,"description":"The timestamp of end of the future time"},"owner":{"type":"string","example":"user","description":"the owner of the system"},"createTime":{"type":"number","example":1577832961909,"description":"the creation timestamp of the system"}}},"instanceList":{"type":"array","items":{"type":"string","example":"ip-172-31-50-76","description":"id of instance"}},"ownerUserName":{"type":"string","example":"user","description":"the owner of the system"}}}},"createTime":{"type":"object","properties":{"IF Staging on Prod":{"description":"The creation timestamp of the system","type":"number","example":1583316004268}}}}}}}}},"MetaData":{"type":"object","properties":{"20191231":{"type":"object","properties":{"{\"systemName\":\"IF Staging\",\"environmentName\":\"All\"}":{"type":"object","properties":{"globalViewBasicInfo":{"type":"object","properties":{"currentStartTime":{"type":"number","example":1577832961909,"description":"The timestamp of start of the current time and end timestamp for past time"},"currentEndTime":{"type":"number","example":1577832961909,"description":"The timestamp of end of the current time and start timestamp for future time"},"pastStartTime":{"type":"number","example":1577750400000,"description":"The timestamp of start of the past time"},"futureEndTime":{"type":"number","example":1577966161909,"description":"The timestamp of end of the future time"},"owner":{"type":"string","example":"user","description":"the owner of the system"},"createTime":{"type":"number","example":1577832961909,"description":"the creation timestamp of the system"}}},"globalViewSystemInfo":{"type":"object","properties":{"projectNameSet":{"type":"array","description":"The alert project list of the system","items":{"type":"object","properties":{"dataType":{"type":"string","description":"the type of the project","example":"Alert"},"projectName":{"type":"string","description":"the name of the project","example":"aws-cloudtrail-alert"},"userName":{"type":"string","description":"the owner of the project"}}}}}},"globalViewInstanceInfo":{"type":"object","properties":{"globalViewInstanceMetaDataMap":{"type":"object","description":"the instance info map of system","properties":{"127.0.0.1":{"type":"object","properties":{"instanceId":{"type":"string","description":"the id of instance"},"numberOfAnomaly":{"type":"number","description":"the anomaly count of instance"},"hasIncident":{"type":"boolean","description":"the instance has incident or not"},"instanceProperty":{"type":"object","description":"the instance has incident or not","properties":{"lastMetricDataReceiveTimestamp":{"type":"number","description":"the timestamp of last data received"},"alertProjectName":{"type":"string","description":"the alert project name of instance"},"alertInstanceName":{"type":"string","description":"the alert instance name of instance"},"metricProjectName":{"type":"string","description":"the metric project name of instance"},"metricInstanceName":{"type":"string","description":"the metric instance name of instance"},"logProjectName":{"type":"string","description":"the log project name of instance"},"logInstanceName":{"type":"string","description":"the log instance name of instance"}}},"containerMap":{"type":"object","description":"the container info of instance","properties":{"127.0.0.1-JvmMetrics":{"type":"object","properties":{"containerId":{"type":"string","example":"127.0.0.1-JvmMetrics","description":"the id of container"},"numberOfAnomaly":{"type":"number","description":"the anomaly count of container"},"lastMetricDataReceiveTimestamp":{"type":"number","description":"the timestamp of last data received"}}}}}}}}}}},"globalViewComponentInfo":{"type":"object","properties":{"globViewComponentLevelInfoMap":{"type":"object","description":"the component info map of system","properties":{"worker":{"type":"object","properties":{"instanceIdSet":{"type":"array","description":"the instance list of component","items":{"type":"string","example":"127.0.0.1","description":"the id of instance"}}}}}}}}}}}}}},"InitData":{"type":"object","properties":{"projectList":{"type":"array","items":{"type":"object","properties":{"dataType":{"type":"string","example":"Log","description":"the data typw of the project"},"projectType":{"type":"string","example":"CUSTOM","description":"the project type of the project"},"projectName":{"type":"string","example":"prod_worker_logs","description":"the name of the project"},"customerName":{"type":"string","example":"user","description":"the owner of the project"},"isShared":{"type":"boolean","example":false,"description":"share flag of the project"}}}},"timezoneOffset":{"type":"string","example":"-300"},"success":{"type":"boolean","example":true,"description":"the status of the result"},"licenseValid":{"type":"boolean","example":true,"description":"the valid flag of license"},"defaultTimezone":{"type":"string","example":"US/Eastern"}}},"AlertSummaryTimeline":{"type":"object","description":"anomaly Details list included duration, project info, owner info, anomaly data type(metric log incident), timeline type(past current future), instance name in project, instance name in Global view, rootCauseDetail(metric), rawData(log incident), predictionDetail(if timeLine type is future)","properties":{"0":{"type":"object","properties":{"id":{"type":"string","description":"name of the system","example":"IF Staging"},"name":{"type":"string","description":"name of the system","example":"IF Staging"},"currentStartTime":{"type":"number","description":"The timestamp of start of the current time and end timestamp for past time","example":1583276161558},"endStartTime":{"type":"number","description":"The timestamp of end of the current time and start timestamp for future time","example":1583276161558},"futureEndTime":{"type":"number","description":"The timestamp of end of the future time","example":1583276161558},"pastStartTime":{"type":"number","description":"The timestamp of start of the past time","example":1583193600000},"projectNameSet":{"type":"object","description":"The alert project list of the system","properties":{"0":{"type":"object","properties":{"dataType":{"type":"string","description":"the type of the project","example":"Alert"},"projectName":{"type":"string","description":"the name of the project","example":"aws-cloudtrail-alert"},"userName":{"type":"string","description":"the owner of the project"}}}}},"anomalyTimeLines":{"type":"object","properties":{"startTimestamp":{"type":"number","description":"the start time of the anomaly event","example":1583204400000},"endTimestamp":{"type":"number","description":"the end time of the anomaly event","example":1583204400000},"count":{"type":"number","description":"total number of the events happened in the time period","example":1},"frequency":{"type":"number","description":"the anomaly frequency higher/lower than other time, only used when the event type is hot/cold, if not hot/cold event, it should be 0","example":0},"projectName":{"type":"string","description":"the name of the project that contains the event","example":"aws-cloudtrail-alert"},"projectOwner":{"type":"string","description":"the owner of the project","example":"user"},"type":{"type":"string","description":"the anomaly type of the event","example":"newPattern"},"anomalyRatio":{"type":"number","description":"the anomaly score of the event, the higher the severer","example":1},"timeLineType":{"type":"string","description":"indicate the anomaly event happened in the past or predicted in the future","example":"past"},"patternId":{"type":"number","description":"the id of the pattern","example":80},"patternName":{"type":"string","description":"the user-customized pattern name","example":"Cassandra"},"anomalyLogInstance":{"type":"string","description":"the original instance name of the event in the log project","example":"us-east-1"},"realInstanceName":{"type":"string","description":"the instance name aligned with metric instance name used for consistency in system result","example":"us-east"},"rootCausesDetailsList":{"type":"string","description":"metric root cause details list","example":"[{\"pct\":\"31.35\",\"severity\":31.35,\"instanceId\":\"HBase-RegionServer_ip-172-31-55-228\",\"timePairArr\":[{\"endTimestamp\":1.53195186E12,\"startTimestamp\":1.53195096E12},{\"endTimestamp\":1.53195276E12,\"startTimestamp\":1.53195246E12}],\"appName\":\"HBase-RegionServer_ip-172-31-55-228\",\"rootCauseSource\":\"normal\",\"metricValue\":\"6291.67\",\"rootCauseMetric\":\"Get_num_ops\",\"normalValue\":\"4789.99\",\"direction\":\"higher\"},{\"pct\":\"31.34\",\"severity\":31.34,\"instanceId\":\"HBase-RegionServer_ip-172-31-55-228\",\"timePairArr\":[{\"endTimestamp\":1.53195186E12,\"startTimestamp\":1.53195096E12},{\"endTimestamp\":1.53195276E12,\"startTimestamp\":1.53195246E12}],\"appName\":\"HBase-RegionServer_ip-172-31-55-228\",\"rootCauseSource\":\"normal\",\"metricValue\":\"60300.00\",\"rootCauseMetric\":\"ProcessCallTime_num_ops\",\"normalValue\":\"45909.76\",\"direction\":\"higher\"}]"},"suggestActionList":{"type":"object","description":"suggestion actions of the corresponding anomaly event","properties":{"0":{"type":"object","properties":{"componentName":{"type":"string","description":"the component contains this instance","example":"us"},"instanceName":{"type":"string","description":"the instance name","example":"us-east-1"},"actionMap":{"type":"object","description":"the action contains both English and Chinese verstion","properties":{"English":{"type":"string","description":"action of English version","example":"Check database"},"Chinese":{"type":"string","description":"action of Chinese version","example":"检查数据库"}}}}}}},"rawData":{"type":"string","description":"the content of the anomaly event","example":"Mar 06, 2020 10:32:12 AM com.insightfinder.datastore.CassandraSession createSession INFO: Connected to node: /172.31.53.54 2020-03-06 10:32:12.493:INFO:oejsh.ContextHandler:main:oejsh.ContextHandler#doStart(ContextHandler.java:825): Started o.e.j.w.WebAppContext@64bfbc86{ROOT,/,file:///tmp/jetty-0_0_0_0-8080-ROOT_war-_-any-3715717125417687375.dir/webapp/,AVAILABLE}{/opt/jetty-distribution-9.4.26.v20200117/webapps/ROOT.war}"},"isFixedIncident":{"type":"boolean","description":"if the incident event is fixed by some action, only for the type incident","example":false},"isIgnored":{"type":"boolean","description":"if the event is ignored by the user","example":false},"isImportant":{"type":"boolean","description":"if the event is important to the user","example":true},"isIncidentIgnored":{"type":"boolean","description":"if the incident is ignored","example":false},"consolidatedTimePair":{"type":"array","items":{"type":"object","description":"time pair object for consolidated time(s)","properties":{"predictionTime":{"type":"number","description":"prediction time of consolidated time pair","example":1583197220995},"predictionOccurrence":{"type":"number","description":"prediction occurrence of consolidated time pair","example":1583197220995}}}},"deploymentInfo":{"type":"object","description":"the last software deployed information","properties":{"deploymentTime":{"type":"number","description":"the timestamp of the last software deployed","example":1583197220995},"deploymentMessage":{"type":"string","description":"the deployment message","example":"buildStatus: SUCCESS↵triggeringRepository: /home/ubuntu/workspace/CI_Pipelines/Test_Branch_Pipeline/2-Build_InfrastructureCore_Repository gitLog: commit 3acbc29fcacd1e3d2fd7053fcdc4158fc793ae74 Merge: 5e48cc84d e29c612ae Author: Cai Xu <cai@insightfinder.com> Date:   Mon Mar 2 19:57:26 2020 -0500    Merge branch 'II-6143_ALERT_SUMMARY' into test"}}}}}}}}},"PredictedIncidentTimeLine":{"type":"object","description":"anomaly Details list included duration, project info, owner info, anomaly data type(metric log incident), timeline type(past current future), instance name in project, instance name in Global view, rootCauseDetail(metric), rawData(log incident), predictionDetail(if timeLine type is future)","properties":{"0":{"type":"object","properties":{"id":{"type":"string","description":"name of the system","example":"IF Staging"},"name":{"type":"string","description":"name of the system","example":"IF Staging"},"currentStartTime":{"type":"number","description":"The timestamp of start of the current time and end timestamp for past time","example":1583276161558},"endStartTime":{"type":"number","description":"The timestamp of end of the current time and start timestamp for future time","example":1583276161558},"futureEndTime":{"type":"number","description":"The timestamp of end of the future time","example":1583276161558},"pastStartTime":{"type":"number","description":"The timestamp of start of the past time","example":1583193600000},"projectNameSet":{"type":"object","description":"project list of the system","properties":{"0":{"type":"object","properties":{"dataType":{"type":"string","description":"the type of the project","example":"Log"},"projectName":{"type":"string","description":"the name of the project","example":"app-tdagentlogs"},"userName":{"type":"string","description":"the owner of the project","example":"user"}}}}},"anomalyTimeLines":{"type":"object","properties":{"startTimestamp":{"type":"number","description":"the start time of the anomaly event","example":1583204400000},"endTimestamp":{"type":"number","description":"the end time of the anomaly event","example":1583204400000},"count":{"type":"number","description":"total number of the events happened in the time period","example":1},"frequency":{"type":"number","description":"the anomaly frequency higher/lower than other time, only used when the event type is hot/cold, if not hot/cold event, it should be 0","example":0},"projectName":{"type":"string","description":"the name of the project that contains the event","example":"app-tdagentlogs"},"projectOwner":{"type":"string","description":"the owner of the project","example":"user"},"type":{"type":"string","description":"the anomaly type of the event","example":"newPattern"},"anomalyRatio":{"type":"number","description":"the anomaly score of the event, the higher the severer","example":1},"timeLineType":{"type":"string","description":"indicate the anomaly event happened in the past or predicted in the future","example":"past"},"patternId":{"type":"number","description":"the id of the pattern","example":80},"patternName":{"type":"string","description":"the user-customized pattern name","example":"pattern1"},"anomalyLogInstance":{"type":"string","description":"the original instance name of the event in the log project","example":"us-east-1"},"realInstanceName":{"type":"string","description":"the instance name aligned with metric instance name used for consistency in system result","example":"us-east"},"rootCausesDetailsList":{"type":"string","description":"metric root cause details list","example":"[{\"pct\":\"31.35\",\"severity\":31.35,\"instanceId\":\"HBase-RegionServer_ip-172-31-55-228\",\"timePairArr\":[{\"endTimestamp\":1.53195186E12,\"startTimestamp\":1.53195096E12},{\"endTimestamp\":1.53195276E12,\"startTimestamp\":1.53195246E12}],\"appName\":\"HBase-RegionServer_ip-172-31-55-228\",\"rootCauseSource\":\"normal\",\"metricValue\":\"6291.67\",\"rootCauseMetric\":\"Get_num_ops\",\"normalValue\":\"4789.99\",\"direction\":\"higher\"},{\"pct\":\"31.34\",\"severity\":31.34,\"instanceId\":\"HBase-RegionServer_ip-172-31-55-228\",\"timePairArr\":[{\"endTimestamp\":1.53195186E12,\"startTimestamp\":1.53195096E12},{\"endTimestamp\":1.53195276E12,\"startTimestamp\":1.53195246E12}],\"appName\":\"HBase-RegionServer_ip-172-31-55-228\",\"rootCauseSource\":\"normal\",\"metricValue\":\"60300.00\",\"rootCauseMetric\":\"ProcessCallTime_num_ops\",\"normalValue\":\"45909.76\",\"direction\":\"higher\"}]"},"suggestActionList":{"type":"object","description":"suggestion actions of the corresponding anomaly event","properties":{"0":{"type":"object","properties":{"componentName":{"type":"string","description":"the component contains this instance","example":"us"},"instanceName":{"type":"string","description":"the instance name","example":"us-east-1"},"actionMap":{"type":"object","description":"the action contains both English and Chinese verstion","properties":{"English":{"type":"string","description":"action of English version","example":"Check database"},"Chinese":{"type":"string","description":"action of Chinese version","example":"检查数据库"}}}}}}},"rawData":{"type":"string","description":"the content of the anomaly event","example":"Mar 06, 2020 10:32:12 AM com.insightfinder.datastore.CassandraSession createSession INFO: Connected to node: /172.31.53.54 2020-03-06 10:32:12.493:INFO:oejsh.ContextHandler:main:oejsh.ContextHandler#doStart(ContextHandler.java:825): Started o.e.j.w.WebAppContext@64bfbc86{ROOT,/,file:///tmp/jetty-0_0_0_0-8080-ROOT_war-_-any-3715717125417687375.dir/webapp/,AVAILABLE}{/opt/jetty-distribution-9.4.26.v20200117/webapps/ROOT.war}"},"isFixedIncident":{"type":"boolean","description":"if the incident event is fixed by some action, only for the type incident","example":false},"isIgnored":{"type":"boolean","description":"if the event is ignored by the user","example":false},"isImportant":{"type":"boolean","description":"if the event is important to the user","example":true},"isIncidentIgnored":{"type":"boolean","description":"if the incident is ignored","example":false},"consolidatedTimePair":{"type":"array","items":{"type":"object","description":"time pair object for consolidated time(s)","properties":{"predictionTime":{"type":"number","description":"prediction time of consolidated time pair","example":1583197220995},"predictionOccurrence":{"type":"number","description":"prediction occurrence time of consolidated time pair","example":1583197220995}}}},"deploymentInfo":{"type":"object","description":"the last software deployed information","properties":{"deploymentTime":{"type":"number","description":"the timestamp of the last software deployed","example":1583197220995},"deploymentMessage":{"type":"string","description":"the deployment message","example":"buildStatus: SUCCESS↵triggeringRepository: /home/ubuntu/workspace/CI_Pipelines/Test_Branch_Pipeline/2-Build_InfrastructureCore_Repository gitLog: commit 3acbc29fcacd1e3d2fd7053fcdc4158fc793ae74 Merge: 5e48cc84d e29c612ae Author: Cai Xu <cai@insightfinder.com> Date:   Mon Mar 2 19:57:26 2020 -0500    Merge branch 'II-6143_ALERT_SUMMARY' into test"}}}}}}}}},"RootCauseTimeLine":{"type":"object","description":"anomaly Details list included duration, project info, owner info, anomaly data type(metric log incident), timeline type(past current future), instance name in project, instance name in Global view, rootCauseDetail(metric), rawData(log incident), predictionDetail(if timeLine type is future)","properties":{"0":{"type":"object","properties":{"id":{"type":"string","description":"name of the system","example":"IF Staging"},"name":{"type":"string","description":"name of the system","example":"IF Staging"},"currentStartTime":{"type":"number","description":"The timestamp of start of the current time and end timestamp for past time","example":1583276161558},"endStartTime":{"type":"number","description":"The timestamp of end of the current time and start timestamp for future time","example":1583276161558},"futureEndTime":{"type":"number","description":"The timestamp of end of the future time","example":1583276161558},"pastStartTime":{"type":"number","description":"The timestamp of start of the past time","example":1583193600000},"projectNameSet":{"type":"object","description":"The project list of the system","properties":{"0":{"type":"object","properties":{"dataType":{"type":"string","description":"the type of the project","example":"Log"},"projectName":{"type":"string","description":"the name of the project","example":"app-tdagentlogs"},"userName":{"type":"string","description":"the owner of the project","example":"user"}}}}},"anomalyTimeLines":{"type":"object","properties":{"startTimestamp":{"type":"number","description":"the start time of the anomaly event","example":1583204400000},"endTimestamp":{"type":"number","description":"the end time of the anomaly event","example":1583204400000},"count":{"type":"number","description":"total number of the events happened in the time period","example":1},"frequency":{"type":"number","description":"the anomaly frequency higher/lower than other time, only used when the event type is hot/cold, if not hot/cold event, it should be 0","example":0},"projectName":{"type":"string","description":"the name of the project that contains the event","example":"app-tdagentlogs"},"projectOwner":{"type":"string","description":"the owner of the project","example":"user"},"type":{"type":"string","description":"the anomaly type of the event","example":"newPattern"},"anomalyRatio":{"type":"number","description":"the anomaly score of the event, the higher the severer","example":1},"timeLineType":{"type":"string","description":"indicate the anomaly event happened in the past or predicted in the future","example":"past"},"patternId":{"type":"number","description":"the id of the pattern","example":80},"patternName":{"type":"string","description":"the user-customized pattern name","example":"Cassandra"},"anomalyLogInstance":{"type":"string","description":"the original instance name of the event in the log project","example":"us-east-1"},"realInstanceName":{"type":"string","description":"the instance name aligned with metric instance name used for consistency in system result","example":"us-east"},"rootCausesDetailsList":{"type":"string","description":"metric root cause details list","example":"[{\"pct\":\"31.35\",\"severity\":31.35,\"instanceId\":\"HBase-RegionServer_ip-172-31-55-228\",\"timePairArr\":[{\"endTimestamp\":1.53195186E12,\"startTimestamp\":1.53195096E12},{\"endTimestamp\":1.53195276E12,\"startTimestamp\":1.53195246E12}],\"appName\":\"HBase-RegionServer_ip-172-31-55-228\",\"rootCauseSource\":\"normal\",\"metricValue\":\"6291.67\",\"rootCauseMetric\":\"Get_num_ops\",\"normalValue\":\"4789.99\",\"direction\":\"higher\"},{\"pct\":\"31.34\",\"severity\":31.34,\"instanceId\":\"HBase-RegionServer_ip-172-31-55-228\",\"timePairArr\":[{\"endTimestamp\":1.53195186E12,\"startTimestamp\":1.53195096E12},{\"endTimestamp\":1.53195276E12,\"startTimestamp\":1.53195246E12}],\"appName\":\"HBase-RegionServer_ip-172-31-55-228\",\"rootCauseSource\":\"normal\",\"metricValue\":\"60300.00\",\"rootCauseMetric\":\"ProcessCallTime_num_ops\",\"normalValue\":\"45909.76\",\"direction\":\"higher\"}]"},"suggestActionList":{"type":"object","description":"suggestion actions of the corresponding anomaly event","properties":{"0":{"type":"object","properties":{"componentName":{"type":"string","description":"the component contains this instance","example":"us"},"instanceName":{"type":"string","description":"the instance name","example":"us-east-1"},"actionMap":{"type":"object","description":"the action contains both English and Chinese verstion","properties":{"English":{"type":"string","description":"action of English version","example":"Check database"},"Chinese":{"type":"string","description":"action of Chinese version","example":"检查数据库"}}}}}}},"rawData":{"type":"string","description":"the content of the anomaly event","example":"Mar 06, 2020 10:32:12 AM com.insightfinder.datastore.CassandraSession createSession INFO: Connected to node: /172.31.53.54 2020-03-06 10:32:12.493:INFO:oejsh.ContextHandler:main:oejsh.ContextHandler#doStart(ContextHandler.java:825): Started o.e.j.w.WebAppContext@64bfbc86{ROOT,/,file:///tmp/jetty-0_0_0_0-8080-ROOT_war-_-any-3715717125417687375.dir/webapp/,AVAILABLE}{/opt/jetty-distribution-9.4.26.v20200117/webapps/ROOT.war}"},"isFixedIncident":{"type":"boolean","description":"if the incident event is fixed by some action, only for the type incident","example":false},"isIgnored":{"type":"boolean","description":"if the event is ignored by the user","example":false},"isImportant":{"type":"boolean","description":"if the event is important to the user","example":true},"isIncidentIgnored":{"type":"boolean","description":"if the incident is ignored","example":false},"consolidatedTimePair":{"type":"array","items":{"type":"object","description":"time pair object for consolidated time(s)","properties":{"predictionTime":{"type":"number","description":"prediction time of consolidated time pair","example":1583197220995},"predictionOccurrence":{"type":"number","description":"prediction occurrence time of consolidated time pair","example":1583197220995}}}},"deploymentInfo":{"type":"object","description":"the last software deployed information","properties":{"deploymentTime":{"type":"number","description":"the timestamp of the last software deployed","example":1583197220995},"deploymentMessage":{"type":"string","description":"the deployment message","example":"buildStatus: SUCCESS↵triggeringRepository: /home/ubuntu/workspace/CI_Pipelines/Test_Branch_Pipeline/2-Build_InfrastructureCore_Repository gitLog: commit 3acbc29fcacd1e3d2fd7053fcdc4158fc793ae74 Merge: 5e48cc84d e29c612ae Author: Cai Xu <cai@insightfinder.com> Date:   Mon Mar 2 19:57:26 2020 -0500    Merge branch 'II-6143_ALERT_SUMMARY' into test"}}}}}}}}},"HealthViewSetting":{"type":"object","description":"key is the name of the system","properties":{"IF Staging":{"type":"object","properties":{"aggregationInterval":{"type":"number","description":"the interval by minute of each point on the health view line chart","example":1},"hideFlag":{"type":"boolean","description":"indicate to hide/show the health view card in the unified health view","example":false},"order":{"type":"number","description":"indicate the display order of the system, the higher the first","example":100},"alertEmail":{"type":"string","description":"the recipient(s) of the alert events to send, split by comma \",\"","example":"aa@gmail.com, bb@gmail.com"},"alertHealthScore":{"type":"number","description":"the alert threshold that when the system socre go below, it will send email to notify the receipients","example":80},"lastAlertTimestamp":{"type":"number","description":"last timestamp of send the alert email to the recipients","example":1583519040000},"enableSplunkExport":{"type":"boolean","description":"enable/disable to export the health view to the splunk","example":true},"splunkExportEndpoint":{"type":"string","description":"the url of the splunk server of the user","example":"https://SPLUNKSERVERIP:8088"},"totalHealthScoreSplunkExportToken":{"type":"string","description":"the splunk event collector token of receiving the total health score including previous, current, and next day","example":"asd12d1d13d1fcwdf1w"},"healthScoreSplunkExportToken":{"type":"string","description":"the splunk event collector token of receiving the current day's health score","example":"12513tfgg23rfw13rqfw"},"anomalyTimelineSplunkExportToken":{"type":"string","description":"the splunk event collector token of receiving the anomaly events","example":"12rf13ff13tgtg34g23f"},"splunkExportTimestamp":{"type":"number","description":"last timestamp of sending the health view to the user's splunk","example":1568135100000},"metricTotal99Percentile":{"type":"number","description":"total 99 percentile base for metric events","example":114.78161049292976},"logTotal99Percentile":{"type":"number","description":"total 99 percentile base for log events","example":376.8529514166544},"key":{"type":"object","description":"basic information of the system","properties":{"systemName":{"type":"string","description":"the name of the system","example":"IF Staging"},"environmentName":{"type":"string","description":"the environment of the system","example":"All"},"userName":{"type":"string","description":"the owner of the system","example":"user"}}}}}}},"GlobalViewSystemTimeline":{"type":"object","required":["name"],"properties":{"pastStartTime":{"description":"The timestamp of start of the past time","type":"number","example":1577750400000},"projectNameSet":{"description":"Project info List","type":"array","items":{"type":"object","properties":{"dataType":{"description":"Project Data Type","type":"string","example":"Log"},"projectName":{"description":"Project Name","type":"string","example":"prod_worker_logs"},"userName":{"description":"Customer name","type":"string","example":"user"}}}},"currentStartTime":{"description":"The timestamp of start of the current time and end timestamp for past time","type":"number","example":1577832961909},"endStartTime":{"description":"The timestamp of end of the current time and start timestamp for future time","type":"number","example":1577836561909},"futureEndTime":{"description":"The timestamp of end of the future time","type":"number","example":1577966161909},"name":{"description":"System name","type":"string","example":"IF-Staging"},"anomalyTimeLines":{"type":"object","properties":{"startTimestamp":{"type":"number","description":"the start time of the anomaly event","example":1583204400000},"endTimestamp":{"type":"number","description":"the end time of the anomaly event","example":1583204400000},"count":{"type":"number","description":"total number of the events happened in the time period","example":1},"frequency":{"type":"number","description":"the anomaly frequency higher/lower than other time, only used when the event type is hot/cold, if not hot/cold event, it should be 0","example":0},"projectName":{"type":"string","description":"the name of the project that contains the event","example":"aws-cloudtrail-alert"},"projectOwner":{"type":"string","description":"the owner of the project","example":"user"},"type":{"type":"string","description":"the anomaly type of the event","example":"newPattern"},"anomalyRatio":{"type":"number","description":"the anomaly score of the event, the higher the severer","example":1},"timeLineType":{"type":"string","description":"indicate the anomaly event happened in the past or predicted in the future it could be past current future.","example":"past"},"patternId":{"type":"number","description":"the id of the pattern","example":80},"patternName":{"type":"string","description":"the user-customized pattern name","example":"Cassandra"},"anomalyLogInstance":{"type":"string","description":"the original instance name in its own project","example":"us-east-1"},"realInstanceName":{"type":"string","description":"the instance name aligned with metric instance name used for consistency in system result","example":"us-east"},"rootCausesDetailsList":{"type":"string","description":"metric root cause details list only possible in metric type anomaly","example":"[{\"pct\":\"31.35\",\"severity\":31.35,\"instanceId\":\"HBase-RegionServer_ip-172-31-55-228\",\"timePairArr\":[{\"endTimestamp\":1.53195186E12,\"startTimestamp\":1.53195096E12},{\"endTimestamp\":1.53195276E12,\"startTimestamp\":1.53195246E12}],\"appName\":\"HBase-RegionServer_ip-172-31-55-228\",\"rootCauseSource\":\"normal\",\"metricValue\":\"6291.67\",\"rootCauseMetric\":\"Get_num_ops\",\"normalValue\":\"4789.99\",\"direction\":\"higher\"},{\"pct\":\"31.34\",\"severity\":31.34,\"instanceId\":\"HBase-RegionServer_ip-172-31-55-228\",\"timePairArr\":[{\"endTimestamp\":1.53195186E12,\"startTimestamp\":1.53195096E12},{\"endTimestamp\":1.53195276E12,\"startTimestamp\":1.53195246E12}],\"appName\":\"HBase-RegionServer_ip-172-31-55-228\",\"rootCauseSource\":\"normal\",\"metricValue\":\"60300.00\",\"rootCauseMetric\":\"ProcessCallTime_num_ops\",\"normalValue\":\"45909.76\",\"direction\":\"higher\"}]"},"suggestActionList":{"type":"object","description":"suggestion actions of the corresponding anomaly event","properties":{"0":{"type":"object","properties":{"componentName":{"type":"string","description":"the component contains this instance","example":"us"},"instanceName":{"type":"string","description":"the instance name","example":"us-east-1"},"actionMap":{"type":"object","description":"the action contains both English and Chinese verstion","properties":{"English":{"type":"string","description":"action of English version","example":"Check database"},"Chinese":{"type":"string","description":"action of Chinese version","example":"检查数据库"}}}}}}},"rawData":{"type":"string","description":"the content of the anomaly event only shows in log and incident type anomaly","example":"Mar 06, 2020 10:32:12 AM com.insightfinder.datastore.CassandraSession createSession INFO: Connected to node: /172.31.53.54 2020-03-06 10:32:12.493:INFO:oejsh.ContextHandler:main:oejsh.ContextHandler#doStart(ContextHandler.java:825): Started o.e.j.w.WebAppContext@64bfbc86{ROOT,/,file:///tmp/jetty-0_0_0_0-8080-ROOT_war-_-any-3715717125417687375.dir/webapp/,AVAILABLE}{/opt/jetty-distribution-9.4.26.v20200117/webapps/ROOT.war}"},"isFixedIncident":{"type":"boolean","description":"if the incident event is fixed by some action, only for the type incident","example":false},"isIgnored":{"type":"boolean","description":"if the event is ignored by the user","example":false},"isImportant":{"type":"boolean","description":"if the event is important to the user","example":true},"isIncidentIgnored":{"type":"boolean","description":"if the incident is ignored","example":false},"consolidatedTimePair":{"type":"array","items":{"type":"object","description":"time pair object for consolidated time(s)","properties":{"predictionTime":{"type":"number","description":"prediction time of consolidated time pair","example":1583197220995},"predictionOccurrence":{"type":"number","description":"prediction occurrence of consolidated time pair","example":1583197220995}}}}}},"id":{"description":"System ID","type":"string","example":"IF-Staging"}}},"LogInResponse":{"type":"object","description":"response after logged into the system","properties":{"valid":{"type":"boolean","description":"tell if the user pass the authentication or not","example":true},"tokenExpiredTime":{"type":"number","description":"the expired time of the token, need to exchange the new token before the expired time","example":1586465648408}}},"UserTokenResponse":{"type":"object","description":"response after successfully exchanged the old token for new token","properties":{"tokenExpiredTime":{"type":"number","description":"the expired time of the new token, need to exchange the new token before the expired time","example":1586465648408}}},"ExpiredToken":{"type":"object","description":"response of failed authentication of expired token","properties":{"success":{"type":"boolean","description":"tell user the API call is successful or not","example":false},"errorCode":{"type":"number","description":"error code for expired token","example":6},"message":{"type":"string","description":"error message","example":"Expired token for user admin"}}},"NoUserAgentInHeader":{"type":"object","description":"response of failed authentication of expired token","properties":{"success":{"type":"boolean","description":"tell user the API call is successful or not","example":false},"errorCode":{"type":"number","description":"error code for no User-Agent in the header","example":5},"message":{"type":"string","description":"error message","example":"Invalid token for user admin"}}},"NoTokenInCookie":{"type":"object","description":"response of failed authentication of expired token","properties":{"success":{"type":"boolean","description":"tell user the API call is successful or not","example":false},"errorCode":{"type":"number","description":"error code for no token in the Cookie","example":2},"message":{"type":"string","description":"error message","example":"Unauthorized API access for user admin"}}}}},"security":[{"Authorization":[]}]}