penapi: 3.0.0
servers:
# Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/mehulmshah/RoyalCircuits/1.0.0
  - description: Place Order URL
    url: https://api.prioritypcb.com/v1/{release}
    variables:
      release:
        default: staging
        enum:
          - staging
          - prod
info:
  description: This is an API to integrate with Royal Circuits. When an order is placed, you will make a POST call to the /placeOrder endpoint, containing the customer information & PCB specs. The response of a successfully placed order will be an order reference for the customer, and an internal order ID for the file upload. Next, you will authenticate with the file upload API by making a **POST** call to the /AuthenticatedUser/LoginUser endpoint. You will take the response and use part of it as headers for the /UploadBoardDataFile call. The /SalesOrders/UploadBoardDataFile/{fileUploadRefNum} call is also a POST. The headers come from the authentication response, the {fileUploadRefNum} comes from the placeOrder response, and the body is the file being uploaded (customer gerbers, ODB++, etc).
  version: "1.0.0"
  title: Royal Circuits API Integration
  contact:
    email: mehul@royalcircuits.com
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
tags:
  - name: developers
    description: Operations available to regular developers
paths:
  /placeOrder:
    post:
      tags:
        - developers
      summary: places an order into our internal ERP system
      description: Sends all customer & order information and places an order in our internal system.
      responses:
        '200':
          description: order successfully placed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlaceOrderResponse'
        '400':
          description: 'bad request, missing data'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PlaceOrderData'
        description: Customer and Order Information
  /AuthenticatedUser/LoginUser:
    servers:
      - description: Authentication + File Upload URL
        url: https://arkeoroyalapi.azurewebsites.net/api
    post:
      tags:
        - developers
      summary: authenticates with the file upload API endpoint
      description: Authenticates with the file upload API endpoint
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthenticationLogin'
        description: Customer and Order Information
      responses:
        '200':
          description: successfully authenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthenticationResponse'
        '400':
          description: 'unable to authenticate'
  /SalesOrders/UploadBoardDataFile/{fileUploadRefNum}:
    servers:
      - description: Authentication + File Upload URL
        url: https://arkeoroyalapi.azurewebsites.net/api
    post:
      tags:
        - developers
      summary: uploads a single file to the corresponding order ID
      description: uploads a single file to the corresponding order ID. You must first complete the /AuthenticatedUser/LoginUser route to obtain the necessary headers to succesfully complete this route.
      responses:
        '200':
          description: succesfully uploaded
        '400':
          description: unsuccessfully uploaded
      parameters:
      - name: fileUploadRefNum
        in: path
        description: Pushes the file to the correct order. This value is returned from /placeOrder
        required: true
        schema:
          type: integer
      - name: Authorization
        in: header
        description: This will be the value of CommonDataWebApiOAuthToken from the authentication call
        required: true
        schema:
          type: string
      - name: LoggedInDateTime
        in: header
        description: This will be the value of LoggedInDateTime from the authentication call
        required: true
        schema:
          type: string
    
components:
  schemas:
    PartData:
      type: object
      properties:
        numLayers:
          type: integer
          description: The number of layers of the board
          example: 2
        boardWidth:
          type: number
          description: The width of the board in inches
          example: 1.52
        boardLength:
          type: number
          description: The length of the board in inches
          example: 4.00
      required:
        - numLayers
        - boardWidth
        - boardLength
    PlaceOrderResponse:
      type: object
      properties:
        orderRefNum:
          type: integer
          example: 202314
        fileUploadRefNum:
          type: integer
          example: 6023
    PlaceOrderData:
      type: object
      properties:
        orderSource:
          type: string
          description: The vendor who is placing the order
          example: "Mouser"
        partNumber:
          type: string
          description: This is the customer's project name
          example: "Project ABC"
        partRev:
          type: string
          description: his is the revision of the customer's project
          example: "Rev1.0"
        orderQuantity:
          type: integer
          description: The quantity of boards being ordered
          example: 5
        unitPrice:
          type: number
          description: This is the price for a single quantity
          example: 150.00
        leadtime:
          description: The leadtime of the order
          type: integer
          example: 5
        billingAddress1:
          type: string
          description: The first line of the billing address
          example: "123 Main St."
        billingAddress2:
          type: string
          description: The second line of the billing address
          example: "Apt 7"
        billingAddressCity:
          type: string
          description: The city of the billing address
          example: "San Francisco"
        billingAddressStateName:
          type: string
          description: The state of the billing address
          example: "California"
        billingAddressZipCode:
          type: string
          description: The zip code of the billing address
          example: 94103
        billingAddressCountryName:
          type: string
          description: The country of the billing address
          example: "US"
        shippingName:
          type: string
          description: The ship-to name of the customer
          example: "John Smith"
        shippingAddress1:
          type: string
          description: The first line of the shipping address
          example: "123 Main St."
        shippingAddress2:
          type: string
          description: The second line of the shipping address
          example: "Apt 7"
        shippingAddressCity:
          type: string
          description: The city of the shipping address
          example: "San Francisco"
        shippingAddressStateName:
          type: string
          description: The state of the shipping address
          example: "California"
        shippingAddressZipCode:
          type: string
          description: The zip code of the shipping address
          example: 94103
        shippingAddressCountryName:
          type: string
          description: The country of the shipping address
          example: "US"
        partData:
          $ref: '#/components/schemas/PartData'
      required:
        - orderSource
        - partNumber
        - partRev
        - orderQuantity
        - unitPrice
        - leadtime
        - billingAddress1
        - billingAddress2
        - billingAddressCity
        - billingAddressStateName
        - billingAddressZipCode
        - billingAddressCountryName
        - shippingName
        - shippingAddress1
        - shippingAddress2
        - shippingAddressCity
        - shippingAddressStateName
        - shippingAddressZipCode
        - shippingAddressCountryName
    AuthenticationLogin:
      type: object
      properties:
        WebSitePassword:
          type: string
          description: This is your secure password, and is not available in this documentation
          example: "abcdefg"
        EmailAddress:
          type: string
          description: This is your secure login email, and is not available in this documentation
          example: "a@b.com"
      required:
        - EmailAddress
        - WebSitePassword
    AuthenticationResponse:
      type: object
      properties:
        CommonDataWebApiOAuthToken:
          description: This will be your authorization token
        LoggedInDateTime:
          description: This will be your datetime token