openapi: 3.0.0
servers: 
  - url: 'http://127.0.0.1:{port}/'
    variables:
      port:
        description: '可选端口'
        enum:
          - '9877'
          - '9874'
        default: '9877'
info:
  description:  >-
    脑血管检测仪核心程序控制API。
    可以用来控制和查询核心监测程序的状态。
  version: "0.1.202002281420"
  title: Core of Cerebrovascular Control API
  contact:
    email: xuyu0420@163.com
  license:
    name: MIT
    url: 'https://en.wikipedia.org/wiki/MIT_License'
tags:
  - name: StatusAPI
    description: 状态查询
  - name: MeasureAPI
    description: 测量相关
paths:
  '/Version/Time':
    get:
      operationId: QuerySystemTime
      description: "查询系统当前时间(UTC毫秒)"
      tags:
        - StatusAPI
      responses:
        '200':
           description: "查询系统当前时间(UTC毫秒)"
           content:
             application/json:
               schema:
                type: object
                properties: 
                  CurrentUtcMillsecond:   
                   type: number
                   format: long
                   description: '系统当前时间(UTC毫秒)'
  '/Version/Current':
    get:
      operationId: QuerySystemVersion
      description: "查询系统各组件的版本号"
      tags:
        - StatusAPI
      responses:
        '200':
           description: "查询系统各组件的版本号"
           content:
             application/json:
               schema:
                type: object
                properties: 
                  CoreLibVersion:   
                   type: string
                   description: '通讯协议版本号{主版本号}.{次版本号}.{编译计数}.{编译时间(deltaDaysForm010120000)}'
                   example: '0.0.0.0'
                  CommPrototypeAppVersion:   
                   type: string
                   description: '通讯主程序版本号{主版本号}.{次版本号}.{编译计数}.{编译时间(deltaDaysForm010120000)}'    
                   example: '0.0.0.0'
                  HttpServerPort:   
                   type: number
                   format: short
                   description: 'Web 端口号'    
                  DebugUDPort:   
                   type: number
                   format: short
                   description: '网络日志端UDP口号'                            
  '/status/':
    get: 
       operationId: QuerySystemStatus
       description: "查询系统的整体状态"
       tags:
        - StatusAPI
       responses:
         '200':
           description: "查询成功"
           content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemStatus'             
  '/status/{session_id}':
    get: 
       operationId: QuerySessionStatus
       tags:
        - StatusAPI
       parameters: 
        - in: path
          name: session_id
          description: "测量ID"
          required: true
          example: "2019025711248"
          schema:
            type: string
       responses:
         '404':
            description: >-
               "要查询的测量记录不存在"    
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/result_message'     
                examples: 
                  NotFound:
                    value: 
                      result: "Not Found"
                      message: "测量记录不存在"
                    summary: "查询不存在的测量记录"
                  SessionHasLocked:
                    value: 
                      result: "Session Locked"
                      message: "测量记录被锁定，无权查询"
                    summary: "查询权限不够的记录"                    
         '500':
            description: >-
               "服务器发生错误"    
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/result_message'     
         '200':
            description: "查询成功"
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/SessionInfo'  
                  
  '/measure/new/{session_id}':
    post: 
      operationId: create_new_session
      description: |
        调用核心程序，开启一个新的测量 
        
        编号{session_id} 为 "temp" 的数据为系统保留
      tags:
        - MeasureAPI     
      parameters: 
        - in: path
          name: session_id
          description:  |
            测量ID,非空字符串，要求全局唯一
            
            ‘temp’字符为系统保留参数，不得使用
          required: true
          example: "2019025711248"
          schema:
            type: string
      requestBody:
         description:  申请一次测量的**必要**信息
         required: true
         content:
           application/json:
            schema:
             type: object
             required:
              - stratup_info
              - patient_info
             properties: 
               stratup_info:
                 $ref: '#/components/schemas/SessionStartUpInfo'  
               patient_info: 
                 $ref: '#/components/schemas/PatientInfo'  
      responses:
          '202':
            description: >-
               核心接收接收测量申请，开始新的测量过程   
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/result_message'     
                examples: 
                  Accpeted:
                    value: 
                      result: "Accpeted"
                      message: "{Session_id}"
          '406':
            description: >-
               系统正忙或者离线，无法接收新启测量的申请   
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/result_message'     
                examples: 
                  NotAccpeted:
                    value: 
                      result: "SystemIsBusyAndNotAccepted"
                      message: "{Session_id}"          
                  IsOffline:
                    value: 
                      result: "SystemIsOffline"
                      message: "{Session_id}"    
          '403':
            description: >-
               测量已在进行，无需重复申请    
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/result_message'     
                examples: 
                  MeasureIsAlreadyRunning:
                    value: 
                      result: "MeasureIsAlreadyRunning"
                      message: "{Session_id}"  
          '400':
            description: >-
               存在参数错误    
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/result_message'     
                examples: 
                  MeasureIsAlreadyRunning:
                    value: 
                      result: "MeasureIsAlreadyExist"
                      message: "{Session_id}" 
          '500':
            description: >-
               服务器内部错误 
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/result_message'     
                examples: 
                  MeasureIsAlreadyRunning:
                    value: 
                      result: "内存溢出"
                      message: "{Session_id}"                        
  '/measure/unlock/{session_id}':
    get: 
      operationId: unlock_session_inrunning
      description: "申请强制取消一次测量"
      tags:
        - MeasureAPI     
      parameters: 
        - in: path
          name: session_id
          description: "测量ID"
          required: true
          example: "2019025711248"
          schema:
            type: string                      
      responses:
        '202':
          description: >-
            接受请求，开始停止测量(不一定立刻执行)   
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/result_message'     
              examples: 
                StartToUnlockMeasure:
                  value: 
                    result: "StartToUnlockMeasure"
                    message: "重复{Session_id}" 
        '403':
          description: >-
            没有可以停止的测量 
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/result_message'     
              examples: 
                NoMatchingSessionID:
                  value: 
                    result: "Measure_NotRunning"
                    message: "重复{Session_id}" 
        '400':
          description: >-
             执行发生一般性错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/result_message'     
              examples: 
                NoMatchingSessionID:
                  value: 
                    result: "BadRequest"
                    message: "重复{Session_id}" 
        '500':
          description: >-
            发生内部严重问题
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/result_message'     
              examples: 
                NoMatchingSessionID:
                  value: 
                    result: "SystemError"
                    message: "重复{Session_id}" 
components:
  schemas:
    result_message:
      description: '全局错误消息'
      type: object
      properties:
        result:
          type: string
          description: 返回结果
        message:
          type: string
          description: 返回消息
    SystemStatus:
      description: '系统信息'
      type: object
      properties:
        status:
          $ref: '#/components/schemas/SystemStatusMode'      
        CurrentStartInfo:
          $ref: '#/components/schemas/SessionStartUpInfo'   
    SessionInfo:
      description: '测量信息'
      type: object
      required:
        - Result
      properties: 
        Startup:
          $ref: '#/components/schemas/SessionStartUpInfo'   
        Patient:
         $ref: '#/components/schemas/PatientInfo'  
        Result:
         $ref: '#/components/schemas/MeasureResult'  
        Parameters:
         $ref: '#/components/schemas/Cal_Parameter'  
        Status:  
         $ref: '#/components/schemas/SessionStatusMode' 
        Start_time:
          type: string
          format: date-time
          description: '开始时间'     
          example: "2018-04-30T22:00:00.000+0200"   
        End_time:
          type: string
          format: date-time
          description: '结束时间'     
          example: "2018-04-30T22:00:00.000+0200"           
    MeasureResult:
      description: '测量结果'
      type: object
      properties: 
        MeasureResultStatus:
          type: string
          enum: [NotFound,Canceled,Pass,Failure]
          default: NotFound
          description: >
            测量状态
             * `NotFound` - 记录不存在
             * `Canceled` - 测量被强制取消
             * `Pass` - 测量正常结束
             * `Failure` - 测量失败 
             * `Running` - 测量中 
             * `Error` - 发生错误 
        Comment:
          type: string
          description: '备注消息'
        Start_time:
          type: string
          format: date-time
          description: '开始时间'     
          example: "2018-04-30T22:00:00.000+0200"
        Finish_time:
          type: string
          format: date-time
          description: '结束时间'     
          example: "2018-04-30T22:00:00.000+0200"          
        LP:
          description: '左侧血压数值(LP)，没有数据则为空数组'
          example: [[0.2,0.3,0.5],[0.2,0.8]]
          type: array
          items:
            type: array
            items:
               type: number
               format: double
        LPSel:
          type: number
          format: int32
          example: -1
          description: >
            左侧血压数值中选中的数据编号
             * `>= 0` - 选中了某个数据
             * ` <0` - 未选中任何数据
        RP:
          description: '右侧血压数值(RP)，没有数据则为空数组'
          example: [[0.2,0.3,0.5],[0.2,0.8]]
          type: array
          items:
            type: array
            items:
               type: number
               format: double 
        RPSel:
          type: number
          format: int32
          example: -1
          description: >
            右侧血压数值中选中的数据编号
             * `>= 0` - 选中了某个数据
             * ` <0` - 未选中任何数据               
        LV:
          description: '左侧流速压数值(LV)，没有数据则为空数组'
          example: [[0.2,0.3,0.5],[0.2,0.8]]
          type: array
          items:
            type: array
            items:
               type: number
               format: double
        LVSel:
          type: number
          format: int32
          example: -1
          description: >
            左侧流速压数值中选中的数据编号
             * `>= 0` - 选中了某个数据
             * ` <0` - 未选中任何数据                 
        RV:
          description: '右侧流速压数值(RV)，没有数据则为空数组'
          example: [[0.2,0.3,0.5],[0.2,0.8]]
          type: array
          items:
            type: array
            items:
               type: number
               format: double
        RVSel:
          type: number
          format: int32
          example: -1
          description: >
            右侧流速压数值中选中的数据编号
             * `>= 0` - 选中了某个数据
             * ` <0` - 未选中任何数据                  
        Report:
          $ref: '#/components/schemas/MeasureReport'
        Finished:
          type: boolean
          example: false
          description: '是否已完成'    
    Cal_Parameter:
      description: '计算参数'
      type: object
      required:
        - EcgLevel
        - EcgTopLimit
      properties: 
        EcgLevel:   
          type: number
          format: double
          description: 'ECG阈值'
        EcgTopLimit:
          type: number
          format: double        
          description: 'ECG极限值'
        BloodFlow_ADC_ProportionalAdjustment:
          type: number
          format: double        
          description: '流速模式的ADC的比例调整值'
        BloodPressureMode_ADC_ProportionalAdjustment:
          type: number
          format: double        
          description: '压力模式的ADC的比例调整值'          
        EGGMode_ADC_ProportionalAdjustment:
          type: number
          format: double        
          description: 'ECG模式的ADC的比例调整值'              
        ADC_LinearAdjustment_m_V2:
          type: number
          format: double        
          description: 'ADC线性调整的二次方法参数 Y=aX*x+bx+c 中的a'     
        ADC_LinearAdjustment_m_Vk:
          type: number
          format: double        
          description: 'ADC线性调整的二次方法参数 Y=aX*x+bx+c 中的b'   
        ADC_LinearAdjustment_m_Vb:
          type: number
          format: double        
          description: 'ADC线性调整的二次方法参数 Y=aX*x+bx+c 中的c'             
        ADC_SampleRange:
          type: number
          format: int32        
          description: '物理ADC位数'  
        ADC_SampleMapRange:
          type: number
          format: int32        
          description: '逻辑ADC位数'         
        SimECG_Offset:
          type: number
          format: double        
          description: '模拟心跳计算的偏移值'
        ECG_Evaluation_MinDuartion:
          type: number
          format: double        
          description: '心跳评估的最小周期数量'          
        ECG_Evaluation_TiggerThreshold:
          type: number
          format: double        
          description: '心跳评估的触发阈值'             
    SessionStartUpInfo:
      description: '启动测量的申请信息'
      type: object
      required: 
        - sessionid
        - request_time
        - measure_steps
      properties: 
        sessionid:
          type: string
          description: '测量ID'
          example: "20190916133702"
        request_time:
          type: string
          format: date-time
          description: '请求时间'     
          example: "2018-04-30T22:00:00.000+0200"        
        measure_steps:
          type: array
          minimum: 1
          uniqueItems: true
          items:
            anyOf:
              - $ref: '#/components/schemas/Measure_OneStep'      
          description: |
            测量步骤，字符串数组。表示需要本次测量依次执行的步骤。
            - 只测量左血流:  ["LeftFlow"]
            - 测量左血流与右血流:  ["LeftFlow","RightFlow"]
          example: ["LeftFlow","RightFlow"]
    PatientInfo:         
      description: '患者信息'
      type: object
      required: 
        - PatientID
        - PatientName
        - PatientSex
        - PatientAge
        - PatientDBP
        - PatientSBP
        - PatientHeight
        - PatientWeight
      properties: 
        PatientID:
          type: string
          description: '患者ID/识别号'
        PatientName:
          type: string
          description: '患者姓名'
        PatientBirthday:
          type: string
          format: date
          description: '患者生日'         
        PatientAge:
          type: integer
          format: int32
          description: '患者年龄'  
        IsBirthdayEstimate:
          type: boolean
          description: '生日是否为预估'          
        PatientSex:
          type: string
          enum: [Male,Female]
          description: >
            患者性别
             * `Male` - 男
             * `Female` - 女
        PatientDBP:
          type: integer
          format: int32
          description: '患者舒张压'             
        PatientSBP:
          type: integer
          format: int32
          description: '患者收缩压'        
        PatientHeight:
          type: number
          format: double
          description: '患者收身高(cm)'     
        PatientWeight:
          type: number
          format: double
          description: '患者收体重(kg)' 
    MeasureReport:         
      description: '测量报告'
      type: object
      required: 
        - ReportID
        - ReportDateTime
      properties: 
        ReportID:
          type: string
          description: '报告ID/识别号'  
        ReportDateTime:
          type: string
          format: date
          description: '报告检测日期'
        Pm:
          type: number
          description: '平均压(Pm)  kPa'   
        Hr:
          type: number
          description: '心率  (Hr)   次/分'   
        Score:
          type: number
          description: '评估分'
        Left_Evaluation_Result:
          type: object
          description: '左侧评估数据' 
          properties: 
            name:
              type: string
              example: '左侧评估数据'
              readOnly: true
              description: '名称'
            isEnabled:
              type: boolean
              example: false
              readOnly: true
              description: '是否可用'
            value:  
              $ref:  '#/components/schemas/PatientScoreEvaluationMap'   
        Left_Reference_Result:
          type: object
          description: '左侧参照值' 
          properties: 
            name:
              type: string
              example: '左侧参照值'
              readOnly: true
              description: '名称'   
            isEnabled:
              type: boolean
              example: false
              readOnly: true
              description: '是否可用'              
            value:  
              $ref:  '#/components/schemas/PatientScoreReferenceValueMap'  
        Right_Evaluation_Result:
          type: object
          description: '右侧评估数据' 
          properties: 
            name:
              type: string
              example: '右侧评估数据'
              readOnly: true
              description: '名称'   
            isEnabled:
              type: boolean
              example: false
              readOnly: true
              description: '是否可用'              
            value:  
              $ref:  '#/components/schemas/PatientScoreEvaluationMap' 
        Right_Reference_Result:
          type: object
          description: '右侧参照值' 
          properties: 
            name:
              type: string
              example: '右侧参照值'
              readOnly: true
              description: '名称' 
            isEnabled:
              type: boolean
              example: false
              readOnly: true
              description: '是否可用'              
            value:  
              $ref:  '#/components/schemas/PatientScoreReferenceValueMap'           
        Anaresult:  
          type: string
          description: '分析提示(供参考)'
        Finished:
          type: boolean
          example: false
          description: '是否已完成'           
    PatientScoreEvaluationMap:
      description: '患者测量数据清单'
      type: object
      properties: 
        Finished:
          type: boolean
          example: false
          description: '是否已完成'  
        Qmean:
          type: object
          description: '平均流量 Qmean   ml/s'
          properties:
            name:
              type: string
              example: '平均流量'
              readOnly: true
              description: '名称'   
            value:
              type: number
              description: '数值'   
            unit:
              type:  string
              readOnly: true
              example: 'ml/s'
              description: '单位'   
            suggest:
              type: string
              description: '评估建议'   
        Vmean:
          type: object
          description: '平均流速 Vmean   cm/s'
          properties:
            name:
              type: string
              example: '平均流速'
              readOnly: true
              description: '名称'   
            value:
              type: number
              description: '数值'   
            unit:
              type:  string
              readOnly: true
              example: 'cm/s'
              description: '单位'               
            suggest:
              type: string
              description: '评估建议'                 
        Vmax:
          type: object
          description: '最大流速 Vmax     cm/s'
          properties:
            name:
              type: string
              example: '最大流速'
              readOnly: true
              description: '名称'   
            value:
              type: number
              description: '数值' 
            unit:
              type:  string
              readOnly: true
              example: 'cm/s'
              description: '单位'                 
            suggest:
              type: string
              description: '评估建议'                
        Vmin:
          type: object
          description: '最小流速 Vmin     cm/s'
          properties:
            name:
              type: string
              example: '最小流速'
              readOnly: true
              description: '名称'   
            value:
              type: number
              description: '数值'  
            unit:
              type:  string
              readOnly: true
              example: 'cm/s'
              description: '单位'                
            suggest:
              type: string
              description: '评估建议'                 
        Wv:
          type: object
          description: '脉搏波速 Wv        m/s'   
          properties:
            name:
              type: string
              example: '脉搏波速'
              readOnly: true
              description: '名称'  
            value:
              type: number
              description: '数值' 
            unit:
              type:  string
              readOnly: true
              example: 'm/s'
              description: '单位'               
            suggest:
              type: string
              description: '评估建议'                
        Zcv:
          type: object
          description: '特性阻抗 Zcv       kPa*s/m'   
          properties:
            name:
              type: string
              example: '特性阻抗'
              readOnly: true
              description: '名称'  
            value:
              type: number
              description: '数值'   
            unit:
              type:  string
              readOnly: true
              example: 'm/s'
              description: '单位'              
            suggest:
              type: string
              description: '评估建议'  
        DI:
          type: object
          description: '可扩张度 DI'  
          properties:
            name:
              type: string
              example: '可扩张度 DI'
              readOnly: true
              description: '名称'  
            value:
              type: number
              description: '数值' 
            unit:
              type:  string
              readOnly: true
              example: ''
              description: '单位'                  
            suggest:
              type: string
              description: '评估建议' 
        Rv:
          type: object
          description: '外周阻力 Rv        kPa*s/m'   
          properties:
            name:
              type: string
              example: '外周阻力'
              readOnly: true
              description: '名称'  
            value:
              type: number
              description: '数值'
            unit:
              type:  string
              readOnly: true
              example: 'kPa*s/m'
              description: '单位'                
            suggest:
              type: string
              description: '评估建议' 
        DR:
          type: object
          description: '动态阻力 DR       kPa*s/m' 
          properties:
            name:
              type: string
              example: '动态阻力'
              readOnly: true
              description: '名称'  
            value:
              type: number
              description: '数值' 
            unit:
              type:  string
              readOnly: true
              example: 'kPa*s/m'
              description: '单位'               
            suggest:
              type: string
              description: '评估建议'               
        CP:
          type: object
          description: '临界压力 CP       kPa'   
          properties:
            name:
              type: string
              example: '临界压力'
              readOnly: true
              description: '名称'  
            value:
              type: number
              description: '数值'  
            unit:
              type:  string
              readOnly: true
              example: 'kPa'
              description: '单位'                
            suggest:
              type: string
              description: '评估建议'   
        DP:
          type: object
          description: '差压 DP         kPa'  
          properties:
            name:
              type: string
              example: '差压'
              readOnly: true
              description: '名称'  
            value:
              type: number
              description: '数值' 
            unit:
              type:  string
              readOnly: true
              example: 'kPa'
              description: '单位'                 
            suggest:
              type: string
              description: '评估建议'   
    PatientScoreReferenceValueMap:
      description: '患者评估值清单'
      type: object
      properties: 
        Qmean:
          type: object
          description: '平均流量 Qmean   ml/s'  
          properties:
            name:
              type: string
              example: '平均流量'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item'
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison: 
        Vmean:
          type: object
          description: '平均流速 Vmean   cm/s' 
          properties:
            name:
              type: string
              example: '平均流速'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item'  
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison:   
        Vmax:
          type: object
          description: '最大流速 Vmax     cm/s' 
          properties:
            name:
              type: string
              example: '最大流速'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item'  
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison:                   
        Vmin:
          type: object
          description: '最小流速 Vmin     cm/s' 
          properties:
            name:
              type: string
              example: '最小流速'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item'
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison:                   
        Wv:
          type: object
          description: '脉搏波速 Wv        m/s' 
          properties:
            name:
              type: string
              example: '脉搏波速'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item'
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison:                   
        Zcv:
          type: object
          description: '特性阻抗 Zcv       kPa*s/m' 
          properties:
            name:
              type: string
              example: '特性阻抗'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item'
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison:                   
        DI:
          type: object
          description: '可扩张度 DI' 
          properties:
            name:
              type: string
              example: '可扩张度'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item'
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison:                   
        Rv:
          type: object
          description: '外周阻力 Rv        kPa*s/m' 
          properties:
            name:
              type: string
              example: '外周阻力'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item' 
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison:                   
        DR:
          type: object
          description: '动态阻力 DR       kPa*s/m' 
          properties:
            name:
              type: string
              example: '动态阻力'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item'
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison:                   
        CP:
          type: object
          description: '临界压力 CP       kPa' 
          properties:
            name:
              type: string
              example: '临界压力'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item' 
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison:                   
        DP:
          type: object
          description: '差压 DP         kP' 
          properties:
            name:
              type: string
              example: '差压'
              readOnly: true
              description: '名称'  
            ReferenceValue_Type:
              $ref:  '#/components/schemas/ReferenceValue_Types'
            ReferenceValue:
              type: object
              oneOf:
                - $ref: '#/components/schemas/ReferenceValue_SingleValue_Item'
                - $ref: '#/components/schemas/ReferenceValue_RangeValue_Item'
              example:
                RefValue: 2.0
                Comparison:   
                
    ReferenceValue_Types:
      type: string
      enum: [SingleValue,Range]
      default: SingleValue
      description: >
        参考值比较方式
         * `SingleValue` - 单值比较
         * `Range` - 范围比较
     
    ReferenceValue_SingleValue_Comparison:
      type: string
      enum: [LS,LSorEQ,EQ,GT,GTorEQ,InRangeLORO]
      default: LS
      description: >
        参考值比较方式(单值)
         * `LS` - 小于
         * `LSorEQ` - 小于等于
         * `EQ` - 等于
         * `GT` - 大于  
         * `GTorEQ` - 大于等于
         
    ReferenceValue_RangeValue_IntervalType:
      type: string
      enum: [Open,Close]
      default: Close
      description: >
        区间类型(范围)
         * `Open` - 开区间，不包括
         * `Close` - 闭区间，包括
         
    ReferenceValue_SingleValue_Item:
      type: object
      description: '单值比较数据实体'  
      properties:
        RefValue:
          type: number
          description: '参考值'
        Comparison:
          $ref: '#/components/schemas/ReferenceValue_SingleValue_Comparison'   
          
    ReferenceValue_RangeValue_Item:
      type: object
      description: '范围比较数据实体'  
      properties:
        RefValue_Start:
          type: number
          description: '参考值-起始'
        RefValue_Start_isInfinit:
          type: boolean
          description: '参考值-起始是否为无穷小'          
        RefValue_End:
          type: number
          description: '参考值-结束'    
        RefValue_End_isInfinit:
          type: boolean
          description: '参考值-结束是否为无穷大'            
        Interval_LeftComparison:
          $ref: '#/components/schemas/ReferenceValue_RangeValue_IntervalType'  
        Interval_RightComparison:
          $ref: '#/components/schemas/ReferenceValue_RangeValue_IntervalType'            
    Measure_OneStep:
      type: string
      enum: [LeftFlow,LeftPressure,RightFlow,RightPressure]
      default: Offline
      description: >
        测量步骤
         * `LeftFlow` - 左侧血流
         * `LeftPressure` - 左侧血压
         * `RightFlow` - 右侧血流
         * `RightPressure` - 右侧血压    
    SystemStatusMode:
      type: string
      enum: [Starting,Idle,Measure_Starting,Measure_Running,Measure_Ending,Stopping,Offline]
      default: Offline
      description: >
        系统状态
         * `Starting` - 系统启动中
         * `Idle` - 系统空闲，可以开始新的测量
         * `Measure_Starting` - 测量启动中
         * `Measure_Running` - 测量进行中
         * `Measure_Ending` - 测量结束中
         * `Stopping` - 系统停止中
         * `Offline` - 系统停止服务
    SessionStatusMode:
      type: string
      enum: [InRuning,Finsished,Canceled]
      default: Canceled
      description: >
        测量过程状态
         * `InRuning` - 测量正在进行中
         * `Finsished` -测量已完成
         * `Canceled` - 测量已被取消
         * `NotFound` - 测量不存在