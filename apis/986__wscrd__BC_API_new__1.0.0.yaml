openapi: 3.0.0
info:
  description: |
    This is a sample Petstore server.  You can find
    out more about Swagger at
    [http://swagger.io](http://swagger.io) or on
    [irc.freenode.net, #swagger](http://swagger.io/irc/).
  version: "1.0.0"
  title: Swagger Petstore
  termsOfService: 'http://swagger.io/terms/'
  contact:
    email: apiteam@swagger.io
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
servers:
# Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/wscrd/BC_API_new/1.0.0
  - url: 'https://petstore.swagger.io/v2'
paths:
  /api/login:
    post:
      tags:
        - Auth
      summary: Auth with email & password to get Bearer token
      operationId: 'App\Http\Controllers\Auth\LoginController::login'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                email:
                  type: string
                password:
                  type: string
              type: object
              example:
                email: dev.api@npdit.com
                password: XXX
      responses:
        '200':
          description: json schema
          content:
            application/json:
              example:
                data:
                  id: 2
                  name: Self Care UAT
                  email: selfcare.api@npdit.com
                  created_at: '2019-08-12 12:01:04'
                  updated_at: '2020-01-16 14:58:44'
                  api_token: MDCI8d6VHlurN8DXMFY7ikOcvO9BohlUYcgMkfQDpvWad3caodENwYowtEeQ
  /api/logout:
    post:
      tags:
        - Auth
      operationId: 'App\Http\Controllers\Auth\LoginController::logout'
      responses:
        '200':
          description: json schema
          content:
            application/json: {}
      security:
        - bearer: []
  /api/businessCard:
    get:
      tags:
        - Business Cards
      summary: 'Get business card offers '
      operationId: 'App\Http\Controllers\BusinessCards\BusinessCardsController::get'
      parameters:
        - name: customerNo
          in: query
          description: Company registration No
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'json schema.  <br>  offerType list: *Voice*,*MBB*  <br>  productGroup list: *Tarifu plāni BIZNESAM,Internets datoram,Roaming Price,International Price Voice,Data buckets,Local Price,Fiksētie numuri*'
          content:
            application/json:
              example:
                0QL1X000000Be2vWAC:
                  offerInfo:
                    offerId: 0QL1X000000Be2vWAC
                    offerPrice: 5.99
                    offerPriceWithDiscount: 3
                    offerType: Voice
                  offerDetails:
                  - productName: Tarifu plāns Bizness Latvija
                    productGroup: Tarifu plāni BIZNESAM
                    productSiebelCode: 1-ARVKYJ
                  - productName: Starptautiskā atlaide - Baltkrievija
                    productGroup: International Price Voice
                    productSiebelCode: 1-1F9UL
                0QL1X000000Be2xWAC:
                  offerInfo:
                    offerId: 0QL1X000000Be2xWAC
                    offerPrice: 18.99
                    offerPriceWithDiscount: 7.596
                    offerType: Voice
                  offerDetails:
                  - productName: Tarifu plāns Bizness Eiropa Bezlimits
                    productGroup: Tarifu plāni BIZNESAM
                    productSiebelCode: 1-ARTR66
        '400':
          description: json schema
          content:
            application/json:
              example:
                data: Business card not found
      security:
        - bearer: []
  /api/businessCardDetails:
    get:
      tags:
        - Business Cards
      summary: 'Get business card offers details '
      operationId: 'App\Http\Controllers\BusinessCards\BusinessCardsController::getDetails'
      parameters:
        - name: customerNo
          in: query
          description: Company registration No
          required: true
          schema:
            type: string
      responses:
        '200':
          description: |-
            json schema.
                 *              <br>  Discount amount fields: *Discount Percentage*,*Discount Percentage 2*,*Discount Percentage 3*,*Discount Amount*
                 *              <br> productClass types: *Data buckets*,*Tarifu plāni BIZNESAM*,*Internets datoram*
                 *          
          content:
            application/json:
              example:
                statusCode: null
                message: null
                customer:
                  tele2CustomerSince: null
                  status: Customer
                  owner: bawal@enxoo.com
                  overduePayments: null
                  maxCreditValue: 1700
                  last3MRevenue: null
                  isVATPayer: true
                  id: 0011x00000RyTatAAF
                  customerVATNo: LV40001000578
                  customerNo: '40001000578'
                  currencyCode: EUR
                  creditScore: '3'
                  creditCheckDate: '2019-08-22T08:29:59'
                  businessClass: '6'
                  budgetUsage: null
                  budgetTotal: null
                  budgetEligible: false
                  blacklistedReason: null
                  blacklisted: false
                contract:
                  turnoverDuringContract: 521
                  totalSimCount: 3
                  totalOTCList: 0
                  totalOTCDiscount: 0
                  totalOTC: 0
                  totalMRCList: 24.13
                  totalMRCDiscount: 9.99
                  totalMRC: 21.72
                  status: Active
                  startDate: 22/08/2019
                  products:
                    - simCount: null
                      productCode: 1-ARY9TA
                      productClass: Data buckets
                      perSimMRCList: null
                      perSimMRC: null
                      parentProductId: 0QL1x000000Cw6wGAC
                      otcList: 0
                      otcDiscount: 0
                      otc: 0
                      name: Internets telefonā 500 MB Eiropā
                      mrcList: 2.99
                      mrcDiscount: 10
                      mrc: 2.691
                      id: 0QL1x000000Cw6vGAC
                      definitionId: PRD00EC8NR6G3H1
                      currencyCode: null
                      attributes:
                        - value: '500'
                          type: Number
                          name: Bucket Amount (MB)
                          id: QLA00MSD8O3HAIV
                          definitionId: ATR00X1G01GLZCD
                        - value: '1'
                          type: Number
                          name: TECH Item Count
                          id: QLA00B083IL5RHH
                          definitionId: ATR00X0Z0STMXVY
                        - value: 10%
                          type: Picklist
                          name: Discount Percentage 3
                          id: QLA00LH8FD374SD
                          definitionId: ATR000OJ6NFV9R3
                        - value: '1'
                          type: Number
                          name: TECH SIM Count on Data Bucket
                          id: QLA00DTWJEPSFBC
                          definitionId: ATR00T48E539S8I
                    - simCount: 1
                      productCode: 1-ARTR4G
                      productClass: Tarifu plāni BIZNESAM
                      perSimMRCList: 11.69
                      perSimMRC: 10.521
                      parentProductId: null
                      otcList: 0
                      otcDiscount: 0
                      otc: 0
                      name: Tarifu plāns Bizness Eiropa 1 GB
                      mrcList: 11.69
                      mrcDiscount: 10
                      mrc: 10.521
                      id: 0QL1x000000Cw6wGAC
                      definitionId: PRD00DDW7Y7TW7R
                      currencyCode: null
                      attributes:
                        - value: '1'
                          type: Number
                          name: SIM Count
                          id: QLA008YBXN82RQO
                          definitionId: ATR00U0L8I7RUPR
                        - value: 10%
                          type: Picklist
                          name: Discount Percentage
                          id: QLA002VWQI8TEUF
                          definitionId: ATR00T4CLVB94HK
                        - value: 1-CU6W7M
                          type: Picklist
                          name: Discount Percent SBL ID
                          id: QLA00H6O44RFSLH
                          definitionId: ATR00AY6F8Y21G1
                        - value: '1'
                          type: Number
                          name: Data Buckets Count
                          id: QLA00QN8KLSBJS6
                          definitionId: ATR00UL3YUBQAYV
                        - value: '500'
                          type: Number
                          name: Data Buckets Amount (MB)
                          id: QLA00C15M5CYLSW
                          definitionId: ATR00VN5HR2EVB7
                    - simCount: 1
                      productCode: 1-877C09
                      productClass: Internets datoram
                      perSimMRCList: 4.95
                      perSimMRC: 4.455
                      parentProductId: null
                      otcList: 0
                      otcDiscount: 0
                      otc: 0
                      name: Datu plāns 10
                      mrcList: 4.95
                      mrcDiscount: 10
                      mrc: 4.455
                      id: 0QL1x000000Cw70GAC
                      definitionId: PRD00MTZXRQEG3H
                      currencyCode: null
                      attributes:
                        - value: '1'
                          type: Number
                          name: SIM Count
                          id: QLA00EN8ZZQSEY7
                          definitionId: ATR00U0L8I7RUPR
                        - value: Percent
                          type: Radio
                          name: Discount Type
                          id: QLA00VX02DVCXIL
                          definitionId: ATR00I4C64PFNGV
                        - value: 10%
                          type: Picklist
                          name: Discount Percentage
                          id: QLA00YWXU8UOA24
                          definitionId: ATR00T4CLVB94HK
                        - value: 1-CU6W7M
                          type: Picklist
                          name: Discount Percent SBL ID
                          id: QLA00QJ1BEK7CGY
                          definitionId: ATR00AY6F8Y21G1
                    - simCount: 1
                      productCode: 1-D5QHGT
                      productClass: null
                      perSimMRCList: 4.4959
                      perSimMRC: 4.04631
                      parentProductId: null
                      otcList: 0
                      otcDiscount: 0
                      otc: 0
                      name: Fiksētā IP adrese
                      mrcList: 4.4959
                      mrcDiscount: 10
                      mrc: 4.04631
                      id: 0QL1x000000Cw75GAC
                      definitionId: PRD004A2IN8WB98
                      currencyCode: null
                      attributes:
                        - value: '1'
                          type: Number
                          name: SIM Count
                          id: QLA00TOQ75PXH46
                          definitionId: ATR00U0L8I7RUPR
                        - value: 10%
                          type: Picklist
                          name: Discount Percentage
                          id: QLA004RPVIISGDC
                          definitionId: ATR00T4CLVB94HK
                    - simCount: null
                      productCode: 1-14OBN
                      productClass: BU Agreement
                      perSimMRCList: null
                      perSimMRC: null
                      parentProductId: null
                      otcList: null
                      otcDiscount: null
                      otc: null
                      name: BU līguma saistības 24
                      mrcList: null
                      mrcDiscount: null
                      mrc: null
                      id: null
                      definitionId: null
                      currencyCode: null
                      attributes: null
                  perSimMRCList: 8.043333
                  perSimMRC: 7.24
                  owner: veronika.buhalova@tele2.com
                  id: 8001x000000EaonAAC
                  endDate: 22/08/2021
                  currencyCode: EUR
                  contractTerm: 24
                  contractNumber: 00000269
                  comment: null
                  activatedDate: null
        '400':
          description: json schema
          content:
            application/json:
              example:
                data: Business card not found
      security:
        - bearer: []
  /api/businessCardList:
    get:
      tags:
        - Business Cards
      summary: Get business cards by parameters
      operationId: 'App\Http\Controllers\BusinessCards\BusinessCardsController::getList'
      parameters:
        - name: query
          in: query
          description: |-
            Query parameters.
                 *          <br>  **Parameters:** *customer-owner*,*customer-blacklisted*,*customer-creditScore*,*customer-budgetEligible*,*customer-budgetTotal*,*customer-businessClass*,*contract-owner*,*contract-status*,*contract-activatedDate*,*contract-startDate*,*contract-endDate*,*contract-contractTerm*,*contract-totalSimCount*
                 *
                 *          <br>  **Operators:**
                 *          <br>*gte - Greater than or equal. Eg. /endpoint?contract.totalSimCount.gte=100</br>
                 *           <br>gt - Greater than. Eg. /endpoint?contract-startDate.gt=2017-12-31</br>
                 *           <br>lte - Less than or equal. Eg. /endpoint?contract-contractTerm.lte=36</br>
                 *           <br>lt - Less than. Eg. /endpoint?contract-endDate.lt=2019-01-01</br>
                 *           <br>eq - Equals or Included in. Eg. /endpoint?serviceName.eq=SVC-0001 or . Eg. /endpoint?contract-status.eq=Draft,Activated*</br>
                 *
                 *
                 *           <br>  **Response:**
                 *          <br>*pageSize.eq=2&pageNumber.eq=1*   parameters are optional</br>
                 *          
          required: true
          schema:
            type: string
            default: contract-activatedDate.gt=2019-07-01&contract-activatedDate.lt=2019-09-01&pageSize.eq=2&pageNumber.eq=1
      responses:
        '200':
          description: json schema.
          content:
            application/json:
              example:
                totalResults: 100
                statusCode: null
                pageTotal: 50
                pageSize: 2
                pageNumber: 1
                moreResultsAvailable: true
                message: null
                data:
                  - customer:
                      status: Customer
                      owner: anna.seredyn@enxoo.com
                      id: 0011x00000OdjZ8AAJ
                      customerNo: '123456456'
                    contract:
                      turnoverDuringContract: 0
                      totalSimCount: 120
                      totalOTCList: 0
                      totalOTCDiscount: 0
                      totalOTC: 0
                      totalMRCList: 1081.79
                      totalMRCDiscount: 39.89
                      totalMRC: 650.27
                      status: Draft
                      startDate: 02/07/2019
                      perSimMRCList: 9.014916666666666
                      perSimMRC: 5.418916666666667
                      owner: adam.marszalek@enxoo.com
                      id: 8001x000000ELQqAAO
                      endDate: null
                      currencyCode: EUR
                      contractTerm: null
                      contractNumber: '00000116'
                      comment: null
                      activatedDate: null
                  - customer:
                      status: Prospect verified
                      owner: katarzyna.mackowiak@enxoo.com
                      id: 0011x00000OdqtHAAR
                      customerNo: '123456'
                    contract:
                      turnoverDuringContract: 3294024
                      totalSimCount: 11617
                      totalOTCList: 0
                      totalOTCDiscount: 0
                      totalOTC: 0
                      totalMRCList: 137415.44
                      totalMRCDiscount: 0.16
                      totalMRC: 137200.6
                      status: Draft
                      startDate: 09/07/2019
                      perSimMRCList: 11.828823276233107
                      perSimMRC: 11.810329689248515
                      owner: adam.marszalek@enxoo.com
                      id: 8001x000000EPeNAAW
                      endDate: null
                      currencyCode: EUR
                      contractTerm: 24
                      contractNumber: '00000137'
                      comment: null
                      activatedDate: null
        '400':
          description: json schema
          content:
            application/json:
              example:
                data: Business cards not found
      security:
        - bearer: []
  /api/customercreditinfo:
    get:
      tags:
        - Customer
      summary: Get customer credit info
      operationId: 'App\Http\Controllers\Customer\CustomerCreditInfoController::get'
      parameters:
        - name: customerNo
          in: query
          description: Company registration No
          required: true
          schema:
            type: string
      responses:
        '200':
          description: json schema
          content:
            application/json: {}
      security:
        - bearer: []
  /api/customerinfo:
    get:
      tags:
        - Customer
      summary: Get customer info
      operationId: 'App\Http\Controllers\Customer\CustomerInfoController::get'
      parameters:
        - name: customerNo
          in: query
          description: Company registration No
          required: true
          schema:
            type: string
      responses:
        '200':
          description: json schema
          content:
            application/json:
              example:
                data:
                  customerNo: '40103565870'
                  customerTitle: SIA XXX
                  address:
                    street: Bukaišu iela 3
                    city: Rīga
                    zip/postal Code: LV-1004
                    country: Latvia
                    addressId: '101823263'
                  isForeign: false
                  tele2CustomerSince: '2015-01-14T00:00:00'
                  customerBillingStatus: Active
                  tele2Representatives:
                    name: John
                    email: john@npdit.com
                  type: Sabiedrība ar ierobežotu atbildību
                  isVATPayer: true
                  customerVATNo: LV40103565870
                  companyStatus: Active
                  customerRepresentatives:
                    - post: valdes loceklis
                      name: Ilze
                      ssn: XXX-XXX
                      isActive: true
        '400':
          description: json schema
          content:
            application/json:
              example:
                data: Customer not found
      security:
        - bearer: []
  /api/budgetUsage:
    patch:
      tags:
        - Budget usage
      summary: Budget usage to SalesForce
      operationId: 'App\Http\Controllers\SalesForce\SalesForceController::budgetUsage'
      requestBody:
        content:
          application/json:
            schema:
              required:
                - budgets
                - customerNo
              properties:
                budgets:
                  type: array
                  items:
                    properties:
                      budgetType:
                        type: string
                      currencyCode:
                        type: string
                      budgetUsage:
                        type: number
                    type: object
                customerNo:
                  type: string
              type: object
              example:
                customerNo: '40103565870'
                budgets:
                  - budgetType: Service Discount
                    budgetUsage: '4650'
                    currencyCode: EUR
      responses:
        '200':
          description: json schema
          content:
            application/json:
              example:
                statusCode: 200
                message: Budget usage updated successfully
                customerNo: '40003272854'
        '400':
          description: json schema
          content:
            application/json:
              example:
                statusCode: 400
                message: Customer with provided identifier was not found
      security:
        - bearer: []
  /api/salesorder:
    post:
      tags:
        - Sales Order
      summary: Post new sales order to Siebel
      operationId: 'App\Http\Controllers\SalesOrders\SalesOrdersController::post'
      requestBody:
        content:
          application/json:
            schema:
              required:
                - requestedTime
                - reference
              properties:
                soHeader:
                  type: array
                  items:
                    properties:
                      requestBy:
                        type: string
                      requestedTime:
                        type: string
                      reference:
                        type: string
                    type: object
                soBody:
                  type: array
                  items:
                    properties:
                      customerNo:
                        type: string
                      billingAccountNo:
                        description: Optional
                        type: string
                      products:
                        type: array
                        items:
                          properties:
                            productSiebelCode:
                              type: string
                            productName:
                              type: string
                            productType:
                              type: string
                            attributes:
                              type: array
                              items:
                                properties:
                                  name:
                                    type: string
                                  value:
                                    type: string
                                type: object
                          type: object
                    type: object
              type: object
              example:
                soHeader:
                  requestBy: jong.doe@tele2.com
                  requestedTime: '2019-01-10T16:00:00'
                  reference: o21j3o12j3oi123121231ojmom
                soBody:
                  customerNo: '40103565870'
                  products:
                    - productSiebelCode: 1-BDE2SG
                      productName: Minimālais rēķins
                      productType: AccountLevelProduct
                      attributes:
                        - name: Minimum debit
                          value: '1200'
                        - name: DurationEndDate
                          value: 27.08.2021
                        - name: DurationUnit
                          value: Month
                        - name: DurationValue
                          value: '24'
      responses:
        '200':
          description: json schema
          content:
            application/json:
              example:
                requestReference: o21j3o12j3oi123121231ojmom
                salesOrderNo: C9200000033
                salesOrderStatus: 'Created, waiting activation in billing'
        '400':
          description: json schema
          content:
            application/json:
              example:
                soBody.products.0.productSiebelCode:
                  - The selected soBody.products.0.productSiebelCode is invalid.
      security:
        - bearer: []
