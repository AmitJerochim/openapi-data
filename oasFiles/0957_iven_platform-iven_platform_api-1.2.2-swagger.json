{
  "openapi" : "3.0.0",
  "info" : {
    "title" : "Iven Platform API",
    "description" : "Public API of Iven Platform",
    "version" : "1.2.2"
  },
  "servers" : [ {
    "url" : "http://api.qa.ivenplatform.com",
    "description" : "QA environment"
  }, {
    "url" : "https://api.iven.io",
    "description" : "Production environment"
  } ],
  "paths" : {
    "/associations" : {
      "get" : {
        "tags" : [ "Associations" ],
        "description" : "Returns the associated devices",
        "parameters" : [ {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "List of associations",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "associations" : {
                      "type" : "object",
                      "properties" : {
                        "items" : {
                          "type" : "array",
                          "items" : {
                            "$ref" : "#/components/schemas/Association"
                          }
                        },
                        "page" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "pageSize" : {
                          "type" : "integer",
                          "example" : 10
                        },
                        "count" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "first" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "last" : {
                          "type" : "boolean",
                          "example" : false
                        },
                        "paged" : {
                          "type" : "boolean",
                          "example" : false
                        },
                        "pageCount" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "empty" : {
                          "type" : "boolean",
                          "example" : false
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post" : {
        "tags" : [ "Associations" ],
        "description" : "Associates a device with the application",
        "parameters" : [ {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven Platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/AssociationPayload"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "Successfully associated device",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Association"
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "Associations" ],
        "description" : "Delete's the app user and all related associations with it",
        "parameters" : [ {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Successfully removed associations"
          }
        }
      }
    },
    "/associations/{associationId}" : {
      "delete" : {
        "tags" : [ "Associations" ],
        "description" : "Removes association of a device from the app",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven Platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Successfully removed association"
          }
        }
      }
    },
    "/associations/{associationId}/last-state" : {
      "get" : {
        "tags" : [ "Association Data Query" ],
        "description" : "Returns last state of associated device",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven Platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Last state of associated device",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/LastState"
                }
              }
            }
          }
        }
      }
    },
    "/associations/{associationId}/historic-data" : {
      "get" : {
        "tags" : [ "Association Data Query" ],
        "description" : "Returns historical data of device within time range of an association",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven Platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "startDate",
          "required" : true,
          "description" : "Starting timestamp of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "endDate",
          "required" : true,
          "description" : "Ending timestamp of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "sortType",
          "required" : false,
          "description" : "ASC or DESC order",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "limitDate",
          "required" : false,
          "description" : "Starting timestamp for pagination",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "offset",
          "required" : false,
          "description" : "Size of returned elements",
          "schema" : {
            "type" : "integer"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Historical data of device within time range of an association",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/HistoricalData"
                }
              }
            }
          }
        }
      }
    },
    "/associations/alarm-definitions" : {
      "get" : {
        "tags" : [ "Association Alarms" ],
        "description" : "Returns alarm definitions",
        "parameters" : [ {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "pageNo",
          "required" : false,
          "description" : "Page number of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "pageSize",
          "required" : false,
          "description" : "Page size of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "sort",
          "required" : false,
          "description" : "Field to sort results with",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "sortType",
          "required" : false,
          "description" : "ASC or DESC order",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "List of alarm definitions",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "alarmDefinitions" : {
                      "type" : "object",
                      "properties" : {
                        "items" : {
                          "type" : "array",
                          "items" : {
                            "$ref" : "#/components/schemas/AlarmDefinition"
                          }
                        },
                        "page" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "pageSize" : {
                          "type" : "integer",
                          "example" : 10
                        },
                        "count" : {
                          "type" : "integer",
                          "example" : 2
                        },
                        "first" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "last" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "paged" : {
                          "type" : "boolean",
                          "example" : false
                        },
                        "pageCount" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "empty" : {
                          "type" : "boolean",
                          "example" : false
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/associations/{associationId}/alarms/logs/query" : {
      "post" : {
        "tags" : [ "Association Alarms" ],
        "description" : "Returns alarm logs of an associated device",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "startDate",
          "required" : false,
          "description" : "Starting timestamp of query window (in milliseconds)",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "endDate",
          "required" : false,
          "description" : "Ending timestamp of query window (in milliseconds)",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "pageNo",
          "required" : false,
          "description" : "Page number of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "pageSize",
          "required" : false,
          "description" : "Page size of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "sort",
          "required" : false,
          "description" : "Field to sort results with",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "sortType",
          "required" : false,
          "description" : "ASC or DESC order",
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/AlarmLogQueryPayload"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "List of alarm logs that triggered from associated device",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "alarmLogs" : {
                      "type" : "object",
                      "properties" : {
                        "items" : {
                          "type" : "array",
                          "items" : {
                            "$ref" : "#/components/schemas/AlarmLog"
                          }
                        },
                        "page" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "pageSize" : {
                          "type" : "integer",
                          "example" : 10
                        },
                        "count" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "first" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "last" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "paged" : {
                          "type" : "boolean",
                          "example" : false
                        },
                        "pageCount" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "empty" : {
                          "type" : "boolean",
                          "example" : false
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/associations/{associationId}/alarms" : {
      "get" : {
        "tags" : [ "Association Alarms" ],
        "description" : "Returns alarms triggered from associated device",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "startDate",
          "required" : false,
          "description" : "Start date of query window (Ex: 2020-01-01)",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "endDate",
          "required" : false,
          "description" : "End date of query window (Ex: 2020-01-03)",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "pageNo",
          "required" : false,
          "description" : "Page number of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "pageSize",
          "required" : false,
          "description" : "Page size of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "sort",
          "required" : false,
          "description" : "Field to sort results with",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "sortType",
          "required" : false,
          "description" : "ASC or DESC order",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "List of alarms that triggered from associated device",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "alarms" : {
                      "type" : "object",
                      "properties" : {
                        "items" : {
                          "type" : "array",
                          "items" : {
                            "$ref" : "#/components/schemas/Alarm"
                          }
                        },
                        "page" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "pageSize" : {
                          "type" : "integer",
                          "example" : 10
                        },
                        "count" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "first" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "last" : {
                          "type" : "boolean",
                          "example" : false
                        },
                        "paged" : {
                          "type" : "boolean",
                          "example" : false
                        },
                        "pageCount" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "empty" : {
                          "type" : "boolean",
                          "example" : false
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/associations/{associationId}/alarms/calendar" : {
      "get" : {
        "tags" : [ "Association Alarms" ],
        "description" : "Returns session alarms to place in calender for the associated device",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "startDate",
          "required" : false,
          "description" : "Start date of query window (Ex: 2020-01-01)",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "endDate",
          "required" : false,
          "description" : "End date of query window (Ex: 2020-01-03)",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "extend",
          "required" : false,
          "description" : "Type anything to get a detailed answer",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Custom list of session alarms",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "alarmsLogs" : {
                      "type" : "array",
                      "items" : {
                        "properties" : {
                          "date" : {
                            "type" : "string",
                            "example" : "alarmDefinitionId"
                          },
                          "times" : {
                            "type" : "array",
                            "items" : {
                              "type" : "string",
                              "example" : [ "11:30", "12:30" ]
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/associations/{associationId}/alarms/{alarmId}/logs" : {
      "get" : {
        "tags" : [ "Association Alarms" ],
        "description" : "Returns logs of an alarm triggered from associated device",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "path",
          "name" : "alarmId",
          "required" : true,
          "description" : "ID generated by created Alarm",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "startDate",
          "required" : false,
          "description" : "Starting timestamp of query window (in milliseconds)",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "endDate",
          "required" : false,
          "description" : "Ending timestamp of query window (in milliseconds)",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "pageNo",
          "required" : false,
          "description" : "Page number of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "pageSize",
          "required" : false,
          "description" : "Page size of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "sort",
          "required" : false,
          "description" : "Field to sort results with",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "sortType",
          "required" : false,
          "description" : "ASC or DESC order",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "List of logs of an alarm that triggered from associated device",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "alarmLogs" : {
                      "type" : "object",
                      "properties" : {
                        "items" : {
                          "type" : "array",
                          "items" : {
                            "$ref" : "#/components/schemas/AlarmLog"
                          }
                        },
                        "page" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "pageSize" : {
                          "type" : "integer",
                          "example" : 10
                        },
                        "count" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "first" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "last" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "paged" : {
                          "type" : "boolean",
                          "example" : false
                        },
                        "pageCount" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "empty" : {
                          "type" : "boolean",
                          "example" : false
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/associations/{associationId}/alarms/logs/{alarmLogId}/events" : {
      "get" : {
        "tags" : [ "Association Alarms" ],
        "description" : "Returns events of an alarm log triggered from associated device",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "path",
          "name" : "alarmLogId",
          "required" : true,
          "description" : "ID generated by created Alarm Log",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "startDate",
          "required" : false,
          "description" : "Starting timestamp of query window (in milliseconds)",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "endDate",
          "required" : false,
          "description" : "Ending timestamp of query window (in milliseconds)",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "pageNo",
          "required" : false,
          "description" : "Page number of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "pageSize",
          "required" : false,
          "description" : "Page size of query window",
          "schema" : {
            "type" : "integer"
          }
        }, {
          "in" : "query",
          "name" : "sort",
          "required" : false,
          "description" : "Field to sort results with",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "sortType",
          "required" : false,
          "description" : "ASC or DESC order",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "List of events of an alarm log that triggered from associated device",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "alarmLogEvents" : {
                      "type" : "object",
                      "properties" : {
                        "items" : {
                          "type" : "array",
                          "items" : {
                            "$ref" : "#/components/schemas/AlarmLogEvents"
                          }
                        },
                        "page" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "pageSize" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "count" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "first" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "last" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "paged" : {
                          "type" : "boolean",
                          "example" : false
                        },
                        "pageCount" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "empty" : {
                          "type" : "boolean",
                          "example" : false
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/associations/{associationId}/send-command" : {
      "post" : {
        "tags" : [ "Association Send Command" ],
        "description" : "Send command to associated device",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven Platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/CommandPayload"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "Successfully sent command"
          }
        }
      }
    },
    "/associations/{associationId}/report-templates" : {
      "get" : {
        "tags" : [ "Association Reports" ],
        "description" : "Returns report templates that associated device can generate report from",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "List of report templates that associated device can generate report from",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "reportTemplates" : {
                      "type" : "object",
                      "properties" : {
                        "items" : {
                          "type" : "array",
                          "items" : {
                            "$ref" : "#/components/schemas/ReportTemplate"
                          }
                        },
                        "page" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "pageSize" : {
                          "type" : "integer",
                          "example" : 10
                        },
                        "count" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "first" : {
                          "type" : "boolean",
                          "example" : true
                        },
                        "last" : {
                          "type" : "boolean",
                          "example" : false
                        },
                        "paged" : {
                          "type" : "boolean",
                          "example" : false
                        },
                        "pageCount" : {
                          "type" : "integer",
                          "example" : 1
                        },
                        "empty" : {
                          "type" : "boolean",
                          "example" : false
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/associations/{associationId}/report-templates/{reportTemplateId}" : {
      "post" : {
        "tags" : [ "Association Reports" ],
        "description" : "Generates a report with provided report template within provided time range",
        "parameters" : [ {
          "in" : "path",
          "name" : "associationId",
          "required" : true,
          "description" : "ID generated by created Assocation",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "path",
          "name" : "reportTemplateId",
          "required" : true,
          "description" : "ID of Report Template",
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        }, {
          "in" : "header",
          "name" : "API-KEY",
          "required" : true,
          "description" : "Application token generated by Iven Platform",
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "header",
          "name" : "API-CLIENT-ID",
          "required" : true,
          "description" : "End user ID generated by app",
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "type" : "object",
                "properties" : {
                  "queryVariables" : {
                    "type" : "object",
                    "properties" : {
                      "startDate" : {
                        "type" : "integer",
                        "example" : 1543910400000
                      },
                      "endDate" : {
                        "type" : "integer",
                        "example" : 1545213800000
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "Report generated from provided report template within provided time range",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/GeneratedReportResult"
                }
              }
            }
          }
        }
      }
    }
  },
  "components" : {
    "schemas" : {
      "Association" : {
        "type" : "object",
        "properties" : {
          "associationId" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "0729a580-2240-11e6-9eb5-0002a5d5c51b"
          },
          "deviceName" : {
            "type" : "string",
            "example" : "Device X"
          },
          "deviceUniqueId" : {
            "type" : "string",
            "example" : "30AEA408AEE0"
          },
          "connectionStatus" : {
            "type" : "string",
            "example" : "CONNECTED"
          },
          "tags" : {
            "type" : "object",
            "properties" : {
              "model" : {
                "type" : "string",
                "example" : "supurge"
              },
              "year" : {
                "type" : "string",
                "example" : "2018"
              }
            }
          }
        }
      },
      "AssociationPayload" : {
        "type" : "object",
        "required" : [ "deviceUniqueId" ],
        "properties" : {
          "deviceUniqueId" : {
            "type" : "string",
            "example" : "30AEA408AEE0"
          },
          "deviceName" : {
            "type" : "string",
            "example" : "My New Device"
          }
        }
      },
      "LastState" : {
        "type" : "object",
        "properties" : {
          "OP_LVL" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "integer",
                "example" : 2
              },
              "timestamp" : {
                "type" : "integer",
                "example" : 1533811495371
              }
            }
          },
          "PWR_CONS" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "integer",
                "example" : 50
              },
              "timestamp" : {
                "type" : "integer",
                "example" : 1533811495371
              }
            }
          },
          "P_STAT" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "integer",
                "example" : null
              },
              "timestamp" : {
                "type" : "integer",
                "example" : null
              }
            }
          },
          "F_STAT" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "integer",
                "example" : null
              },
              "timestamp" : {
                "type" : "integer",
                "example" : null
              }
            }
          },
          "M_MALFUNC" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "integer",
                "example" : null
              },
              "timestamp" : {
                "type" : "integer",
                "example" : null
              }
            }
          },
          "LED_MALFUNC" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "integer",
                "example" : null
              },
              "timestamp" : {
                "type" : "integer",
                "example" : null
              }
            }
          },
          "ENERGY_CONS" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "integer",
                "example" : 30
              },
              "timestamp" : {
                "type" : "integer",
                "example" : 1533811495371
              }
            }
          },
          "HEPA_F_STAT" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "string",
                "example" : "LOW"
              },
              "timestamp" : {
                "type" : "integer",
                "example" : 1533811495371
              }
            }
          },
          "USER_ET" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "integer",
                "example" : 15
              },
              "timestamp" : {
                "type" : "integer",
                "example" : 1533811495371
              }
            }
          },
          "FACTORY_ET" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "integer",
                "example" : null
              },
              "timestamp" : {
                "type" : "integer",
                "example" : null
              }
            }
          },
          "ET" : {
            "type" : "object",
            "properties" : {
              "value" : {
                "type" : "integer",
                "example" : null
              },
              "timestamp" : {
                "type" : "integer",
                "example" : null
              }
            }
          }
        }
      },
      "HistoricalData" : {
        "type" : "object",
        "properties" : {
          "metadata" : {
            "type" : "object",
            "properties" : {
              "totalPageCount" : {
                "type" : "integer",
                "example" : 1
              },
              "totalItemCount" : {
                "type" : "integer",
                "example" : 1
              }
            }
          },
          "items" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "timestamp" : {
                  "type" : "integer",
                  "example" : 1533811495371
                },
                "data" : {
                  "type" : "object",
                  "properties" : {
                    "OP_LVL" : {
                      "type" : "integer",
                      "example" : 2
                    },
                    "PWR_CONS" : {
                      "type" : "integer",
                      "example" : 50
                    },
                    "ENERGY_CONS" : {
                      "type" : "integer",
                      "example" : 30
                    },
                    "HEPA_F_STAT" : {
                      "type" : "string",
                      "example" : "LOW"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "AlarmLogQueryPayload" : {
        "type" : "object",
        "properties" : {
          "queries" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "field" : {
                  "type" : "string",
                  "example" : "alarmDefinitionId"
                },
                "values" : {
                  "type" : "array",
                  "items" : {
                    "type" : "string",
                    "format" : "uuid",
                    "example" : "cede28a4-4b80-4430-8d23-00befc10aeaf"
                  }
                },
                "exclude" : {
                  "type" : "boolean",
                  "example" : false
                }
              }
            }
          },
          "distinctBy" : {
            "type" : "string",
            "example" : "alarmDefinitionId"
          }
        }
      },
      "CommandPayload" : {
        "type" : "object",
        "properties" : {
          "payload" : {
            "type" : "object",
            "properties" : {
              "mode" : {
                "type" : "integer",
                "example" : 0
              }
            }
          }
        }
      },
      "AlarmDefinition" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "cede28a4-4b80-4430-8d23-00befc10aeaf"
          },
          "name" : {
            "type" : "string",
            "example" : "SessionEndedAlarm"
          },
          "description" : {
            "type" : "string",
            "example" : "A cleaning session has ended."
          },
          "severity" : {
            "type" : "string",
            "example" : "INFO"
          },
          "createdAt" : {
            "type" : "integer",
            "example" : 1544106311752
          },
          "updatedAt" : {
            "type" : "integer",
            "example" : 1544175011296
          },
          "createdBy" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "4153f52a-8bae-46ba-83e1-2ff42e9cf17b"
          },
          "updatedBy" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "4153f52a-8bae-46ba-83e1-2ff42e9cf17b"
          }
        }
      },
      "Alarm" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "17598e02-1167-4c0d-b20f-d15ce9591e2c"
          },
          "alarmDefinitionId" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "cede28a4-4b80-4430-8d23-00befc10aeaf"
          },
          "alarmDefinitionName" : {
            "type" : "string",
            "example" : "SessionEndedAlarm"
          },
          "groupingType" : {
            "type" : "string",
            "example" : "SINGLE"
          },
          "deviceId" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "2d38915e-e998-454e-9912-a15e34fc8c95"
          },
          "ruleId" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "9c30bbdf-a278-415e-85c4-6d9af8347a24"
          },
          "alarmStatus" : {
            "type" : "string",
            "example" : "ACTIVE"
          },
          "count" : {
            "type" : "integer",
            "example" : 3
          },
          "createdAt" : {
            "type" : "integer",
            "example" : 1544106311752
          },
          "updatedAt" : {
            "type" : "integer",
            "example" : 1544175011296
          },
          "lastTriggeredAt" : {
            "type" : "integer",
            "example" : 1547104843022
          }
        }
      },
      "AlarmLog" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "049eaa04-688f-4fd5-a7b5-e105fd1e119a"
          },
          "alarmId" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "17598e02-1167-4c0d-b20f-d15ce9591e2c"
          },
          "alarmDefinitionId" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "cede28a4-4b80-4430-8d23-00befc10aeaf"
          },
          "alarmDefinitionName" : {
            "type" : "string",
            "example" : "SessionEndedAlarm"
          },
          "payload" : {
            "type" : "string",
            "example" : "Session Ended"
          },
          "createdAt" : {
            "type" : "integer",
            "example" : 1547104959122
          },
          "firstEvent" : {
            "type" : "object",
            "properties" : {
              "OP_LVL" : {
                "type" : "integer",
                "example" : 4
              },
              "PWR_CONS" : {
                "type" : "integer",
                "example" : 2285
              },
              "P_STAT" : {
                "type" : "integer",
                "example" : 0
              },
              "F_STAT" : {
                "type" : "integer",
                "example" : 0
              },
              "M_MALFUNC" : {
                "type" : "integer",
                "example" : 0
              },
              "LED_MALFUNC" : {
                "type" : "integer",
                "example" : 0
              },
              "ENERGY_CONS" : {
                "type" : "number",
                "example" : 740.34
              },
              "HEPA_F_STAT" : {
                "type" : "string",
                "example" : "LOW"
              },
              "ET" : {
                "type" : "integer",
                "example" : 3
              },
              "USER_ET" : {
                "type" : "integer",
                "example" : 14
              },
              "FACTORY_ET" : {
                "type" : "integer",
                "example" : 20
              }
            }
          },
          "firstEventSentAt" : {
            "type" : "integer",
            "example" : 1547104822053
          },
          "lastEvent" : {
            "type" : "object",
            "properties" : {
              "OP_LVL" : {
                "type" : "integer",
                "example" : 0
              },
              "PWR_CONS" : {
                "type" : "integer",
                "example" : 0
              },
              "P_STAT" : {
                "type" : "integer",
                "example" : 0
              },
              "F_STAT" : {
                "type" : "integer",
                "example" : 0
              },
              "M_MALFUNC" : {
                "type" : "integer",
                "example" : 0
              },
              "LED_MALFUNC" : {
                "type" : "integer",
                "example" : 0
              },
              "ENERGY_CONS" : {
                "type" : "integer",
                "example" : 0
              },
              "HEPA_F_STAT" : {
                "type" : "string",
                "example" : "LOW"
              },
              "ET" : {
                "type" : "integer",
                "example" : 0
              },
              "USER_ET" : {
                "type" : "integer",
                "example" : 0
              },
              "FACTORY_ET" : {
                "type" : "integer",
                "example" : 0
              }
            }
          },
          "lastEventSentAt" : {
            "type" : "integer",
            "example" : 1547104843022
          },
          "eventCount" : {
            "type" : "integer",
            "example" : 5
          }
        }
      },
      "AlarmLogEvents" : {
        "type" : "object",
        "properties" : {
          "alarmLogId" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "049eaa04-688f-4fd5-a7b5-e105fd1e119a"
          },
          "eventId" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "248c17af-43bb-436c-88c0-3c1c9ef4127b"
          },
          "payload" : {
            "type" : "object",
            "properties" : {
              "OP_LVL" : {
                "type" : "integer",
                "example" : 0
              },
              "PWR_CONS" : {
                "type" : "integer",
                "example" : 0
              },
              "P_STAT" : {
                "type" : "integer",
                "example" : 0
              },
              "F_STAT" : {
                "type" : "integer",
                "example" : 0
              },
              "M_MALFUNC" : {
                "type" : "integer",
                "example" : 0
              },
              "LED_MALFUNC" : {
                "type" : "integer",
                "example" : 0
              },
              "ENERGY_CONS" : {
                "type" : "integer",
                "example" : 0
              },
              "HEPA_F_STAT" : {
                "type" : "string",
                "example" : "LOW"
              },
              "ET" : {
                "type" : "integer",
                "example" : 0
              },
              "USER_ET" : {
                "type" : "integer",
                "example" : 0
              },
              "FACTORY_ET" : {
                "type" : "integer",
                "example" : 0
              }
            }
          },
          "ts" : {
            "type" : "integer",
            "example" : 1544171481080
          }
        }
      },
      "ReportTemplate" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid",
            "example" : "311ff889-5f56-42c0-87c7-bc29dfb5f30f"
          },
          "name" : {
            "type" : "string",
            "example" : "My Report Template"
          }
        }
      },
      "GeneratedReportResult" : {
        "type" : "object",
        "properties" : {
          "result" : {
            "type" : "object",
            "properties" : {
              "took" : {
                "type" : "number",
                "example" : 6
              },
              "timed_out" : {
                "type" : "boolean",
                "example" : false
              },
              "_shards" : {
                "type" : "object",
                "properties" : {
                  "total" : {
                    "type" : "number",
                    "example" : 5
                  },
                  "successful" : {
                    "type" : "number",
                    "example" : 5
                  },
                  "skipped" : {
                    "type" : "number",
                    "example" : 0
                  },
                  "failed" : {
                    "type" : "number",
                    "example" : 0
                  }
                }
              },
              "hits" : {
                "type" : "object",
                "properties" : {
                  "total" : {
                    "type" : "number",
                    "example" : 11
                  },
                  "max_score" : {
                    "type" : "number",
                    "example" : 0
                  },
                  "hits" : {
                    "type" : "array",
                    "items" : {
                      "type" : "object"
                    },
                    "example" : [ ]
                  }
                }
              },
              "aggregations" : {
                "type" : "object",
                "properties" : {
                  "date_histogram#visioSenseReport" : {
                    "type" : "object",
                    "properties" : {
                      "buckets" : {
                        "type" : "array",
                        "items" : {
                          "type" : "object",
                          "properties" : {
                            "key_as_string" : {
                              "type" : "string",
                              "example" : "2018-12-04 08:00:00"
                            },
                            "key" : {
                              "type" : "number",
                              "example" : 1543910400000
                            },
                            "doc_count" : {
                              "type" : "number",
                              "example" : 1
                            },
                            "lterms#agesByGender" : {
                              "type" : "object",
                              "properties" : {
                                "doc_count_error_upper_bound" : {
                                  "type" : "number",
                                  "example" : 0
                                },
                                "sum_other_doc_count" : {
                                  "type" : "number",
                                  "example" : 0
                                },
                                "buckets" : {
                                  "type" : "array",
                                  "items" : {
                                    "type" : "object",
                                    "properties" : {
                                      "key" : {
                                        "type" : "number",
                                        "example" : 1
                                      },
                                      "doc_count" : {
                                        "type" : "number",
                                        "example" : 1
                                      },
                                      "lterms#gender_stats" : {
                                        "type" : "object",
                                        "properties" : {
                                          "doc_count_error_upper_bound" : {
                                            "type" : "number",
                                            "example" : 0
                                          },
                                          "sum_other_doc_count" : {
                                            "type" : "number",
                                            "example" : 0
                                          },
                                          "buckets" : {
                                            "type" : "array",
                                            "items" : {
                                              "type" : "object",
                                              "properties" : {
                                                "key" : {
                                                  "type" : "number",
                                                  "example" : 1
                                                },
                                                "doc_count" : {
                                                  "type" : "number",
                                                  "example" : 1
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "lterms#genderTotals" : {
                              "type" : "object",
                              "properties" : {
                                "doc_count_error_upper_bound" : {
                                  "type" : "number",
                                  "example" : 0
                                },
                                "sum_other_doc_count" : {
                                  "type" : "number",
                                  "example" : 0
                                },
                                "buckets" : {
                                  "type" : "array",
                                  "items" : {
                                    "type" : "object",
                                    "properties" : {
                                      "key" : {
                                        "type" : "number",
                                        "example" : 1
                                      },
                                      "doc_count" : {
                                        "type" : "number",
                                        "example" : 1
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "avg#angerAvg" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 1
                                }
                              }
                            },
                            "avg#happinessAvg" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 0
                                }
                              }
                            },
                            "avg#negPosAvg" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 1
                                }
                              }
                            },
                            "avg#neutralAvg" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 0
                                }
                              }
                            },
                            "avg#sadnessAvg" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 1
                                }
                              }
                            },
                            "avg#surpriseAvg" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 0
                                }
                              }
                            },
                            "avg#dominantAngerPercentage" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 0
                                }
                              }
                            },
                            "avg#dominantHappinessPercentage" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 0
                                }
                              }
                            },
                            "avg#dominantNegPosPercentage" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 1
                                }
                              }
                            },
                            "avg#dominantNeutralPercentage" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 0
                                }
                              }
                            },
                            "avg#dominantSadnessPercentage" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 1
                                }
                              }
                            },
                            "avg#dominantSurprisePercentage" : {
                              "type" : "object",
                              "properties" : {
                                "value" : {
                                  "type" : "number",
                                  "example" : 0
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}