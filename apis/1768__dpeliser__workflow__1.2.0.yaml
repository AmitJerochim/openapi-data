openapi: 3.0.0

servers:
  - description: Master CRM
    url: http://dev.crm.wssim.com.br/api/v2/workflow

info:
  description: "Serviço de workflow."
  version: "1.2.0"
  title: "Workflow"
  
tags:
- name: workflows
  description: APIs de workflows
  
- name: events
  description: APIs de eventos
  
- name: meta-objects
  description: APIs de meta objetos
  
- name: permission-resources
  description: APIs de recursos

- name: operators
  description: APIs de operadores

paths:
  /workflows:
    get:
      tags:
        - workflows
      summary: obtém uma lista de workflows
      responses:
        200:
          description: Ação realizada com sucesso.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/PagedList_Workflow"
                  - $ref: "#/components/schemas/PagedList_Workflow_2"
              example:
                items:
                  - id: 06f081eb-329d-430f-ba37-694406843baf
                    name: One
                    active: true
                    note: test
                    workflowEvent:
                      id: 496bec72-850b-4106-bd6a-b603d296d8ed
                      event:
                        id: 4d2fcb07-116f-4ed0-8503-79c6b9e39b91
                        type: TriggerEvent
                        name: Atividade criada
                        label: Atividade criada
                        active: true
                        metaObject:
                          id: 2da019be-f15e-413e-8ae3-65438bb93bfd
                          name: Activity
                          label: Atividade
                          active: true
                          contextUrl: /api/v2/opportunity/activities
                          contextAttribute: description
                      workflowEventConditions:
                      - id: 11bf8eb1-7409-4f92-a711-da055b2379c8
                        order: 1
                        comparisonOperator: EQUALS
                        logicalOperator: AND
                        value: 859bfbce-7b44-11e9-8f9e-2a86e4085a59
                        metaAttribute:
                          id: e41c099e-b010-427b-a3c2-0d8dcea8a9f2
                          type: LookupAttribute
                          name: leadSituation
                          label: Situação
                          required: false
                          order: 1
                          lookupMultiSelection: false
                          lookupMetaObject:
                            id: 66871938-bc7c-4284-8c6e-9300c90c2caa
                            name: LeadSituation
                            label: Situação do lead
                            active: true
                            contextUrl: /api/v8/customer/lead-situations
                            contextAttribute: description
                      nextWorkflowEvent:
                        id: cedb12d5-6477-4c5d-893a-8ab9cb039999
                        event:
                          id: 7341a7e2-22a4-468a-8766-5913675a84c0
                          type: ActionEvent
                          actionType: MessageAction
                          name: Atualizar Lead
                          label: Atualizar lead
                          active: true
                          metaObject:
                            id: 74b13c35-78ad-495b-9c7f-7484e8a67242
                            name: Lead
                            label: Lead
                            active: true
                            contextUrl: /api/v8/customer/leads
                            contextAttribute: name
                        workflowEventMetaAttributes:
                        - id: 3cc47696-3ba2-4efa-bd13-ac61789fb7d4
                          valueType: LiteralValue
                          value: e41c099e-b010-427b-a3c2-0d8dcea8a9f2
                          metaAttribute:
                            id: e41c099e-b010-427b-a3c2-0d8dcea8a9f2
                            type: LookupAttribute
                            name: leadSituation
                            label: Situação
                            required: false
                            order: 1
                            lookupMultiSelection: false
                            lookupMetaObject:
                              id: 66871938-bc7c-4284-8c6e-9300c90c2caa
                              name: LeadSituation
                              label: Situação do lead
                              active: true
                              contextUrl: /api/v8/customer/lead-situations
                              contextAttribute: description
                        - id: 8f15af9b-5458-40f1-9041-825d173a4b35 
                          valueType: MetaAttributeValue
                          metaAttributeValue:
                            id: 575aa963-9f6e-4544-a2bd-af1f74bc88ea
                            type: LookupAttribute
                            name: user
                            label: Usuário
                            required: false
                            order: 1
                            lookupMultiSelection: false
                            lookupMetaObject:
                              id: 9afaa32d-be4c-47bb-820d-2aa7fa1efed7
                              name: User
                              label: Usuário
                              active: true
                              contextUrl: /api/v8/user/users
                              contextAttribute: name
                          metaAttribute:
                            id: 575aa963-9f6e-4544-a2bd-af1f74bc88ea
                            type: LookupAttribute
                            name: responsible
                            label: Usuário
                            required: false
                            order: 1
                            lookupMultiSelection: false
                            lookupMetaObject:
                              id: 9afaa32d-be4c-47bb-820d-2aa7fa1efed7
                              name: User
                              label: Usuário
                              active: true
                              contextUrl: /api/v8/user/users
                              contextAttribute: name
                        - id: 172a7e80-8bfc-4987-a301-f2c601fac810
                          valueType: MetaAttributeValue
                          metaAttributeValues:
                          - id: 575aa963-9f6e-4544-a2bd-af1f74bc88ea
                            type: LookupAttribute
                            name: user
                            label: Usuário
                            required: false
                            order: 1
                            lookupMultiSelection: false
                            lookupMetaObject:
                              id: 9afaa32d-be4c-47bb-820d-2aa7fa1efed7
                              name: User
                              label: Usuário
                              active: true
                              contextUrl: /api/v8/user/users
                              contextAttribute: name
                          metaAttribute:
                            id: 575aa963-9f6e-4544-a2bd-af1f74bc88ea
                            type: LookupAttribute
                            name: relatedUsers
                            label: Usuário
                            required: false
                            order: 1
                            lookupMultiSelection: true
                            lookupMetaObject:
                              id: 9afaa32d-be4c-47bb-820d-2aa7fa1efed7
                              name: User
                              label: Usuário
                              active: true
                              contextUrl: /api/v8/user/users
                              contextAttribute: name
                    count: 1
                    firstRow: 0
                    page: 0
                    pageSize: 500
        500:
          description: Erro interno do servidor.
    post:
      tags:
        - workflows
      summary: cria um workflow
      description:
        Regras
        
        - O _name_ deve ser único (diferente dos outros workflows).
        
        - O _workflowEvent.event_ deve ser um evento ativo e do tipo _TriggerEvent_.
        
        - O _workflowEvent.nextWorkflowEvent.event_ deve ser um evento ativo, do tipo _ActionEvent_ e ser um evento disponível para o _workflowEvent.event_.
        
        - Não deve haver outro workflow com os mesmos eventos de _workflowEvent.event_ e _workflowEvent.nextWorkflowEvent.event_.
        
        - O _workflowEvent.nextWorkflowEvent.workflowEventMetaAttributes_ deve conter todos os meta atributos obrigatórios e pode conter os meta atributos não obrigatórios.
        
        - Cada meta atributo em _workflowEvent.nextWorkflowEvent.workflowEventMetaAttributes_ deve pertencer ao meta objeto do _workflowEvent.nextWorkflowEvent.event_.

        - Cada meta atributo do tipo _LookupAttribute_ em _workflowEvent.nextWorkflowEvent.workflowEventMetaAttributes_ deve utilizar o campo _values_ se  _lookupMultiSelection_ for _true_, e o campo _value_ caso contrário.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/Workflow_Insert"
                - $ref: "#/components/schemas/Workflow_Insert_2"
            example:
              name: Alterar status de Lead para Suspect
              active: true
              workflowEvent:
                event:
                  id: 4d2fcb07-116f-4ed0-8503-79c6b9e39b91
                workflowEventConditions:
                - order:  1
                  comparisonOperator: EQUALS
                  logicalOperator: AND
                  value: e41c099e-b010-427b-a3c2-0d8dcea8a9f2
                  metaAttribute:
                    id: e41c099e-b010-427b-a3c2-0d8dcea8a9f2
                - order:  2
                  comparisonOperator: EQUALS
                  logicalOperator: AND
                  value: true
                  metaAttribute:
                    id: a1473f76-a508-4d33-a569-4599dcb13a94
                nextWorkflowEvent:
                  event:
                    id: 7341a7e2-22a4-468a-8766-5913675a84c0
                  workflowEventMetaAttributes:
                  - valueType: LiteralValue
                    value: e41c099e-b010-427b-a3c2-0d8dcea8a9f2
                    metaAttribute:
                      id: e41c099e-b010-427b-a3c2-0d8dcea8a9f2
      responses:
        201:
          description: Ação realizada com sucesso.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Id"
        400:
          description: Corpo da requisição em formato inválido.
        422:
          description: Corpo da requisição com valor(es) inválido(s).
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workflow_Insert_422"
        500:
          description: Erro interno do servidor.

  /workflows/{id}:
    get:
      tags:
        - workflows
      summary: obtém um workflow
      parameters:
        - in: path
          name: id
          description: Id do workflow.
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Ação realizada com sucesso.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/Workflow"
                  - $ref: "#/components/schemas/Workflow_2"
                example:
                  id: 06f081eb-329d-430f-ba37-694406843baf
                  name: One
                  active: true
                  note: test
                  workflowEvent:
                    id: 496bec72-850b-4106-bd6a-b603d296d8ed
                    event:
                      id: 4d2fcb07-116f-4ed0-8503-79c6b9e39b91
                      type: TriggerEvent
                      name: Atividade criada
                      label: Atividade criada
                      active: true
                      metaObject:
                        id: 2da019be-f15e-413e-8ae3-65438bb93bfd
                        name: Activity
                        label: Atividade
                        active: true
                        contextUrl: /api/v2/opportunity/activities
                        contextAttribute: description
                    workflowEventConditions:
                    - id: 11bf8eb1-7409-4f92-a711-da055b2379c8
                      order: 1
                      comparisonOperator: EQUALS
                      value: 859bfbce-7b44-11e9-8f9e-2a86e4085a59
                      metaAttribute:
                        id: e41c099e-b010-427b-a3c2-0d8dcea8a9f2
                        type: LookupAttribute
                        name: leadSituation
                        label: Situação
                        required: false
                        order: 1
                        lookupMultiSelection: false
                        lookupMetaObject:
                          id: 66871938-bc7c-4284-8c6e-9300c90c2caa
                          label: meta.object.customer.lead.situation
                          active: true
                          contextUrl: /api/v8/customer/lead-situations
                          contextAttribute: description
                    nextWorkflowEvent:
                      id: cedb12d5-6477-4c5d-893a-8ab9cb039999
                      event:
                        id: 7341a7e2-22a4-468a-8766-5913675a84c0
                        type: ActionEvent
                        actionType: MessageAction
                        name: Atualizar Lead
                        label: Atualizar lead
                        active: true
                        metaObject:
                          id: 74b13c35-78ad-495b-9c7f-7484e8a67242
                          name: Lead
                          label: Lead
                          active: true
                          contextUrl: /api/v8/customer/leads
                          contextAttribute: name
                        workflowEventMetaAttributes:
                        - id: 3cc47696-3ba2-4efa-bd13-ac61789fb7d4
                          valueType: LiteralValue
                          value: e41c099e-b010-427b-a3c2-0d8dcea8a9f2
                          metaAttribute:
                            id: e41c099e-b010-427b-a3c2-0d8dcea8a9f2
                            type: LookupAttribute
                            name: leadSituation
                            label: Situação
                            required: false
                            order: 1
                            lookupMultiSelection: false
                            lookupMetaObject:
                              id: 66871938-bc7c-4284-8c6e-9300c90c2caa
                              name: LeadSituation
                              label: Situação do lead
                              active: true
                              contextUrl: /api/v8/customer/lead-situations
                              contextAttribute: description
        404:
          description: Registro não encontrado.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workflow_NotFound"
        500:
          description: Erro interno do servidor.
    put:
      tags:
        - workflows
      summary: atualiza um workflow
      description:
        Regras
        
        - O _name_ deve ser único (diferente dos outros workflows).
        
        - O _workflowEvent.event_ deve ser um evento ativo e do tipo _TriggerEvent_.
        
        - O _workflowEvent.nextWorkflowEvent.event_ deve ser um evento ativo, do tipo _ActionEvent_ e ser um evento disponível para o _workflowEvent.event_.
        
        - Não deve haver outro workflow com os mesmos eventos de _workflowEvent.event_ e _workflowEvent.nextWorkflowEvent.event_.
        
        - O _workflowEvent.nextWorkflowEvent.workflowEventMetaAttributes_ deve conter todos os meta atributos obrigatórios e pode conter os meta atributos não obrigatórios.
        
        - Cada meta atributo em _workflowEvent.nextWorkflowEvent.workflowEventMetaAttributes_ deve pertencer ao meta objeto do _workflowEvent.nextWorkflowEvent.event_.

        - Cada meta atributo do tipo _LookupAttribute_ em _workflowEvent.nextWorkflowEvent.workflowEventMetaAttributes_ deve utilizar o campo _values_ se  _lookupMultiSelection_ for _true_, e o campo _value_ caso contrário.
      parameters:
        - in: path
          name: id
          description: Id do workflow.
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/Workflow_Update"
              required:
                - description
                - active
      responses:
        204:
          description: Ação realizada com sucesso.
        400:
          description: Corpo da requisição em formato inválido ou requisição inválida.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workflow_Reactivate"
        404:
          description: Registro não encontrado.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workflow_NotFound"
        500:
          description: Erro interno do servidor.

    delete:
      tags:
        - workflows
      summary: deleta um workflow
      parameters:
        - in: path
          name: id
          description: Id do workflow.
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Ação realizada com sucesso.
        404:
          description: Registro não encontrado.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Workflow_NotFound"
        500:
          description: Erro interno do servidor.

  /events:
    get:
      tags:
        - events
      summary: obtém uma lista de eventos
      responses:
        200:
          description: Ação realizada com sucesso.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PagedList_Event"
              example:
                items:
                  - id: d53ebfa8-7b22-11e9-8f9e-2a86e4085a59
                    type: TriggerEvent
                    name: Atividade criada
                    label: Atividade criada
                    active: true
                    metaObject:
                      id: 8e6bb338-cd5a-458a-b450-3d5fdc29eb70
                      name: Activity
                      label: Atividade
                      active: true
                      contextUrl: /api/v1/opportunity/activities
                      contextAttribute: description
                    nextEventsAvailable:
                      - id: beb14a05-d6e0-44ab-bf8d-fefbab594f3e
                        nextEvent:
                          id: c923d03e-8e75-4150-b2a1-9dc393a10a15
                          type: ActionEvent
                          actionType: MessageAction
                          name: Atualizar lead
                          label: Atualizar lead
                          active: true
                          metaObject:
                            id: a7682520-7b2b-11e9-8f9e-2a86e4085a59
                            label: meta.object.customer.lead
                            active: true
                            contextUrl: /api/v1/customer/leads
                            contextAttribute: name
                  - id: 497e4504-b3be-11e9-a2a3-2a2ae2dbcce4
                    type: ActionEvent
                    actionType: MessageAction
                    name: Ganhar oportunidade
                    label: Win opportunity
                    active: true
                    metaObject:
                      id: fa1b6c7e-b3b5-11e9-a2a3-2a2ae2dbcce4
                      name: Opportunity
                      label: Oportunidade
                      contextUrl: /api/v3/opportunity/opportunities
                      contextAttribute: description
                      active: true
                    eventMetaAttributes:
                      - id: 203d7586-b885-11e9-a2a3-2a2ae2dbcce4
                        valueType: LiteralValue
                        required: true
                        metaAttribute:
                          id: f107ec73-8396-4ae3-b3b6-a5fd13aba23b
                          type: LookupAttribute
                          name: opportunityWonLossCauses
                          label: Razão
                          order: 1
                          lookupMultiSelection: true
                          lookupMetaObject:
                            id: 50cc7185-ac70-4b33-be5c-9bf7bb189cd5
                            name: Reason
                            label: Razão
                            contextUrl: /api/v3/opportunity/won-loss-causes
                            contextAttribute: description
                            active: true
                count: 2
                firstRow: 0
                page: 0
                pageSize: 500

        500:
          description: Erro interno do servidor.

  /meta-objects:
    get:
      tags:
        - meta-objects
      summary: obtém uma lista de meta objetos
      responses:
        200:
          description: Ação realizada com sucesso.
          content:
            application/json:
              schema:
                  $ref: "#/components/schemas/PagedList_MetaObject"
        500:
          description: Erro interno do servidor.

  /meta-objects/{id}/meta-attributes/{metaAttributeId}/available-meta-attributes:
    get:
      tags:
        - meta-objects
      summary: obtém uma lista de meta-atributos disponíveis como valor para outro meta-atributo
      parameters:
        - in: path
          name: id
          description: Id do meta-objeto.
          required: true
          schema:
            type: string
            format: uuid
        - in: path
          name: metaAttributeId
          description: Id do meta-atributo.
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Ação realizada com sucesso.
          content:
            application/json:
              schema:
                  $ref: "#/components/schemas/PagedList_MetaAttribute"
        500:
          description: Erro interno do servidor.

  /operators/comparison:
    get:
      tags:
        - operators
      summary: obtém uma lista de operadores de comparação
      responses:
        200:
          description: Ação realizada com sucesso.
          content:
            application/json:
              schema:
                  $ref: "#/components/schemas/PagedList_ComparisonOperator"
        500:
          description: Erro interno do servidor.

  /operators/logical:
    get:
      tags:
        - operators
      summary: obtém uma lista de operadores lógicos
      responses:
        200:
          description: Ação realizada com sucesso.
          content:
            application/json:
              schema:
                  $ref: "#/components/schemas/PagedList_LogicalOperator"
        500:
          description: Erro interno do servidor.

  /permission-resources:
    get:
      tags:
        - permission-resources
      summary: obtém o serviço workflow e seus recursos
      responses:
        200:
          description: Ação realizada com sucesso.
          content:
            application/json:
              schema:
                  $ref: "#/components/schemas/WorkflowService"
        500:
          description: Erro interno do servidor.

components:
  schemas:

    PagedList_Workflow:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/Workflow"
        count:
          type: integer
          minimum: 0
          example: 1
        firstRow:
          type: integer
          minimum: 0
          example: 0
        page:
          type: integer
          minimum: 0
          example: 0
        pageSize:
          type: integer
          minimum: 0
          example: 500

    PagedList_Workflow_2:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/Workflow_2"
        count:
          type: integer
          minimum: 0
          example: 1
        firstRow:
          type: integer
          minimum: 0
          example: 0
        page:
          type: integer
          minimum: 0
          example: 0
        pageSize:
          type: integer
          minimum: 0
          example: 500

    PagedList_MetaAttribute:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/MetaAttribute"
        count:
          type: integer
          minimum: 0
          example: 1
        firstRow:
          type: integer
          minimum: 0
          example: 0
        page:
          type: integer
          minimum: 0
          example: 0
        pageSize:
          type: integer
          minimum: 0
          example: 500

    PagedList_MetaObject:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/MetaObject_Activity"
        count:
          type: integer
          minimum: 0
          example: 1
        firstRow:
          type: integer
          minimum: 0
          example: 0
        page:
          type: integer
          minimum: 0
          example: 0
        pageSize:
          type: integer
          minimum: 0
          example: 500

    PagedList_Event:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/TriggerEvent"
        count:
          type: integer
          minimum: 0
          example: 1
        firstRow:
          type: integer
          minimum: 0
          example: 0
        page:
          type: integer
          minimum: 0
          example: 0
        pageSize:
          type: integer
          minimum: 0
          example: 500

    PagedList_ComparisonOperator:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/ComparisonOperator"
        count:
          type: integer
          minimum: 0
          example: 1
        page:
          type: integer
          minimum: 0
          example: 0
        pageSize:
          type: integer
          minimum: 0
          example: 500

    PagedList_LogicalOperator:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/LogicalOperator"
        count:
          type: integer
          minimum: 0
          example: 1
        page:
          type: integer
          minimum: 0
          example: 0
        pageSize:
          type: integer
          minimum: 0
          example: 500

    WorkflowService:
      type: object
      properties:
        description:
          type: string
          example: "Workflow"
        path:
          type: string
          example: "workflow"
        active:
          type: boolean
          example: true
        resources:
          type: array
          items:
            $ref: "#/components/schemas/WorkflowResource"

    WorkflowResource:
      type: object
      properties:
        description:
          type: string
          example: "Workflows"
        path:
          type: string
          example: "workflows"
        active:
          type: boolean
          example: true

    Workflow:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "2de320f2-7b39-11e9-8f9e-2a86e4085a59"
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: "Alterar status de Lead para Suspect"
        active:
          type: boolean
          example: true
        note:
          type: string
          minLength: 0
          maxLength: 4000
          example: "Alteração de status de Lead para Suspect quando uma atividade é criada para o cliente."
        workflowEvent:
          $ref: "#/components/schemas/WorkflowTriggerEventEvent"

    Workflow_2:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "2de320f2-7b39-11e9-8f9e-2a86e4085a59"
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: "Vincular clientes à atividade"
        active:
          type: boolean
          example: true
        note:
          type: string
          minLength: 0
          maxLength: 4000
        workflowEvent:
          $ref: "#/components/schemas/WorkflowTriggerEventEvent_2"

    Workflow_Insert:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: "Alterar status de Lead para Suspect"
        active:
          type: boolean
          example: false
        note:
          type: string
          minLength: 0
          maxLength: 4000
          example: "Alteração de status de Lead para Suspect quando uma atividade é criada para o cliente."
        workflowEvent:
          $ref: "#/components/schemas/WorkflowTriggerEventEvent_Insert"
      required:
      - name
      - active
      - workflowEvent

    Workflow_Insert_2:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: "Vincular clientes à uma atividade criada"
        active:
          type: boolean
          example: false
        workflowEvent:
          $ref: "#/components/schemas/WorkflowTriggerEventEvent_Insert_2"
      required:
      - name
      - active
      - workflowEvent

    Workflow_Insert_422:
      type: object
      properties:
        name:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
                example: "description"
              message:
                type: string
                example: "This field is required"
        active:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
                example: "active"
              message:
                type: string
                example: "This field is required"
        note:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
                example: "note"
              message:
                type: string
                example: "Size must be between 0 and 4,000"
        workflowEvent:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
                example: "event"
              message:
                type: string
                example: "This field is required"
      required:
      - name
      - active
      - workflowEvent

    Workflow_Update:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "2de320f2-7b39-11e9-8f9e-2a86e4085a59"
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: "Alterar status de Lead para Suspect"
        active:
          type: boolean
          example: false
        note:
          type: string
          minLength: 0
          maxLength: 4000
          example: "Alteração de status de Lead para Suspect quando uma atividade é criada para o cliente."
        workflowEvent:
          $ref: "#/components/schemas/WorkflowTriggerEventEvent_Update"
      required:
      - name
      - active
      - workflowEvent

    Workflow_NotFound:
      type: object
      properties:
        code:
          type: string
          example: "404"
        message:
          type: string
          example: "Not Found"
        serverDateTime:
          type: string
          example: "2019-05-20T19:44:11.841Z"
        requestUri:
          type: string
          example: "/api/workflow/workflows/2de320f2-7b39-11e9-8f9e-2a86e4085a59"
        requestParameters:
          type: string
          example: ""

    Workflow_Reactivate:
      type: object
      properties:
        text:
          type: string
          example: "Wait at least 60 seconds to reactivate workflow"

    WorkflowTriggerEventEvent:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "39fa53ac-2c53-4bad-a0e8-83dc0eaf7a2e"
        event:
          $ref: "#/components/schemas/TriggerEvent"
        workflowEventConditions:
          type: array
          items:
            $ref: "#/components/schemas/WorkflowEventCondition"
        nextWorkflowEvent:
          $ref: "#/components/schemas/WorkflowActionEventEvent"

    WorkflowTriggerEventEvent_2:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "39fa53ac-2c53-4bad-a0e8-83dc0eaf7a2e"
        event:
          $ref: "#/components/schemas/TriggerEvent"
        nextWorkflowEvent:
          $ref: "#/components/schemas/WorkflowActionEventEvent_2"

    WorkflowActionEventEvent:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "a7adf76e-7b24-11e9-8f9e-2a86e4085a59"
        event:
          $ref: "#/components/schemas/ActionEvent"
        workflowEventMetaAttributes:
          type: array
          items:
            $ref: "#/components/schemas/WorkflowEventMetaAttribute"

    WorkflowActionEventEvent_2:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "a7adf76e-7b24-11e9-8f9e-2a86e4085a59"
        event:
          $ref: "#/components/schemas/ActionEvent"
        workflowEventMetaAttributes:
          type: array
          items:
            $ref: "#/components/schemas/WorkflowEventMetaAttribute_2"

    WorkflowTriggerEventEvent_Insert:
      type: object
      properties:
        event:
          $ref: "#/components/schemas/TriggerEvent_Insert"
        workflowEventConditions:
          type: array
          items:
            $ref: "#/components/schemas/WorkflowEventConditionInsert"
        nextWorkflowEvent:
          $ref: "#/components/schemas/WorkflowActionEventEvent_Insert"
      required:
      - event
      - nextWorkflowEvent

    WorkflowTriggerEventEvent_Insert_2:
      type: object
      properties:
        event:
          $ref: "#/components/schemas/TriggerEvent_Insert"
        nextWorkflowEvent:
          $ref: "#/components/schemas/WorkflowActionEventEvent_Insert_2"
      required:
      - event
      - nextWorkflowEvent

    WorkflowEventCondition:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "11bf8eb1-7409-4f92-a711-da055b2379c8"
        order:
          type: number
          example: 1
        comparisonOperator:
          type: string
          enum:
            - EQUALS
            - NOT_EQUALS
            - IS_NULL
            - IS_NOT_NULL
          example: "EQUALS"
        logicalOperator:
          type: string
          enum:
            - AND
            - OR
          example: "AND"
        value:
          type: string
          minLength: 0
          maxLength: 255
          example: "859bfbce-7b44-11e9-8f9e-2a86e4085a59"
        metaAttribute:
          $ref: "#/components/schemas/MetaAttribute"

    WorkflowEventConditionInsert:
      type: object
      properties:
        order:
          type: number
          example: 1
        comparisonOperator:
          type: string
          enum:
            - EQUALS
            - NOT_EQUALS
            - IS_NULL
            - IS_NOT_NULL
          example: "EQUALS"
        logicalOperator:
          type: string
          enum:
            - AND
            - OR
          example: "AND"
        value:
          type: string
          minLength: 0
          maxLength: 255
          example: "859bfbce-7b44-11e9-8f9e-2a86e4085a59"
        metaAttribute:
          $ref: "#/components/schemas/MetaAttribute"
      required:
      - order
      - comparisonOperator
      - logicalOperator
      - metaAttribute

    WorkflowActionEventEvent_Insert:
      type: object
      properties:
        event:
          $ref: "#/components/schemas/ActionEvent_Insert"
        workflowEventMetaAttributes:
          type: array
          items:
            $ref: "#/components/schemas/WorkflowEventMetaAttribute_Insert"
          example:
          - valueType: LiteralValue
            value: 859bfbce-7b44-11e9-8f9e-2a86e4085a59
            metaAttribute:
              id: 4aacde8c-38c6-4e3c-aee1-cea12fbf8091
      required:
      - event

    WorkflowActionEventEvent_Insert_2:
      type: object
      properties:
        event:
          $ref: "#/components/schemas/ActionEvent_Insert"
        workflowEventMetaAttributes:
          type: array
          items:
            $ref: "#/components/schemas/WorkflowEventMetaAttribute_Insert_2"
          example:
          - valueType: LiteralValue
            values: 
            - 51c17630-8319-11e9-9877-526af7764f64
            - 51c17964-8319-11e9-9877-526af7764f64
            metaAttribute:
              id: 4aacde8c-38c6-4e3c-aee1-cea12fbf8091
      required:
      - event
      - workflowEventMetaAttributes

    WorkflowTriggerEventEvent_Update:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "f4065375-4968-4ba7-9eda-5b2b2ef150f2"
        event:
          $ref: "#/components/schemas/TriggerEvent_Update"
        nextWorkflowEvent:
          $ref: "#/components/schemas/WorkflowActionEventEvent_Update"
      required:
      - event
      - nextWorkflowEvent

    WorkflowActionEventEvent_Update:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "3f458584-7b47-11e9-8f9e-2a86e4085a59"
        event:
          $ref: "#/components/schemas/ActionEvent_Update"
        workflowEventMetaAttributes:
          type: array
          items:
            $ref: "#/components/schemas/WorkflowEventMetaAttribute_Update"
          example:
          - id: 5322ef06-7b47-11e9-8f9e-2a86e4085a59
            valueType: LiteralValue
            value: 859bfbce-7b44-11e9-8f9e-2a86e4085a59
            metaAttribute:
              id: 4aacde8c-38c6-4e3c-aee1-cea12fbf8091
      required:
      - event

    WorkflowEventMetaAttribute:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "91257727-d45b-4c64-a74c-343ec041d110"
        valueType:
          type: string
          enum:
            - MetaAttributeValue
            - LiteralValue
          example: LiteralValue
        value:
          type: string
          minLength: 0
          maxLength: 255
          example: "859bfbce-7b44-11e9-8f9e-2a86e4085a59"
        metaAttribute:
          $ref: "#/components/schemas/MetaAttribute"

    WorkflowEventMetaAttribute_2:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "91257727-d45b-4c64-a74c-343ec041d110"
        valueType:
          type: string
          enum:
            - MetaAttributeValue
            - LiteralValue
          example: LiteralValue
        values:
          type: array
          items:
            type: string
            format: uuid
            example:
            - "51c17630-8319-11e9-9877-526af7764f64"
            - "51c17964-8319-11e9-9877-526af7764f64"
        metaAttribute:
          $ref: "#/components/schemas/MetaAttribute_2"

    WorkflowEventMetaAttribute_Insert:
      type: object
      properties:
        valueType:
          type: string
          enum:
            - MetaAttributeValue
            - LiteralValue
          example: LiteralValue
        value:
          type: string
          minLength: 0
          maxLength: 255
          example: "859bfbce-7b44-11e9-8f9e-2a86e4085a59"
        metaAttribute:
          $ref: "#/components/schemas/MetaAttribute_Insert"
      required:
      - type
      - value
      - metaAttribute
      
    WorkflowEventMetaAttribute_Insert_2:
      type: object
      properties:
        valueType:
          type: string
          enum:
            - MetaAttributeValue
            - LiteralValue
          example: LiteralValue
        values:
          type: array
          items:
            type: string
            format: uuid
            example:
            - "51c17630-8319-11e9-9877-526af7764f64"
            - "51c17964-8319-11e9-9877-526af7764f64"
        metaAttribute:
          $ref: "#/components/schemas/MetaAttribute_Insert_2"
      required:
      - type
      - values
      - metaAttribute

    WorkflowEventMetaAttribute_Update:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "bfb46f72-d609-4452-ac87-090cf4f8abb9"
        value:
          type: string
          minLength: 0
          maxLength: 255
          example: "859bfbce-7b44-11e9-8f9e-2a86e4085a59"
        metaAttribute:
          $ref: "#/components/schemas/MetaAttribute_Update"
      required:
      - metaAttribute

    EventMetaAttribute:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "bfb46f72-d609-4452-ac87-090cf4f8abb9"
        valueType:
          type: string
          enum:
            - MetaAttributeValue
            - LiteralValue
            - All
          example: "LiteralValue"
        metaAttribute:
          $ref: "#/components/schemas/MetaAttribute"
      required:
      - metaAttribute

    TriggerEvent:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "d53ebfa8-7b22-11e9-8f9e-2a86e4085a59"
        type:
          type: string
          enum:
            - ActionEvent
            - TriggerEvent
          example: "TriggerEvent"
        name:
          type: string
          example: "Atividade criada"
        label:
          type: string
          example: "Atividade criada"
        active:
          type: boolean
          example: true
        metaObject:
          $ref: "#/components/schemas/MetaObject_Activity"
        nextEventsAvailable:
          type: array
          items:
            $ref: "#/components/schemas/NextEventAvailable"
        eventMetaAttributes:
          type: array
          items:
            $ref: "#/components/schemas/EventMetaAttribute"

    ActionEvent:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "c923d03e-8e75-4150-b2a1-9dc393a10a15"
        type:
          type: string
          enum:
            - ActionEvent
            - TriggerEvent
          example: "ActionEvent"
        actionType:
          type: string
          enum:
            - EmailMessageAction
            - MessageAction
          example: "MessageAction"
        name:
          type: string
          example: "Atualizar lead"
        label:
          type: string
          example: "Atualizar lead"
        active:
          type: boolean
          example: true
        metaObject:
          $ref: "#/components/schemas/MetaObject_Lead"
        eventMetaAttributes:
          type: array
          items:
            $ref: "#/components/schemas/EventMetaAttribute"

    TriggerEvent_Insert:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "d53ebfa8-7b22-11e9-8f9e-2a86e4085a59"
      required:
      - id

    ActionEvent_Insert:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "c923d03e-8e75-4150-b2a1-9dc393a10a15"
      required:
      - id

    TriggerEvent_Update:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "d53ebfa8-7b22-11e9-8f9e-2a86e4085a59"
      required:
      - id

    ActionEvent_Update:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "c923d03e-8e75-4150-b2a1-9dc393a10a15"
      required:
      - id

    NextEventAvailable:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "beb14a05-d6e0-44ab-bf8d-fefbab594f3e"
        nextEvent:
          $ref: "#/components/schemas/ActionEvent"

    MetaAttribute_Insert:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "4aacde8c-38c6-4e3c-aee1-cea12fbf8091"
      required:
      - id

    MetaAttribute_Insert_2:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "fcd700e1-fac1-45df-bce7-87ef0c8abe1a"
      required:
      - id

    MetaAttribute_Update:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "4aacde8c-38c6-4e3c-aee1-cea12fbf8091"
      required:
      - id

    MetaObject_Activity:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "8e6bb338-cd5a-458a-b450-3d5fdc29eb70"
        name:
          type: string
          example: "Activity"
        label:
          type: string
          example: "Atividade"
        active:
          type: boolean
          example: true
        contextUrl:
          type: string
          example: "/api/v1/opportunity/activities"
        contextAttribute:
          type: string
          example: "description"
        icon:
          type: string
          example: "bell-ring-outline"

    MetaObject_Lead:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "a7682520-7b2b-11e9-8f9e-2a86e4085a59"
        name:
          type: string
          example: "Lead"
        label:
          type: string
          example: "Lead"
        active:
          type: boolean
          example: true
        contextUrl:
          type: string
          example: "/api/v1/customer/leads"
        contextAttribute:
          type: string
          example: "name"
        icon:
          type: string
          example: "bell-ring-outline"

    MetaObject_ActivityType:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "94ef21d8-7b34-11e9-8f9e-2a86e4085a59"
        name:
          type: string
          example: "ActivityType"
        label:
          type: string
          example: "Tipo de atividade"
        active:
          type: boolean
          example: true
        contextUrl:
          type: string
          example: "/api/v1/opportunity/activity-types"
        contextAttribute:
          type: string
          example: "description"
        icon:
          type: string
          example: "bell-ring-outline"

    MetaObject_Customer:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "94ef21d8-7b34-11e9-8f9e-2a86e4085a59"
        name:
          type: string
          example: "Customer"
        label:
          type: string
          example: "Cliente"
        active:
          type: boolean
          example: true
        contextUrl:
          type: string
          example: "/api/v1/customers/customers"
        contextAttribute:
          type: string
          example: "name"
        icon:
          type: string
          example: "bell-ring-outline"

    MetaAttribute:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "4aacde8c-38c6-4e3c-aee1-cea12fbf8091"
        type:
          type: string
          enum:
            - LookupAttribute
          example: "LookupAttribute"
        name:
          type: string
          example: "activityType"
        label:
          type: string
          example: "Tipo de atividade"
        required:
          type: boolean
          example: true
        order:
          type: number
          example: 0
        lookupMultiSelection:
          type: boolean
          example: false
        lookupMetaObject:
          $ref: "#/components/schemas/MetaObject_ActivityType"

    MetaAttribute_2:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "4aacde8c-38c6-4e3c-aee1-cea12fbf8091"
        type:
          type: string
          enum:
            - LookupAttribute
          example: "LookupAttribute"
        name:
          type: string
          example: "customer"
        label:
          type: string
          example: "Cliente"
        required:
          type: boolean
          example: true
        order:
          type: number
          example: 0
        lookupMultiSelection:
          type: boolean
          example: true
        lookupMetaObject:
          $ref: "#/components/schemas/MetaObject_Customer"

    ComparisonOperator:
      type: object
      properties:
        id:
          type: string
          enum:
            - EQUALS
            - NOT_EQUALS
            - IS_NULL
            - IS_NOT_NULL
          example: "EQUALS"
        type:
          type: string
          enum:
            - BinaryOperator
            - UnaryOperator
          example: "BinaryOperator"
        label:
          type: string
          example: "igual a"
        supportedMetaAttributeTypes:
          type: array
          items:
            type: string
            enum:
              - BooleanAttribute
              - DateAttribute
              - DateTimeAttribute
              - IdentifierAttribute
              - LookupAttribute
              - NumberAttribute
              - TextAttribute
          example:
            - "BooleanAttribute"
            - "DateAttribute"
            - "DateTimeAttribute"
            - "IdentifierAttribute"
            - "LookupAttribute"
            - "NumberAttribute"
            - "TextAttribute"

    LogicalOperator:
      type: object
      properties:
        id:
          type: string
          enum:
            - AND
            - OR
          example: "AND"
        label:
          type: string
          example: "E"

    Id:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "2de320f2-7b39-11e9-8f9e-2a86e4085a59"