{"openapi":"3.0.0","info":{"version":"1.0.0","title":"MintHealth-Campaign","description":"API for MintHealth Campaigns"},"servers":[{"description":"SwaggerHub API Auto Mocking","url":"https://virtserver.swaggerhub.com/Minthealth/campaign-http/1.0.0"},{"description":"MintHealth Endpoint on localhost","url":"https://localhost:4545"}],"tags":[{"name":"achievement","description":"A goal for users within a campaign"},{"name":"campaign","description":"A campaign that rewards users for practicing healthy habits"},{"name":"campaignItem","description":"Links a rule to an achievement"},{"name":"campaignUser","description":"Links a user to a campaign"},{"name":"rule","description":"A set of requirements a user must satisfy to win achievements within a campaign"},{"name":"user","description":"A human user who participates in campaigns"}],"paths":{"/achievements":{"get":{"tags":["achievement"],"summary":"Get a list of all achievements","operationId":"getAchievements","responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Achievement"}}}}}}},"post":{"tags":["achievement"],"summary":"Post a new achievement to the server","operationId":"addAchievement","responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"}}}}}}},"requestBody":{"content":{"applications/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"isPublic":{"type":"boolean"}},"required":["name","description","isPublic"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"isPublic":{"type":"boolean"},"icon":{"type":"string","format":"binary"}},"required":["name","description","isPublic","icon"]}}}}}},"/achievements/{id}":{"get":{"tags":["achievement"],"summary":"Get a single achievement by its id","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the achievement"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Achievement"}}}}}},"put":{"tags":["achievement"],"summary":"Modify an existing campaign by its id","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the achievement"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Achievement"}}}}},"requestBody":{"content":{"applications/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"isPublic":{"type":"boolean"}}}},"multipart/form-data":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"isPublic":{"type":"boolean"},"icon":{"type":"string","format":"binary"}}}}}}},"delete":{"tags":["achievement"],"summary":"Delete an existing achievement by its id","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the achievement"}],"responses":{"200":{"description":"OK - Successful Operation"}}}},"/rules":{"get":{"tags":["rule"],"summary":"Get a list of all rules","operationId":"getRules","responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Rule"}}}}}}},"post":{"tags":["rule"],"summary":"Post a new rule to the server","operationId":"addRule","responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"}}}}}}},"requestBody":{"content":{"applications/json":{"schema":{"type":"object","properties":{"isPublic":{"type":"boolean"},"ownerId":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"conditions":{"type":"array","items":{"type":"object","properties":{"property":{"type":"string"},"operator":{"type":"string"},"value":{"type":"number"},"frequency":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/frequency"},"customEventCondition":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/customRule"}},"required":["property","operator","value","frequency"]},"minItems":1},"_id":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"}},"required":["isPublic","ownerId","conditions"]}}}}}},"/rules/{id}":{"get":{"tags":["rule"],"summary":"Get a single rule by its id","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the rule"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Rule"}}}}}},"put":{"tags":["rule"],"summary":"Modify an existing campaign by its id","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the rule"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Rule"}}}}},"requestBody":{"content":{"applications/json":{"schema":{"type":"object","properties":{"isPublic":{"type":"boolean"},"ownerId":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"conditions":{"type":"array","items":{"type":"object","properties":{"property":{"type":"string"},"operator":{"type":"string"},"value":{"type":"number"},"frequency":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/frequency"},"customEventCondition":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/customRule"}},"required":["property","operator","value","frequency"]},"minItems":1},"_id":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"}},"required":["isPublic","ownerId","conditions"]}}}}},"delete":{"tags":["rule"],"summary":"Delete an existing rule by its id","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the rule"}],"responses":{"200":{"description":"OK - Successful Operation"}}}},"/campaigns":{"get":{"tags":["campaign"],"summary":"Get a list of all campaigns","operationId":"getCampaigns","responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Campaign"}}}}}}},"post":{"tags":["campaign"],"summary":"Post a new campaign to the server","operationId":"addCampaign","responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"}}}}}}},"requestBody":{"content":{"applications/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"startDate":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"},"endDate":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"}},"required":["name"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"startDate":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"},"endDate":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"},"icon":{"type":"string","format":"binary"}},"required":["name"]}}}}}},"/campaigns/{id}":{"get":{"tags":["campaign"],"summary":"Get a single campaign by its id","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"}],"responses":{"200":{"description":"OK - Successful Operation. The active field is a boolean variable that returns true if the campaign is locked, funded, and past the start date","content":{"application/json":{"schema":{"type":"object","properties":{"ownerId":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"name":{"type":"string","example":"Step Campaign"},"description":{"type":"string","example":"Run away from health problems"},"startDate":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"},"endDate":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"},"icon":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Image"},"blockchain":{"type":"object","properties":{"id":{"type":"string"},"balance":{"type":"integer","default":0}},"default":{"balance":0},"example":{"balance":12358}},"checkedAfterComplete":{"type":"boolean","default":false},"funded":{"type":"boolean","default":false},"locked":{"type":"boolean","default":false},"active":{"type":"boolean","default":false},"_id":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"}}}}}}}},"put":{"tags":["campaign"],"summary":"Modify an existing campaign by its id","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Campaign"}}}}},"requestBody":{"content":{"applications/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"startDate":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"},"endDate":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"}}}},"multipart/form-data":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"startDate":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"},"endDate":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"},"icon":{"type":"string","format":"binary"}}}}}}},"delete":{"tags":["campaign"],"summary":"Delete an existing campaign by its id","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"}],"responses":{"200":{"description":"OK - Successful Operation"}}}},"/campaigns/{id}/funds":{"post":{"tags":["campaign"],"summary":"Fund a campaign with Vidamint","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"amount":{"type":"number"}}}}}},"responses":{"200":{"description":"OK - Successful Operation"}}}},"/campaigns/{id}/lock":{"post":{"tags":["campaign"],"summary":"Lock a campaign. This prevents an admin from adding any more users, items, or modifying campaign data. Required to run campaign","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"}],"responses":{"200":{"description":"OK - Successful Operation"},"304":{"description":"Not Modified - Campaign was already locked"}}},"delete":{"tags":["campaign"],"summary":"Unlock a campaign. This allows you to add users/items and modify campaign data. Will prevent a campaign from running","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"}],"responses":{"200":{"description":"OK - Successful Operation"},"304":{"description":"Not Modified - Campaign was already unlocked"}}}},"/campaign/{id}/stats":{"get":{"tags":["campaign"],"summary":"Get the status of a campaign. Includes information about the population and the blockchain status","parameters":[{"in":"path","name":"id","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"object","properties":{"totalVidaReward":{"type":"integer"},"campaignAccountBalance":{"type":"integer"},"population":{"type":"integer"},"unregisteredPopulation":{"type":"integer"},"achievementTimeSeries":{"type":"array","items":{"type":"object","properties":{"start":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"},"end":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/Date"},"items":{"type":"array","items":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/CampaignAchievement"}}}}}}}}}}}}},"/campaign/{campaignId}/items":{"get":{"tags":["campaignItem"],"summary":"Get a list of all campaignItems","operationId":"getCampaignItems","parameters":[{"in":"path","name":"campaignId","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/CampaignItem"}}}}}}},"post":{"tags":["campaignItem"],"summary":"Post a new campaignItem to the server","operationId":"addCampaignItem","parameters":[{"in":"path","name":"campaignId","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"}}}}}}},"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"description":{"type":"string"},"ruleId":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"achievementIds":{"type":"array","items":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"}},"rewards":{"type":"array","items":{"type":"object","properties":{"InsuranceReward":{"type":"object","properties":{"companyName":{"type":"string"},"percentDiscount":{"type":"number","minimum":0,"maximum":100},"flatDiscount":{"type":"number"}},"required":["companyName"],"oneOf":[{"required":["percentDiscount"]},{"required":["flatDiscount"]}]},"VidaReward":{"type":"object","properties":{"amount":{"type":"integer"}},"required":["amount"]}},"oneOf":[{"required":["InsuranceReward"]},{"required":["VidaReward"]}]}}},"required":["description","ruleId","achievementIds","rewards"]}}}}}},"/campaign/{campaignId}/items/{itemId}":{"get":{"tags":["campaignItem"],"summary":"Get a single campaignItem by its id","parameters":[{"in":"path","name":"campaignId","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"},{"in":"path","name":"itemId","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the item"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/CampaignItem"}}}}}},"put":{"tags":["campaignItem"],"summary":"Modify an existing campaign by its id","parameters":[{"in":"path","name":"campaignId","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"},{"in":"path","name":"itemId","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the item"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/CampaignItem"}}}}},"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"description":{"type":"string"},"ruleId":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"achievementIds":{"type":"array","items":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"}},"rewards":{"type":"array","items":{"type":"object","properties":{"InsuranceReward":{"type":"object","properties":{"companyName":{"type":"string"},"percentDiscount":{"type":"number","minimum":0,"maximum":100},"flatDiscount":{"type":"number"}},"required":["companyName"],"oneOf":[{"required":["percentDiscount"]},{"required":["flatDiscount"]}]},"VidaReward":{"type":"object","properties":{"amount":{"type":"integer"}},"required":["amount"]}},"oneOf":[{"required":["InsuranceReward"]},{"required":["VidaReward"]}]}}}}}}}},"delete":{"tags":["campaignItem"],"summary":"Delete an existing campaignItem by its id","parameters":[{"in":"path","name":"campaignId","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"},{"in":"path","name":"itemId","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the item"}],"responses":{"200":{"description":"OK - Successful Operation"}}}},"/campaign/{campaignId}/users":{"get":{"tags":["campaignUser"],"summary":"Get a list of all users in a campaign","operationId":"getCampaignUser","parameters":[{"in":"path","name":"campaignId","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/CampaignUser"}}}}}}},"post":{"tags":["campaignUser"],"summary":"Either add users to a campaign or remove users from a campaign Alternatively, if a CSV file is passed using multipart form data, the request will add users from the CSV file. and ignore the request body","operationId":"modifyCampaignUsers","parameters":[{"in":"path","name":"campaignId","schema":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"required":true,"description":"Hexadecimal string ID of the campaign"},{"in":"query","name":"op","schema":{"type":"string","enum":["add","remove"]},"required":true,"description":"Specify whether you want to add or remove users"}],"responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"}}}}}}},"requestBody":{"description":"If sending multipart, CSV file needs columns 'email', 'firstName', 'lastName', 'mobileNumber'","content":{"application/json":{"schema":{"type":"object","properties":{"users":{"type":"array","items":{"type":"object","properties":{"userId":{"$ref":"https://api.swaggerhub.com/apis/Minthealth/campaign-schemas/1.0.1#/components/schemas/MongoId"},"blockchainAccoutnName":{"type":"string"}},"required":["userId"]}}}}},"multipart/form-data":{"schema":{"type":"string","format":"csv"}}}}}},"/users":{"get":{"tags":["user"],"summary":"Get all users in Minthealth","responses":{"200":{"description":"OK - Successful Operation","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"blockchainAccounts":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"ref":{"type":"object","properties":{"chain":{"type":"string"},"address":{"type":"string"}}},"balance":{"type":"number"}}}}}}}}}}}}}}}