penapi: 3.0.0
info:
  title: GP TMF Compliant Standard APIs
  description: GP Customer APIs
  version: "1.3-oas3"
paths:
  /balancemanagement/v1/balanceTopup/bulkRecharge:
    x-a127-apply:
      quota: {}
      spikearrest: {}
    post:
      tags:
        - Bulk Recharge
      operationId: do bulk recharge
      summary: Customer Prepaid topup money
      description: Submit request to topup money
      security:
        - oauth2: []
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/rechargeResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '401':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '500':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BalanceTopupRequest'
        description: validation request
        required: true
  /balancemanagement/v1/balanceTopup/paymentMethod:
    x-a127-apply:
      quota: {}
      spikearrest: {}
    get:
      tags:
        - Bulk Recharge
      operationId: get payment method
      summary: Customer payment method
      description: Submit request to topup money
      security:
        - oauth2: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/methodResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '401':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '500':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'

servers:
  - url: 'https://apigw.grameenphone.com/balancemanagement/v1/balanceTopup,'
components:
  securitySchemes:
    oauth2:
      type: oauth2
      flows:
        clientCredentials:
          tokenUrl: 'https://apigw.grameenphone.com/oauth/v1/token'
          scopes:
            write: allows modifying resources
            read: allows reading resources
  schemas:
    BalanceTopupRequest:
      type: object
      required:
        - id
        - href
        - type
        - description
        - channel
        - requestor
        - amount
        - isAutoTopup
        - paymentMethod
        - validFor
        - requestedDate
        - confirmationDate
        - status
        - product
        - relatedParty
        - notificationRequest
      properties:
        id:
          description: id of the product
          type: string
          example: value
        href:
          description: http reference
          type: string
        type:
          type: string
          description: status of the request
        description:
          type: string
          description: type of the request
        channel:
          type: object
          required:
            - id
            - href
            - name
          properties:
            id:
              type: string
            href:
              type: string
            name:
              type: string
        requestor:
          type: object
          required:
            - id
            - href
            - name
            - role
          properties:
            id:
              type: string
            href:
              type: string
            name:
              type: string
            role:
              type: string
        amount:
          type: array
          items:
            type: object
            required:
              - quantityType
            properties:
              quantityType:
                type: object
                required:
                  - description
                  - amount
                  - units
                properties:
                  description:
                    type: string
                  amount:
                    type: object
                    required:
                      - format
                      - type
                      - description
                    properties:
                      format:
                        type: string
                      type:
                        type: string
                      description:
                        type: string
                  units:
                    type: object
                    required:
                      - type
                      - description
                    properties:
                      type:
                        type: string
                      description:
                        type: string

        isAutoTopup:
          type: string
          description: detail description
        paymentMethod:
          type: object
          required:
            - id
            - href
            - name
          properties:
            id:
              type: string
            href:
              type: string
            name:
              type: string
        validFor:
          type: object
          required:
            - endDateTime
            - startDateTime
          properties:
            endDateTime:
              type: string
            startDateTime:
              type: string
        requestedDate:
          type: string
        confirmationDate:
          type: string
        status:
          type: string
        product:
          type: object
          properties:
            id:
              type: string
            href:
              type: string
        relatedParty:
          type: array
          items:
            type: object
            required:
              - href
              - role
              - id
              - name
            properties:
              href:
                description: id of the product
                type: string
                example: value
              role:
                description: http reference
                type: string
              id:
                description: http reference
                type: string
              name:
                description: http reference
                type: string
        notificationRequest:
          type: object
          required:
            - callback
          properties:
            callback:
              type: array
              items:
                type: object
                required:
                  - type
                  - value
                properties:
                  type:
                    type: string
                  value:
                    type: string
    rechargeResponse:
      type: object
      required:
        - id
        - href
        - status
        - message
        - remarks
      properties:
        id:
          description: id of the product
          type: string
        href:
          description: http reference
          type: string
        status:
          description: name of the product
          type: string
        message:
          type: string
        remarks:
          description: description of the product
          type: string
    methodResponse:
      type: object
      required:
        - id
        - href
        - type
        - channel
        - amount
        - targetId
        - requestedDate
        - confirmationDate
        - status
        - product
      properties:
        id:
          description: id of the product
          type: string
          example: value
        href:
          description: http reference
          type: string
        type:
          type: string
          description: status of the request
        channel:
          type: array
          items:
            type: object
            required:
              - id
              - href
              - name
            properties:
              id:
                type: string
                description: currency
              href:
                type: string
                description: amount
              name:
                type: string
                description: amount
        amount:
          type: object
          required:
            - units
            - amount
          properties:
            units:
              type: string
            amount:
              type: string
        targetId:
          type: string
          description: detail description
        requestedDate:
          type: string
        confirmationDate:
          type: string
        status:
          type: string
        product:
          type: object
          properties:
            id:
              type: string
            href:
              type: string

    errorResponse:
        type: object
        required:
          - status
          - httpMessage
          - developerMessage
          - errorCode
          - transactionId
        properties:
          status:
            type: string
            description: http error code
          httpMessage:
            type: string
            description: http error message
          developerMessage:
            type: string
            description: error message from backend
          errorCode:
            type: string
            description: httpErrorCode.ProxyNumber.Backend Error Id
          transactionId:
            type: string
            description: exteralId_apigw own transaction id