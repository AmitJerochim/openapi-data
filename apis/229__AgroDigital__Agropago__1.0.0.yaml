openapi: 3.0.1
info:
  title: Agropago Rest API
  description: ""
  termsOfService: http://www.agropago.com/terms/
  contact:
    email: support@agropago.com
  version: 1.0.0
servers:
# Added by API Auto Mocking Plugin
- description: SwaggerHub API Auto Mocking
  url: https://virtserver.swaggerhub.com/AgroDigital/Agropago/1.0.0
- url: https://api.sandbox.agropago.com/v1
- url: http://apisandbox.agropago.com/v1
tags:
- name: Authorization
  description: Administracion de Authenticacion y claves de usuarios
- name: Users
  description: Administracion de Usuarios 
- name: Accounts
  description: Administracion de Cuentas del usuario  
- name: PaymentMethods
  description: Metodos de pagos disponibles 
- name: Orders
  description: Solicitudes de Pago  
- name: Payments
  description: Transacciones   

paths:
  /login:
    post:
      tags:
      - Authorization
      summary: User Login
      requestBody:
        description: Activation
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserLogin'
        required: true
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  auth_token:
                    type: string
                    example: 66ffd7f7c593afeb27e353769ffeac682bde3167
        405:
          description: Invalid input
          content: {}
      x-codegen-request-body-name: body
  /logout:
    post:
      tags:
      - Authorization
      summary: Logout
      responses:
        204:
          description: No Content
          content: {}
        405:
          description: Invalid input
          content: {}
          
  /users:
    post:
      tags:
      - Users
      summary: Registrar un nuevo usuario
      requestBody:
        description: User
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
        required: true
      responses:
        405:
          description: Invalid input
          content: {}
      x-codegen-request-body-name: body
  /users/activate:
    post:
      tags:
      - Users
      summary: Activar un usuario previamente registrado
      description: Para activar un usuario se requiere un token recibido por email despues que el usuario fue registrado.
      requestBody:
        description: Activation
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Activation'
        required: true
      responses:
        405:
          description: Invalid input
          content: {}
      x-codegen-request-body-name: body
  /users/profile:
    get:
      tags:
      - Users
      summary: Obtener la informacion del usuario
      description: Retorna la informacion del usuario conectado
      responses:
        200:
          description: No Content
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfo'
        405:
          description: Invalid input
          content: {}
      security:
      - basicAuth: []
  /users/password:
    put:
      tags:
      - Users
      summary: Cambiar password
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                current_password:
                  type: string
                  example: '***********************'
                new_password:
                  type: string
                  example: '***********************'
                confirm_new_password:
                  type: string
                  example: '***********************'
        required: true
      responses:
        204:
          description: No Content
          content: {}
        405:
          description: Invalid input
          content: {}
      x-codegen-request-body-name: body
  /users/password/reset:
    post:
      tags:
      - Users
      summary: Solicitar blanqueo de password
      description: Esta accion enviara un mail conteniendo un token and uid con el cual se puede cambiar el password.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: juanperez@gmail.com
        required: true
      responses:
        204:
          description: No Content
          content: {}
        405:
          description: Invalid input
          content: {}
      x-codegen-request-body-name: body
  /users/password/confirm:
    post:
      tags:
      - Users
      summary: Confirmar blanqueo de password
      description: Confirmar el blanqueo de password ingresando uno nuevo.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ui:
                  type: string
                  example: 381209302i0i09i09u
                token:
                  type: string
                  example: 9809ads8908ds6jj8u2389
                new_password:
                  type: string
                  example: '***********************'
                confirm_new_password:
                  type: string
                  example: '***********************'
        required: true
      responses:
        204:
          description: No Content
          content: {}
        405:
          description: Invalid input
          content: {}
      x-codegen-request-body-name: body
  /users/email:
    put:
      tags:
      - Users
      summary: Solicita el cambio de email para el usuario conectado.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                new_email:
                  type: string
                  example: juanperez2@gmail.com
        required: true
      responses:
        204:
          description: No Content
          content: {}
        405:
          description: Invalid input
          content: {}
      x-codegen-request-body-name: body
  /users/email/confirm:
    post:
      tags:
      - Users
      summary: Confirma el cambio de email.
      description: Confirma el cambio de email.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ui:
                  type: string
                  example: 381209302i0i09i09u
                token:
                  type: string
                  example: 9809ads8908ds6jj8u2389
        required: true
      responses:
        204:
          description: No Content
          content: {}
        405:
          description: Invalid input
          content: {}
      x-codegen-request-body-name: body
      
  /banks/accounts:
    post:
      tags:
      - Accounts
      summary: Registra una nueva cuenta bancaria
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BankAccountCreate'
        required: true
      responses:
        204:
          description: No Content
          content: {}
        405:
          description: Invalid input
          content: {}
      security:
      - basicAuth: []
      x-codegen-request-body-name: body
    get:
      tags:
      - Accounts
      summary: Obtiene la lista de cuentas bancarias
      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: number
                  next:
                    type: string
                  previous:
                    type: string
                  result:
                    type: array
                    description: ""
                    items:
                      $ref: '#/components/schemas/BankAccountList'
        405:
          description: Invalid input
          content: {}
      security:
      - basicAuth: []
  /banks/accounts/{accountId}:
    delete:
      tags:
      - Accounts
      summary: Elimina una cuenta bancaria
      parameters:
      - name: accountId
        in: path
        description: Account ID
        required: true
        schema:
          type: integer
      responses:
        204:
          description: No Content
          content: {}
        405:
          description: Invalid input
          content: {}
      security:
      - basicAuth: []
      
  /payment_methods:
    get:
      tags:
      - PaymentMethods
      summary: Retorna la lista de todos los metodos de pagos disponibles
      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: number
                  next:
                    type: string
                  previous:
                    type: string
                  result:
                    type: array
                    description: ""
                    items:
                      $ref: '#/components/schemas/PaymentMethod'
        405:
          description: Invalid input
          content: {}
      security:
      - basicAuth: []
      
  /payment-order/create:
    post:
      tags:
      - agropago
      summary: Create a payment order
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentOrderCreate'
        required: true
      responses:
        204:
          description: No Content
          content: {}
        405:
          description: Invalid input
          content: {}
      security:
      - basicAuth: []
      x-codegen-request-body-name: body
  /payment-order/list:
    get:
      tags:
      - agropago
      summary: Get payment orders
      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                type: array
                description: ""
                items:
                  $ref: '#/components/schemas/PaymentOrderList'
      security:
      - basicAuth: []
      
      
  /bank/list:
    get:
      tags:
      - agropago
      summary: Get bank list
      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                type: array
                description: ""
                items:
                  $ref: '#/components/schemas/Bank'
        405:
          description: Invalid input
          content: {}
      security:
      - basicAuth: []

components:
  schemas:
    User:
      type: object
      properties:
        first_name:
          type: string
          description: Nombre
          example: Juan
        last_name:
          type: string
          description: Apellido
          example: Perez
        birthdate:
          type: string
          description: Fecha de nacimiento
          example: 01/08/1978
        dni:
          type: string
          description: Dni
          example: "22222222"
        legal_name:
          type: string
          description: Nombre legal
          example: Juan Perez
        cuit:
          type: string
          description: Cuit
          example: "20222222223"
        phone:
          type: string
          description: Teléfono
          example: 0351-4895477
        email:
          type: string
          description: Email
          example: juanperez@gmail.com
        confirm_email:
          type: string
          description: Confirm email
          example: juanperez@gmail.com
        password:
          type: string
          description: Password
          example: '**********'
        terms_accepted:
          type: boolean
          description: Terms accepted
          example: true
    UserInfo:
      type: object
      properties:
        first_name:
          type: string
          description: Nombre
          example: Juan
        last_name:
          type: string
          description: Apellido
          example: Perez
        birthdate:
          type: string
          description: Fecha de nacimiento
          example: 01/08/1978
        dni:
          type: string
          description: Dni
          example: "22222222"
        legal_name:
          type: string
          description: Nombre legal
          example: Juan Perez
        cuit:
          type: string
          description: Cuit
          example: "20222222223"
        phone:
          type: string
          description: Teléfono
          example: 0351-4895477
        balance:
          type: number
          description: Balance
          example: 3000.0
        full_balance:
          type: number
          description: Full Balance
          example: 3000.0
    Beneficiary:
      type: object
      properties:
        email:
          type: string
          example: juanperez@gmail.com
        first_name:
          type: string
          description: Nombre
          example: Juan
        last_name:
          type: string
          description: Apellido
          example: Perez
        legal_name:
          type: string
          description: Nombre legal
          example: Juan Perez
    Payer:
      type: object
      properties:
        email:
          type: string
          example: agropago.test01@gmail.com
        first_name:
          type: string
          description: Nombre
          example: Alberto
        last_name:
          type: string
          description: Apellido
          example: Perez
        legal_name:
          type: string
          description: Nombre legal
          example: Alberto Perez
    Activation:
      type: object
      properties:
        uid:
          type: string
          description: UID
          example: "834812341324123"
        token:
          type: string
          description: Token
          example: 2149230491391ofkfdkasdkadf43
    UserLogin:
      type: object
      properties:
        email:
          type: string
          description: ""
          example: juanperez@gmail.com
        password:
          type: string
          description: ""
          example: '******************'
    Bank:
      type: object
      properties:
        id:
          type: number
          description: Id del Banco
          example: 16.0
        name:
          type: string
          description: Nombre del Banco
          example: Banco Ciudad
        initials:
          type: string
          description: Iniciales del Banco
          example: CIUDAD
    PaymentMethod:
      type: object
      properties:
        id:
          type: number
          description: Id de la tarjeta
          example: 2.0
        name:
          type: string
          description: Nombre de la tarjeta
          example: Galicia Rural
        interest:
          type: number
          description: Interes
          example: 0.02
    Status:
      type: object
      properties:
        id:
          type: number
          description: Id Status
          example: 2.0
        name:
          type: string
          description: Status Description
          example: Transferido
    BankAccountCreate:
      type: object
      properties:
        bank:
          $ref: '#/components/schemas/Bank'
        account_number:
          type: string
          description: Cuenta Bancaria
          example: "0010500"
        cbu:
          type: string
          description: CBU
          example: "0170231820000000010500"
        alias:
          type: string
          description: Alias
          example: Alias01
    BankAccountList:
      type: object
      properties:
        bank:
          $ref: '#/components/schemas/Bank'
        account_number:
          type: string
          description: Cuenta Bancaria
          example: "0010500"
        cbu:
          type: string
          description: CBU
          example: "0170231820000000010500"
        alias:
          type: string
          description: Alias
          example: Alias01
        valid_account:
          type: boolean
          description: Es valida
          example: true
        when_valid_account:
          type: string
          description: fecha validacion
          example: 2019-04-04T09:20:55.622478Z
    PaymentOrderCreate:
      type: object
      properties:
        payer_email:
          type: string
          description: Payer email
          example: agropago.test02@gmail.com
        term:
          type: integer
          description: Terminos
          example: 120
        amount:
          type: number
          description: Total
          example: 100.0
        amount_to_transfer:
          type: number
          description: Total a tranferir
          example: 96.37
        description:
          type: string
          description: Descripcion
          example: Cobro de algo
        invoice_number:
          type: string
          description: Numero de Factura
          example: 234-234213
        feeds:
          type: object
          properties: {}
          description: Detalle comision
          example:
            earningRetetion: 0
            proporcionalBankrate: 0
            apCommissionTotal: 1
            arancel: 0.02
            ivaBankRateTotal: 0
            ivaBankRate: 0.21
            ivaArancelTotal: 0.42
            ivaAPCommissionTotal: 0.21
            ivaAPCommission: 0.21
            proporcionalBankrateTotal: 0
            earningRetetionTotal: 0
            arancelTotal: 2
            apCommission: 0.01
            totalAmount: 96.37
            cft: 0
            ivaArancel: 0.21
            IIBBRetention: 0
            IIBBRetentionTotal: 0
    PaymentOrderList:
      type: object
      properties:
        uuid:
          type: string
          description: uuid
          example: 6a0e9a0a-c926-4805-8ae1-8242918a4c42
        code:
          type: string
          description: code
          example: PO-19-000005
        date:
          type: string
          example: 2019-04-16T17:20:08.767775Z
        beneficiary:
          $ref: '#/components/schemas/Beneficiary'
        payer_email:
          type: string
          description: Payer email
          example: agropago.test02@gmail.com
        payer:
          $ref: '#/components/schemas/Payer'
        term:
          type: integer
          description: Terminos
          example: 120
        amount:
          type: number
          description: Total
          example: 100.0
        amount_to_transfer:
          type: number
          description: Total a tranferir
          example: 96.37
        status:
          $ref: '#/components/schemas/Status'
        description:
          type: string
          description: Descripcion
          example: Cobro de algo
        invoice_number:
          type: string
          description: Numero de Factura
          example: 234-234213
        rel_type:
          type: string
          example: beneficiary
        feeds:
          type: object
          properties: {}
          description: Detalle comision
          example:
            earningRetetion: 0
            proporcionalBankrate: 0
            apCommissionTotal: 1
            arancel: 0.02
            ivaBankRateTotal: 0
            ivaBankRate: 0.21
            ivaArancelTotal: 0.42
            ivaAPCommissionTotal: 0.21
            ivaAPCommission: 0.21
            proporcionalBankrateTotal: 0
            earningRetetionTotal: 0
            arancelTotal: 2
            apCommission: 0.01
            totalAmount: 96.37
            cft: 0
            ivaArancel: 0.21
            IIBBRetention: 0
            IIBBRetentionTotal: 0
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic
