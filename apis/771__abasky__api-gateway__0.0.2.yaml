penapi: 3.0.0
servers:
  - url: 'https://api-gateway.dev.abaservices.ch'
    description: Development server - AbaServices
  - url: 'https://api-gateway.int.abaservices.ch'
    description: Integration server - AbaServices
  - url: 'https://api-gateway.abaservices.ch'
    description: Production server - AbaServices
info:
  version: "0.0.2"
  title: Api-Gateway API


tags:
  - name: E-Banking - Discovery
    description: Provides information on a transmitted IBAN
  - name: Accounting
    description: TBD Fibu
  
paths:
  '/ebanking/v1/discovery/institutes/{iban}':
    get:
      tags:
        - E-Banking - Discovery
      description: returns the institute for a given iban
      operationId: getInstitutes
      security:
        - ApiKeyAuth: []
      parameters:
        - name: iban
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Information about an institute
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Institue'
        '422':
          description: Supplied iban is not valid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscoveryError'
  '/ebanking/v1/discovery/interfaces/{iban}':
    get:
      tags:
        - E-Banking - Discovery
      description: returns the interface information for a given iban
      operationId: getInterface
      security:
        - ApiKeyAuth: []
      parameters:
        - name: iban
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Information about an interface
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Interface'
        '422':
          description: Supplied iban is not valid
          content:
            application/json:
              schema:
               $ref: '#/components/schemas/DiscoveryError'

  '/accounting/v1/ebalance':
    get:
      tags:
        - Accounting
      description: TBD Fibu
      security:
        - ApiKeyAuth: []  
      responses:
        '200':
          description: TBD Fibu
components:
  schemas:
    Institue:
      type: object
      properties:
        iban:
          type: string
          example: CH0308391290725551000
        bankId:
          type: string
          example: '8391'
        bankName:
          type: string
          example: WIR Bank Genossenschaft
        shortTerm:
          type: string
          example: WIR
        swift:
          type: string
          example: WIRBCHBBXXX
        domicile:
          type: string
          example: Auberg 1
        postalAddress:
          type: string
          example: Postfach
        postCode:
          type: string
          example: '4002'
        city:
          type: string
          example: Basel
    Interface:
      type: object
      properties:
        iban:
          type: string
          example: CH0308391290725551000
        bankId:
          type: string
          example: '8391'
        bankName:
          type: string
          example: WIR Bank Genossenschaft
        interfaceName:
          type: string
          example: Finnova
        interfacePath:
          type: string
          example: finnova
        basePath:
          type: string
          example: /interfaces/finnova
    DiscoveryError:
      type: object
      properties:
        status:
          type: string
        timestamp:
          type: string
          format: date-time
        message:
          type: string
          example: Supplied IBAN CH0308391390725551000 is not valid

    ErrorObject:
      type: object
      properties:
        title:
          type: string
        status:
          type: string
        detail:
          type: string
        id:
          type: string


  examples:
    objectExample:
      value:
        id: 1
        name: new object
      summary: A sample object
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
   
  responses:
    400_BadRequest:
      description: >-
        The server cannot or will not process the request due to an apparent
        client error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorObject'
    401_Unauthorized:
      description: >-
        Unauthorized - Authentication is required and has failed or has not yet
        been provided
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorObject'
    403_Forbidden:
      description: Forbidden - user not having the necessary permissions for a resource
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorObject'
    404_NotFound:
      description: NotFound - The requested resource could not be foun
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorObject'