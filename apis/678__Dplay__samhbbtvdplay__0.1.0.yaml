penapi: 3.0.0
info:
  description: ''
  version: 0.1.0
  title: Discovery Launcher Service
servers:
# Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/Dplay/samhbbtvdplay/0.1.0
  - url: sam.hbbtv.it.dplay.com
    description: base url
tags:
  - name: event
    description: event
paths:
  /event:
    post:
      tags:
        - event
      summary: Add a new event
      description: description
      operationId: addEvent
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
      responses:
        '200':
          description: A user object.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Launcher'
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found
        '405':
          description: Method Not Allowed
        '418':
          description: I'm a teapot
        '500':
          description: Internal Server Error
      security:
        - bearerAuth: []
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    Launcher:
      type: object
      required:
        - id
        - name
        - title
        - version
        - url
      properties:
        id:
          type: integer
          format: int32
        name:
          type: string
          example: Discovery Channel launcher
        version:
          type: string
          example: '0.1'
        title:
          type: string
          example: Launcher Title
        subtitle:
          type: string
          example: Launcher Subtitle
        callToAction:
          type: string
          example: Launcher Call To Action
        mainImage:
          type: string
          example: >-
            https://eu2-prod-images.disco-api.com/2019/09/16/channel-27-18405042140336351.jpg?w=1300&f=jpg&p=true&q=100
        url:
          type: string
          example: 'https://hbbtv.it.dplay.com/video/12312'
        items:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                example: Item Name
              url:
                type: string
                example: 'https://hbbtv.it.dplay.com/video/12312'
              image:
                type: string
                example: >-
                  https://eu2-prod-images.disco-api.com/2019/09/16/channel-27-18405042140336351.jpg?w=1300&f=jpg&p=true&q=100
        timeDuration:
          type: integer
          format: int16
          example: 10000
    Event:
      type: object
      required:
        - id
      properties:
        id:
          type: integer
          format: int32
        user:
          $ref: '#/components/schemas/User'
        channel:
          $ref: '#/components/schemas/Channel'
        device:
          $ref: '#/components/schemas/Device'
        media:
          type: string
          example: EHD_20412
        programType:
          type: string
          example: commercial break / regular program  
    User:
      type: object
      required:
        - id
        - clientId
        - adConsent
      properties:
        id:
          type: integer
          format: int32
        clientId:
          type: integer
          format: int32
          example: 1123213345
        adConsent:
          type: boolean
        geo:
          $ref: '#/components/schemas/Geo'
    Geo:
      type: object
      required:
        - province
        - city
        - zip
      properties:
        province:
          type: string
          example: Varese
        city:
          type: string
          example: Castellanza
        zip:
          type: integer
          format: int8
          example: 21053
    Channel:
      type: object
      required:
        - channel
      properties:
        channel:
          type: string
          example: Nove
        tripletDVB:
          type: string
          example: 10.10.10
    Device:
      type: object
      required:
        - brand
        - hbbtvVersion
      properties:
        brand:
          type: string
          example: Samsung
        hbbtvVersion:
          type: string
          example: '1.5'
    ApiResponse:
      type: object
      properties:
        code:
          type: integer
          format: int32
        type:
          type: string
        message:
          type: string