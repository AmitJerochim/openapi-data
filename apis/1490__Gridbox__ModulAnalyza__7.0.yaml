openapi: 3.0.0
info:
  title: Analýza
  version: '7.0'
  description: Návrh BE modulu Analýza
servers:
  - url: 'http://localhost:3000'
paths:
  /analyzeEE:
    parameters: []
    post:
      summary: ''
      operationId: post-analyzeEE
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  monitoredNodes:
                    type: array
                    description: pole analyzovaných uzlov
                    items:
                      title: MonitoredElement
                      type: object
                      properties:
                        elementId:
                          type: string
                        results:
                          type: array
                          items:
                            title: SimulationResult
                            type: object
                            description: "Výsledok analýzy môže byť náklady vyjadrené v hodinových intervaloch\nalebo\nSpotreba vyjadrená v hodinových intervaloch\nalebo \nmôže byť  labels a hodnoty k tomu\nalebo\núdaje v tabuľkovom formáte"
                            properties:
                              id:
                                type: number
                              title:
                                type: string
                                description: 'názov analýzy napr. Náklady, Spotreba'
                              statistic:
                                type: array
                                description: 'pole obsahujúce štatistické údaje o dátach '
                                items:
                                  title: Statistic
                                  type: object
                                  properties:
                                    id:
                                      type: number
                                    name:
                                      type: string
                                      description: 'napr. Priemer, Minimum'
                                    value:
                                      type: number
                                    unit:
                                      type: string
                                      description: napr. KW/h
                                    rising:
                                      type: number
                                    falling:
                                      type: number
                                  required:
                                    - id
                                    - name
                                    - value
                              graphType:
                                type: string
                                description: 'typ grafu napr. LINE_GRAPH, PIE_GRAPH'
                              timeSeries:
                                type: array
                                description: 'pole obsahujúce časové rady s príslušnými hodnotami '
                                items:
                                  type: object
                                  properties:
                                    time:
                                      type: string
                                      description: 'napr. 2019-03-31T23:00:00+01:00'
                                    value:
                                      type: number
                                      description: napr. 11.725866666666642
                                  required:
                                    - time
                                    - value
                              labels:
                                type: array
                                description: '["Ranná", "Denná", "Špička", "Nočná"]'
                                items:
                                  type: string
                              values:
                                type: array
                                description: '[4.74, -0.61, 3.55, 5.07]'
                                items:
                                  type: number
                              table:
                                title: Table
                                type: object
                                description: Tabuľka obsahujúca ľubovoľné údaje
                                properties:
                                  schema:
                                    description: ''
                                    type: object
                                    required:
                                      - fields
                                      - primaryKey
                                    properties:
                                      fields:
                                        type: array
                                        description: definícia stĺpcov tabuľky
                                        items:
                                          type: object
                                          properties:
                                            name:
                                              type: string
                                              description: '"name":"index"'
                                            type:
                                              type: string
                                              description: '"type":"integer"'
                                          required:
                                            - name
                                            - type
                                      primaryKey:
                                        type: array
                                        description: '"primaryKey":["index"]'
                                        items:
                                          type: string
                                  data:
                                    type: array
                                    description: ''
                                    items:
                                      type: object
                                      description: "[{\n\t\t\t\"Index\": 0,\n\t\t\t\"Prvok\": \"Dom\",\n\t\t\t\"Spotreba\": 4.5\n\t\t}, {\n\t\t\t\"Index\": 1,\n\t\t\t\"Prvok\": \"Solárny panel\",\n\t\t\t\"Spotreba\": 0\n\t\t}, {\n\t\t\t\"Index\": 2,\n\t\t\t\"Prvok\": \"Továreň\",\n\t\t\t\"Spotreba\": 54.5\n\t\t}, {\n\t\t\t\"Index\": 3,\n\t\t\t\"Prvok\": \"Veterný mlyn\",\n\t\t\t\"Spotreba\": 0\t\t}\n\t]\n"
                                required:
                                  - schema
                            required:
                              - id
                              - title
                      required:
                        - elementId
                  logs:
                    type: array
                    description: obsahuje dodatočné informácie o analýze
                    items:
                      title: SimulationLog
                      type: object
                      description: ''
                      properties:
                        id:
                          type: number
                        type:
                          type: string
                        timeStamp:
                          type: string
                        message:
                          type: string
                      required:
                        - id
                        - type
                        - timeStamp
                        - message
                  analyzeResults:
                    type: array
                    description: pole obsahujúce výsledky analýzy
                    items:
                      title: SimulationResult
                      type: object
                      description: "Výsledok analýzy môže byť náklady vyjadrené v hodinových intervaloch\nalebo\nSpotreba vyjadrená v hodinových intervaloch\nalebo \nmôže byť  labels a hodnoty k tomu\nalebo\núdaje v tabuľkovom formáte"
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                          description: 'názov analýzy napr. Náklady, Spotreba'
                        statistic:
                          type: array
                          description: 'pole obsahujúce štatistické údaje o dátach '
                          items:
                            title: Statistic
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                                description: 'napr. Priemer, Minimum'
                              value:
                                type: number
                              unit:
                                type: string
                                description: napr. KW/h
                              rising:
                                type: number
                              falling:
                                type: number
                            required:
                              - id
                              - name
                              - value
                        graphType:
                          type: string
                          description: 'typ grafu napr. LINE_GRAPH, PIE_GRAPH'
                        timeSeries:
                          type: array
                          description: 'pole obsahujúce časové rady s príslušnými hodnotami '
                          items:
                            type: object
                            properties:
                              time:
                                type: string
                                description: 'napr. 2019-03-31T23:00:00+01:00'
                              value:
                                type: number
                                description: napr. 11.725866666666642
                            required:
                              - time
                              - value
                        labels:
                          type: array
                          description: '["Ranná", "Denná", "Špička", "Nočná"]'
                          items:
                            type: string
                        values:
                          type: array
                          description: '[4.74, -0.61, 3.55, 5.07]'
                          items:
                            type: number
                        table:
                          title: Table
                          type: object
                          description: Tabuľka obsahujúca ľubovoľné údaje
                          properties:
                            schema:
                              description: ''
                              type: object
                              required:
                                - fields
                                - primaryKey
                              properties:
                                fields:
                                  type: array
                                  description: definícia stĺpcov tabuľky
                                  items:
                                    type: object
                                    properties:
                                      name:
                                        type: string
                                        description: '"name":"index"'
                                      type:
                                        type: string
                                        description: '"type":"integer"'
                                    required:
                                      - name
                                      - type
                                primaryKey:
                                  type: array
                                  description: '"primaryKey":["index"]'
                                  items:
                                    type: string
                            data:
                              type: array
                              description: ''
                              items:
                                type: object
                                description: "[{\n\t\t\t\"Index\": 0,\n\t\t\t\"Prvok\": \"Dom\",\n\t\t\t\"Spotreba\": 4.5\n\t\t}, {\n\t\t\t\"Index\": 1,\n\t\t\t\"Prvok\": \"Solárny panel\",\n\t\t\t\"Spotreba\": 0\n\t\t}, {\n\t\t\t\"Index\": 2,\n\t\t\t\"Prvok\": \"Továreň\",\n\t\t\t\"Spotreba\": 54.5\n\t\t}, {\n\t\t\t\"Index\": 3,\n\t\t\t\"Prvok\": \"Veterný mlyn\",\n\t\t\t\"Spotreba\": 0\t\t}\n\t]\n"
                          required:
                            - schema
                      required:
                        - id
                        - title
                  monitoredLinks:
                    type: array
                    description: 'spojenie medzi analyzovanými uzlami,  potrebujeme kvôli prehrávaniu simulácie'
                    items:
                      type: number
                required:
                  - monitoredNodes
                  - analyzeResults
                  - monitoredLinks
             
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '405':
          description: Validation exception
        '500':
          description: Internal Server Error
      description: 'Endpoint vypočíta spotrebovanú energiu ,celkové náklady a návratnosť fotovoltaiky'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                dateFrom:
                  type: string
                dateTo:
                  type: string
                monitoredNodes:
                  type: array
                  description: pole vybraných uzlov na analýzu
                  items:
                    type: number
                project:
                  title: Project
                  type: object
                  properties:
                    id:
                      type: string
                    name:
                      type: string
                    createdAt:
                      type: string
                    updatedAt:
                      type: string
                    elementLists:
                      type: array
                      items:
                        type: string
                    graph:
                      title: Graph
                      type: object
                      properties:
                        groups:
                          type: array
                          items:
                            title: Group
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                              group:
                                type: string
                              separateSchema:
                                type: boolean
                            required:
                              - id
                              - name
                              - group
                              - separateSchema
                        nodes:
                          type: array
                          items:
                            title: Node
                            type: object
                            properties:
                              id:
                                type: number
                              type:
                                type: string
                              name:
                                type: string
                              latLong:
                                type: array
                                items:
                                  type: number
                              schemaPos:
                                type: array
                                items:
                                  type: number
                              group:
                                type: number
                              attributes:
                                title: Attribute
                                type: object
                                description: ''
                                properties:
                                  name:
                                    type: string
                                  apiName:
                                    type: string
                                  value:
                                    type: string
                                  type:
                                    type: string
                                  description:
                                    type: string
                                  defaultvalue:
                                    type: string
                                  unit:
                                    type: string
                                  label:
                                    type: string
                                  values:
                                    type: string
                                  valueIndex:
                                    type: number
                                required:
                                  - name
                                  - apiName
                                  - value
                                  - type
                                  - description
                                  - defaultvalue
                                  - unit
                                  - label
                                  - values
                                  - valueIndex
                            required:
                              - id
                              - type
                              - name
                              - latLong
                              - schemaPos
                              - group
                              - attributes
                        links:
                          type: array
                          items:
                            title: Link
                            type: object
                            properties:
                              type:
                                type: string
                              id:
                                type: string
                              from:
                                type: number
                              to:
                                type: number
                            required:
                              - type
                              - id
                              - from
                              - to
                      required:
                        - groups
                        - nodes
                        - links
                  required:
                    - id
                    - name
                    - createdAt
                    - updatedAt
                    - elementLists
                    - graph
                tdoName:
                  type: string
                  description: Názov typového diagramu odberu napr. ZSD_TDO_normalizovane_na_rok_2020
                priceListName:
                  type: string
                  description: názov cenníka napr. ZSE cenník
                tdoType:
                  type: string
                  description: 'typ typového diagramu odberu napr. TDO1, TDO2'
                raster:
                  type: string
                  description: 'hodina, deň, mesiac, rok'
              required:
                - dateFrom
                - dateTo
                - monitoredNodes
                - project
                - tdoName
                - priceListName
                - tdoType
                - raster
            
components:
  schemas:
    Project:
      title: Project
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
        elementLists:
          type: array
          items:
            type: string
        graph:
          title: Graph
          type: object
          properties:
            groups:
              type: array
              items:
                title: Group
                type: object
                properties:
                  id:
                    type: number
                  name:
                    type: string
                  group:
                    type: string
                  separateSchema:
                    type: boolean
                required:
                  - id
                  - name
                  - group
                  - separateSchema
            nodes:
              type: array
              items:
                title: Node
                type: object
                properties:
                  id:
                    type: number
                  type:
                    type: string
                  name:
                    type: string
                  latLong:
                    type: array
                    items:
                      type: number
                  schemaPos:
                    type: array
                    items:
                      type: number
                  group:
                    type: number
                  attributes:
                    title: Attribute
                    type: object
                    description: ''
                    properties:
                      name:
                        type: string
                      apiName:
                        type: string
                      value:
                        type: string
                      type:
                        type: string
                      description:
                        type: string
                      defaultvalue:
                        type: string
                      unit:
                        type: string
                      label:
                        type: string
                      values:
                        type: string
                      valueIndex:
                        type: number
                    required:
                      - name
                      - apiName
                      - value
                      - type
                      - description
                      - defaultvalue
                      - unit
                      - label
                      - values
                      - valueIndex
                required:
                  - id
                  - type
                  - name
                  - latLong
                  - schemaPos
                  - group
                  - attributes
            links:
              type: array
              items:
                title: Link
                type: object
                properties:
                  type:
                    type: string
                  id:
                    type: string
                  from:
                    type: number
                  to:
                    type: number
                required:
                  - type
                  - id
                  - from
                  - to
          required:
            - groups
            - nodes
            - links
      required:
        - id
        - name
        - createdAt
        - updatedAt
        - elementLists
        - graph
    Graph:
      title: Graph
      type: object
      properties:
        groups:
          type: array
          items:
            title: Group
            type: object
            properties:
              id:
                type: number
              name:
                type: string
              group:
                type: string
              separateSchema:
                type: boolean
            required:
              - id
              - name
              - group
              - separateSchema
        nodes:
          type: array
          items:
            title: Node
            type: object
            properties:
              id:
                type: number
              type:
                type: string
              name:
                type: string
              latLong:
                type: array
                items:
                  type: number
              schemaPos:
                type: array
                items:
                  type: number
              group:
                type: number
              attributes:
                title: Attribute
                type: object
                description: ''
                properties:
                  name:
                    type: string
                  apiName:
                    type: string
                  value:
                    type: string
                  type:
                    type: string
                  description:
                    type: string
                  defaultvalue:
                    type: string
                  unit:
                    type: string
                  label:
                    type: string
                  values:
                    type: string
                  valueIndex:
                    type: number
                required:
                  - name
                  - apiName
                  - value
                  - type
                  - description
                  - defaultvalue
                  - unit
                  - label
                  - values
                  - valueIndex
            required:
              - id
              - type
              - name
              - latLong
              - schemaPos
              - group
              - attributes
        links:
          type: array
          items:
            title: Link
            type: object
            properties:
              type:
                type: string
              id:
                type: string
              from:
                type: number
              to:
                type: number
            required:
              - type
              - id
              - from
              - to
      required:
        - groups
        - nodes
        - links
    Group:
      title: Group
      type: object
      properties:
        id:
          type: number
        name:
          type: string
        group:
          type: string
        separateSchema:
          type: boolean
      required:
        - id
        - name
        - group
        - separateSchema
    Node:
      title: Node
      type: object
      properties:
        id:
          type: number
        type:
          type: string
        name:
          type: string
        latLong:
          type: array
          items:
            type: number
        schemaPos:
          type: array
          items:
            type: number
        group:
          type: number
        attributes:
          title: Attribute
          type: object
          description: ''
          properties:
            name:
              type: string
            apiName:
              type: string
            value:
              type: string
            type:
              type: string
            description:
              type: string
            defaultvalue:
              type: string
            unit:
              type: string
            label:
              type: string
            values:
              type: string
            valueIndex:
              type: number
          required:
            - name
            - apiName
            - value
            - type
            - description
            - defaultvalue
            - unit
            - label
            - values
            - valueIndex
      required:
        - id
        - type
        - name
        - latLong
        - schemaPos
        - group
        - attributes
    Link:
      title: Link
      type: object
      properties:
        type:
          type: string
        id:
          type: string
        from:
          type: number
        to:
          type: number
      required:
        - type
        - id
        - from
        - to
    Attribute:
      title: Attribute
      type: object
      description: ''
      properties:
        name:
          type: string
        apiName:
          type: string
        value:
          type: string
        type:
          type: string
        description:
          type: string
        defaultvalue:
          type: string
        unit:
          type: string
        label:
          type: string
        values:
          type: string
        valueIndex:
          type: number
      required:
        - name
        - apiName
        - value
        - type
        - description
        - defaultvalue
        - unit
        - label
        - values
        - valueIndex
    SimulationLog:
      title: SimulationLog
      type: object
      description: ''
      properties:
        id:
          type: number
        type:
          type: string
        timeStamp:
          type: string
        message:
          type: string
      required:
        - id
        - type
        - timeStamp
        - message
    SimulationResult:
      title: SimulationResult
      type: object
      description: "Výsledok analýzy môže byť náklady vyjadrené v hodinových intervaloch\nalebo\nSpotreba vyjadrená v hodinových intervaloch\nalebo \nmôže byť  labels a hodnoty k tomu\nalebo\núdaje v tabuľkovom formáte"
      properties:
        id:
          type: number
        title:
          type: string
          description: 'názov analýzy napr. Náklady, Spotreba'
        statistic:
          type: array
          description: 'pole obsahujúce štatistické údaje o dátach '
          items:
            title: Statistic
            type: object
            properties:
              id:
                type: number
              name:
                type: string
                description: 'napr. Priemer, Minimum'
              value:
                type: number
              unit:
                type: string
                description: napr. KW/h
              rising:
                type: number
              falling:
                type: number
            required:
              - id
              - name
              - value
        graphType:
          type: string
          description: 'typ grafu napr. LINE_GRAPH, PIE_GRAPH'
        timeSeries:
          type: array
          description: 'pole obsahujúce časové rady s príslušnými hodnotami '
          items:
            type: object
            properties:
              time:
                type: string
                description: 'napr. 2019-03-31T23:00:00+01:00'
              value:
                type: number
                description: napr. 11.725866666666642
            required:
              - time
              - value
        labels:
          type: array
          description: '["Ranná", "Denná", "Špička", "Nočná"]'
          items:
            type: string
        values:
          type: array
          description: '[4.74, -0.61, 3.55, 5.07]'
          items:
            type: number
        table:
          title: Table
          type: object
          description: Tabuľka obsahujúca ľubovoľné údaje
          properties:
            schema:
              description: ''
              type: object
              required:
                - fields
                - primaryKey
              properties:
                fields:
                  type: array
                  description: definícia stĺpcov tabuľky
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        description: '"name":"index"'
                      type:
                        type: string
                        description: '"type":"integer"'
                    required:
                      - name
                      - type
                primaryKey:
                  type: array
                  description: '"primaryKey":["index"]'
                  items:
                    type: string
            data:
              type: array
              description: ''
              items:
                type: object
                description: "[{\n\t\t\t\"Index\": 0,\n\t\t\t\"Prvok\": \"Dom\",\n\t\t\t\"Spotreba\": 4.5\n\t\t}, {\n\t\t\t\"Index\": 1,\n\t\t\t\"Prvok\": \"Solárny panel\",\n\t\t\t\"Spotreba\": 0\n\t\t}, {\n\t\t\t\"Index\": 2,\n\t\t\t\"Prvok\": \"Továreň\",\n\t\t\t\"Spotreba\": 54.5\n\t\t}, {\n\t\t\t\"Index\": 3,\n\t\t\t\"Prvok\": \"Veterný mlyn\",\n\t\t\t\"Spotreba\": 0\t\t}\n\t]\n"
          required:
            - schema
      required:
        - id
        - title
    Statistic:
      title: Statistic
      type: object
      properties:
        id:
          type: number
        name:
          type: string
          description: 'napr. Priemer, Minimum'
        value:
          type: number
        unit:
          type: string
          description: napr. KW/h
        rising:
          type: number
        falling:
          type: number
      required:
        - id
        - name
        - value
    MonitoredElement:
      title: MonitoredElement
      type: object
      properties:
        elementId:
          type: string
        results:
          type: array
          items:
            title: SimulationResult
            type: object
            description: "Výsledok analýzy môže byť náklady vyjadrené v hodinových intervaloch\nalebo\nSpotreba vyjadrená v hodinových intervaloch\nalebo \nmôže byť  labels a hodnoty k tomu\nalebo\núdaje v tabuľkovom formáte"
            properties:
              id:
                type: number
              title:
                type: string
                description: 'názov analýzy napr. Náklady, Spotreba'
              statistic:
                type: array
                description: 'pole obsahujúce štatistické údaje o dátach '
                items:
                  title: Statistic
                  type: object
                  properties:
                    id:
                      type: number
                    name:
                      type: string
                      description: 'napr. Priemer, Minimum'
                    value:
                      type: number
                    unit:
                      type: string
                      description: napr. KW/h
                    rising:
                      type: number
                    falling:
                      type: number
                  required:
                    - id
                    - name
                    - value
              graphType:
                type: string
                description: 'typ grafu napr. LINE_GRAPH, PIE_GRAPH'
              timeSeries:
                type: array
                description: 'pole obsahujúce časové rady s príslušnými hodnotami '
                items:
                  type: object
                  properties:
                    time:
                      type: string
                      description: 'napr. 2019-03-31T23:00:00+01:00'
                    value:
                      type: number
                      description: napr. 11.725866666666642
                  required:
                    - time
                    - value
              labels:
                type: array
                description: '["Ranná", "Denná", "Špička", "Nočná"]'
                items:
                  type: string
              values:
                type: array
                description: '[4.74, -0.61, 3.55, 5.07]'
                items:
                  type: number
              table:
                title: Table
                type: object
                description: Tabuľka obsahujúca ľubovoľné údaje
                properties:
                  schema:
                    description: ''
                    type: object
                    required:
                      - fields
                      - primaryKey
                    properties:
                      fields:
                        type: array
                        description: definícia stĺpcov tabuľky
                        items:
                          type: object
                          properties:
                            name:
                              type: string
                              description: '"name":"index"'
                            type:
                              type: string
                              description: '"type":"integer"'
                          required:
                            - name
                            - type
                      primaryKey:
                        type: array
                        description: '"primaryKey":["index"]'
                        items:
                          type: string
                  data:
                    type: array
                    description: ''
                    items:
                      type: object
                      description: "[{\n\t\t\t\"Index\": 0,\n\t\t\t\"Prvok\": \"Dom\",\n\t\t\t\"Spotreba\": 4.5\n\t\t}, {\n\t\t\t\"Index\": 1,\n\t\t\t\"Prvok\": \"Solárny panel\",\n\t\t\t\"Spotreba\": 0\n\t\t}, {\n\t\t\t\"Index\": 2,\n\t\t\t\"Prvok\": \"Továreň\",\n\t\t\t\"Spotreba\": 54.5\n\t\t}, {\n\t\t\t\"Index\": 3,\n\t\t\t\"Prvok\": \"Veterný mlyn\",\n\t\t\t\"Spotreba\": 0\t\t}\n\t]\n"
                required:
                  - schema
            required:
              - id
              - title
      required:
        - elementId
    Table:
      title: Table
      type: object
      description: Tabuľka obsahujúca ľubovoľné údaje
      properties:
        schema:
          description: ''
          type: object
          required:
            - fields
            - primaryKey
          properties:
            fields:
              type: array
              description: definícia stĺpcov tabuľky
              items:
                type: object
                properties:
                  name:
                    type: string
                    description: '"name":"index"'
                  type:
                    type: string
                    description: '"type":"integer"'
                required:
                  - name
                  - type
            primaryKey:
              type: array
              description: '"primaryKey":["index"]'
              items:
                type: string
        data:
          type: array
          description: ''
          items:
            type: object
            description: "[{\n\t\t\t\"Index\": 0,\n\t\t\t\"Prvok\": \"Dom\",\n\t\t\t\"Spotreba\": 4.5\n\t\t}, {\n\t\t\t\"Index\": 1,\n\t\t\t\"Prvok\": \"Solárny panel\",\n\t\t\t\"Spotreba\": 0\n\t\t}, {\n\t\t\t\"Index\": 2,\n\t\t\t\"Prvok\": \"Továreň\",\n\t\t\t\"Spotreba\": 54.5\n\t\t}, {\n\t\t\t\"Index\": 3,\n\t\t\t\"Prvok\": \"Veterný mlyn\",\n\t\t\t\"Spotreba\": 0\t\t}\n\t]\n"
      required:
        - schema