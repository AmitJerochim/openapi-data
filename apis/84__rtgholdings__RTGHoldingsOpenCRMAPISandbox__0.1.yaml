penapi: 3.0.1
info:
  title: RTG Holdings Open CRM API (Sandbox)
  description: API to access customer information from RTG's sandbox
  version: "0.1"
servers:
  - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
paths:
  /DEV/me:
    get:
      description: Me - Test the authentication (X-Auth-Guid).
      parameters:
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      responses:
        '200':
          description: Authorized - User is authorized to use this service
        '403':
          description: Unuthorized - User is not authorized to use this service.
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
  /DEV/customers:
    get:
      description: Customers - Get Customers by Last Processed Time
      parameters:
        - name: pageNumber
          in: query
          schema:
            type: string
          example: '1'
        - name: lastProcessedTime
          in: query
          schema:
            type: string
          example: '2018-08-12T16:04:10.2522569Z'
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      responses:
        '200':
          description: Customer Records
        '403':
          description: Unuthorized - User is not authorized to use this service.  
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
  /DEV/customer:
    get:
      description: Customer - Get Customer by Customer ID
      parameters:
        - name: customerId
          in: query
          schema:
            type: string
          example: '1017-1-5018'
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      responses:
        '200':
          description: Customer Records
        '400':
          description: You must pass in a customerId.  
        '403':
          description: Unuthorized - User is not authorized to use this service.  
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'    
  /DEV/updateCustomerExternalId:
    post:
      description: Update Customer External Id - Use this to link an external record id with the customer record
      parameters:
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                lastProcessedTimeUTC:
                  type: string
            examples:
              '0':
                value: '{"customerId":"1017-1-5018", "externalId":"323" }'
      responses:
        '200':
          description: Success
          content:
            text/json:
              schema:
                type: string
              examples: {}
        '403':
          description: Unuthorized - User is not authorized to use this service.  
        '422':  
          description: External ID {ExternalId} was not Saved for Customer ID {CustomerId}
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
      
  /DEV/updateCustomerLastProcessedTime:
    post:
      description: Update Customer Last Processed Time in UTC - Use this if you need to change the date used in the Unsynced Customers call. This will update automatically when getting Unsynced Customers.
      parameters:
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                lastProcessedTimeUTC:
                  type: string
            examples:
              '0':
                value: '{"lastProcessedTimeUTC":"2019-05-20T17:00:00.0023Z"}'
      responses:
        '200':
          description: Success, this will tell you the time used
          content:
            text/json:
              schema:
                type: string
              examples: {}
        '403':
          description: Unuthorized - User is not authorized to use this service.      
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
  /DEV/updateMembershipLastProcessedTime:
    post:
      description: Update Membership Last Processed Time in UTC - Use this if you need to change the date used in the Unsynced Memberships call. This will update automatically when getting Unsynced Memberships.
      parameters:
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                lastProcessedTimeUTC:
                  type: string
            examples:
              '0':
                value: '{"lastProcessedTimeUTC":"2019-05-20T17:00:00.0023Z"}'
      responses:
        '200':
          description: Success, this will tell you the time used
          content:
            text/json:
              schema:
                type: string
              examples: {}
        '403':
          description: Unuthorized - User is not authorized to use this service.      
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'    
  /DEV/unsyncedTransactions:
    get:
      description: Transactions - Get all Unsynced Transactions in batches of 1000. You may use an offset (pageNumber).
      parameters:
        - name: pageNumber
          in: query
          schema:
            type: string
          example: '1'
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      responses:
        '200':
          description: Transaction data.
        '403':
          description: Unuthorized - User is not authorized to use this service.  
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
  /DEV/unsyncedCustomers:
    get:
      description: Customers - Get all Unsynced Customers since the last call of this method. This also updates the Last Processed Date for subsequent calls. The maxRecords parameter is option, however, should be between 100 and 1000, if present in parameters.  This will include customer memberships.
      parameters:
        - name: maxRecords
          in: query
          schema:
            type: string
          example: '100'
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      responses:
        '200':
          description: Customer Records
        '400':
          description: Bad Request - maxRecords must be 100 or greater.  
        '403':
          description: Unuthorized - User is not authorized to use this service.  
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'  
  /DEV/unsyncedMemberships:
    get:
      description: Memberships - Get all Unsynced Memberships since the last call of this method. This also updates the Last Processed Date for subsequent calls. The maxRecords parameter is option, however, should be between 100 and 1000, if present in parameters.  This will include all related customer memberships.
      parameters:
        - name: maxRecords
          in: query
          schema:
            type: string
          example: '100'
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      responses:
        '200':
          description: Customer Records
        '400':
          description: Bad Request - maxRecords must be 100 or greater.  
        '403':
          description: Unuthorized - User is not authorized to use this service.  
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'      
  /DEV/OpenCrmSync:
    post:
      description: Update Customer record. All fields are case sensitive as are the following values. Available choices for prefix { "", "Mr.", "Ms.", "Mrs.", "Dr."}  Available choices for suffix { "", "Jr.", "Sr.", "I", "II", "III", "IV", "V", "VI", "VII"} Available choices for gender { "", "Male", "Female", "Non-Binary"} Use the 2 letter abbreviation for state, (e.g. IL, CA, TX). Address is no required, however If you include any part of an address, then you need the full address (not required - address2, county, country). The date of birth field should be represented in YYYY-MM-DD (e.g. 2018-12-30) The emailAddress field must be a properly formated email address. Important note - the customerId field must be filled in for an existing customer, or this will create a new customer in the Axis system.  The format is [company id]-[store id]-[customer id] (e.g. "1017-1-5018") The phone field should only contain digits.
      parameters:
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                lastProcessedTimeUTC:
                  type: string
            examples:
              '0':
                value: '{
                  "syncType": "Customer",
                  "syncData": "[{\"customerId\": \"1017-1-5018\",
                  \"firstName\": \"Robert\",
                  \"middleName\": \"William\",     
                  \"lastName\": \"Etherton\",
                  \"prefix\": \"\",
                  \"suffix\": \"\",
                  \"gender\": \"Male\",
                  \"dateOfBirth\": \"1980-01-01\",     
                  \"aliasId\": \"\",
                  \"emailAddress\": 
                  \"retherton@Bus123.com\",
                  \"address1\": \"100 Fred CT\",     
                  \"address2\": \"\",
                  \"city\": \"Wheeling\",
                  \"state\": \"IL\",
                  \"zip\": \"60090\",
                  \"country\": \"USA\",
                  \"county\": \"Cook\", 
                  \"phone\": \"8479999999\"
                  }
                  ]"
                  }'
      responses:
        '200':
          description: Success
          content:
            text/json:
              schema:
                type: string
              examples: {}
        '403':
          description: Unuthorized - User is not authorized to use this service.      
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'

  /DEV/transactionsByDateSold:
    get:
      description: Get Transactions by Date Sold
      parameters:
        - name: pageNumber
          in: query
          schema:
            type: string
          example: '1'
        - name: dateSoldStart
          in: query
          schema:
            type: string
          example: '2019-08-12T16:04:10.2522569Z'
        - name: dateSoldEnd
          in: query
          schema:
            type: string
          example: '2019-09-12T16:04:10.2522569Z'
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      responses:
        '200':
          description: Transaction Records
        '403':
          description: Unuthorized - User is not authorized to use this service.  
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
  /DEV/memberships:
    get:
      description: Memberships - Get Memberships by Last Processed Time.  This will include all related customer memberships.
      parameters:
        - name: pageNumber
          in: query
          schema:
            type: string
          example: '1'
        - name: lastProcessedTime
          in: query
          schema:
            type: string
          example: '2019-09-12T16:04:10.2522569Z'
        - name: X-Auth-Guid
          in: header
          schema:
            type: string
          example: CB93E9DE-C207-4886-A266-C3A2AB0DE98E
      responses:
        '200':
          description: Membership Records
        '403':
          description: Unuthorized - User is not authorized to use this service.  
      servers:
        - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'
    servers:
      - url: 'https://88s9tzkftf.execute-api.us-west-2.amazonaws.com'