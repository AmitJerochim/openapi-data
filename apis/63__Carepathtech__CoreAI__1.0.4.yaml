penapi: 3.0.0
info:
  version: "1.0.4"
  title: 'CoreAI API'
  description: 'This is the API for accessing the developed core AI services'
  contact:
    name: St√©phane Tetsing
    email: stephane.tetsing@carepathtech.de
servers:
# Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/pipper/CoreAI/1.0.4
  - description: Carepath CoreAI API
    url: https://carepath.coreai.com/v1/


paths:
  /cough/:
    get:
      summary: Carries out the cough detection on an arure blob object, which must be an audio file
      parameters: 
        - name: azureBlobContainer
          in: query
          required: true
          description: The azure blob container where the submitted blob is saved in. This container is supposed to be either in a development or production storage account according to the deployment environment.
          schema:
            type: string
            
            
        - name: blobs
          in: query
          required: true
          description: The azure blob object for cough detection
          schema:
            type: array
            items:
              properties:
                signature: 
                  type: string
                  description: The signature belonging to the submitted filename 
                filename:
                  type: string
                  description: The audio file on which the cough detection algorithm should be applied on. Note that its signature must match the MDG generated one, otherwise this request is will be rejected
          
        - name: account_id
          required: true
          in: query
          description: The account id aassociated to the submitted azure blob object for cough detection
          schema:
            type: string
                  
      responses:
        '200':
          description: Successfull detection 
          content:
            application/json:
              schema:
                type: object
                description: The detection result respective to the azure blob submitted
                
                properties:
                  account_id:
                    type: string
                    
                  amount_of_coughs:
                    type: number
                    
                  expand_multiple_files:
                    type: boolean
                    
                  blobNames:
                    type: array 
                    items:
                      type: string
                    description: The originally input azure blob
                    
                  results:
                    type: array
                    items:
                      properties:
                        algorithm:
                          type: string
                        
                        voted:
                          type: boolean
                          
                        coughs:
                          type: array
                          items:
                            properties:
                              signature: 
                                type: string
                              cough:  
                                $ref: '#/components/schemas/Cough'
        
        '404':
          description: No connection could be made to the blob container storage or the specified blob was not found

components:
  schemas:
    Cough:
      type: object
      properties:
          start: 
            type: number
          end: 
            type: number
          intensity:
            type: number
          states:
            type: array
            items:
              type: string
          account_id:
            type: number
          filename:
            type: string
          container:
            type: string