{"openapi":"3.0.0","servers":[],"info":{"version":"1.0.1","title":"Virginia Referral Engine Data Trust","description":"This specification describes the Master Client Index and Data Resource APIs that make up the Virginia Referral Engine Data Trust.","contact":{"email":"greg@brighthive.io"},"license":{"name":"MIT","url":"https://github.com/brighthive/master-client-index/blob/master/LICENSE"}},"security":[{"accessCode":["read","write"]}],"tags":[{"name":"health","description":"Basic API health check."},{"name":"users","description":"Individuals managed by the MCI."},{"name":"referrals","description":"Referrals to other programs received by users."},{"name":"programs","description":"Programs that users may be eligible for. Extracted from Data Resource API."},{"name":"providers","description":"Program providers. Extracted from the Data Resource API."},{"name":"helpers","description":"A collection of helper endpoints for retrieving data definitions."}],"paths":{"/master-client-index/health":{"get":{"tags":["health"],"summary":"Server health check operation","operationId":"getHealthCheck","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheck"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/master-client-index/users":{"get":{"tags":["users"],"summary":"Get a paginated list of users","operationId":"getAllUsers","parameters":[{"in":"query","name":"offset","description":"Pagination offset. Default is 0.","schema":{"type":"integer"},"required":false},{"in":"query","name":"limit","description":"Maximum number of results to return. Default is 20 and cannot exceed 100.","schema":{"type":"integer"},"required":false}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSummaries"}}}},"400":{"description":"Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}},"post":{"tags":["users"],"summary":"Add a new user to the Master Client Index","operationId":"addNewUser","requestBody":{"description":"User object to add to MCI","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRequest"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserFoundInMCI"}}}},"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreated"}}}},"400":{"description":"Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Errors"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/master-client-index/users/{mci_id}":{"get":{"tags":["users"],"summary":"Get details of a specific user in the MCI","operationId":"getUserDetails","parameters":[{"name":"mci_id","in":"path","description":"User's MCI ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDetail"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/data-resources/referrals":{"get":{"tags":["referrals"],"summary":"Get referrals made for user","operationId":"getUserReferrals","parameters":[{"in":"query","name":"offset","description":"Pagination offset. Default is 0.","schema":{"type":"integer"},"required":false},{"in":"query","name":"limit","description":"Maximum number of results to return. Default is 20 and cannot exceed 100.","schema":{"type":"integer"},"required":false}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"referrals":{"type":"array","items":{"$ref":"#/components/schemas/Referrals"}},"links":{"type":"array","items":{"$ref":"#/components/schemas/LinkRel"}}}}}}},"400":{"description":"Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}},"post":{"tags":["referrals"],"summary":"Add a new user referral","operationId":"addUserReferrals","requestBody":{"description":"New referral to add to the MCI","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewReferral"}}}},"parameters":[{"name":"mci_id","in":"path","description":"User's MCI ID","required":true,"schema":{"type":"string"}}],"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"400":{"description":"Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/data-resources/referrals/{referral_id}":{"get":{"tags":["referrals"],"summary":"Get details of a referral made for a user","operationId":"getUserReferralDetails","parameters":[{"name":"mci_id","in":"path","description":"User's MCI ID","required":true,"schema":{"type":"string"}},{"name":"referral_id","in":"path","description":"Referral ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Referral"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/data-resources/referrals/query":{"post":{"tags":["referrals"],"summary":"Query a user referral.","operationId":"queryReferrals","requestBody":{"description":"New referral to add to the MCI","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Referral"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"results":{"type":"array","items":{"$ref":"#/components/schemas/Referral"}}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/data-resources/programs":{"get":{"tags":["programs"],"summary":"Get a list of all programs known to the MCI","operationId":"getAllPrograms","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"programs":{"type":"array","items":{"$ref":"#/components/schemas/Programs"}},"links":{"type":"array","items":{"$ref":"#/components/schemas/LinkRel"}}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/data-resources/providers":{"get":{"tags":["providers"],"summary":"Get a list of all providers known to the MCI","operationId":"getAllProgramProviders","responses":{"200":{"description":"Successful Operation","content":{"application/json":{"schema":{"type":"object","properties":{"providers":{"type":"array","items":{"$ref":"#/components/schemas/Providers"}},"links":{"type":"array","items":{"$ref":"#/components/schemas/LinkRel"}}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/data-resources/myjourney/users":{"get":{"tags":["myjourney_users"],"summary":"Get users from MyJourney application stored in Data Trust","operationId":"getMyJourneyUsers","parameters":[{"in":"query","name":"offset","description":"Pagination offset. Default is 0.","schema":{"type":"integer"},"required":false},{"in":"query","name":"limit","description":"Maximum number of results to return. Default is 20 and cannot exceed 100.","schema":{"type":"integer"},"required":false}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"users":{"type":"array","items":{"$ref":"#/components/schemas/MyJourneyUsers"}},"links":{"type":"array","items":{"$ref":"#/components/schemas/LinkRel"}}}}}}},"400":{"description":"Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/data-resources/myjourney/users/{user_id}":{"get":{"tags":["myjourney_users"],"summary":"Get details of a MyJourney user stored in the Data Trust.","operationId":"getMyJourneyUserDetails","parameters":[{"name":"user_id","in":"path","description":"Unique identifier for the user's record.","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MyJourneyUser"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/master-client-index/source":{"get":{"tags":["helpers"],"summary":"Retrieve the sources by which an individual can enter the MCI.","operationId":"getAllSources","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"sources":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"source":{"type":"string"}}}}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/master-client-index/gender":{"get":{"tags":["helpers"],"summary":"Retrieve the genders that are known to the MCI.","operationId":"getAllGenders","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"genders":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"gender":{"type":"string"}}}}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/master-client-index/ethnicity":{"get":{"tags":["helpers"],"summary":"Retrieve the ethnicities and races that are known to the MCI.","operationId":"getAllEthnicities","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"ethnicities":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"ethnicity_race":{"type":"string"}}}}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/master-client-index/education_level":{"get":{"tags":["helpers"],"summary":"Retrieve the education levels that are known to the MCI.","operationId":"getAllEducation","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"education_levels":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"education_level":{"type":"string"}}}}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}},"/master-client-index/employment_status":{"get":{"tags":["helpers"],"summary":"Retrieve the employment status types that are known to the MCI.","operationId":"getAllEmploymentTypes","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"employment_status":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"employment_status":{"type":"string"}}}}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}}}}},"components":{"schemas":{"HealthCheck":{"type":"object","properties":{"api_name":{"type":"string"},"current_time":{"type":"string"},"current_api_version":{"type":"string"},"api_status":{"type":"string"}}},"Message":{"type":"object","properties":{"message":{"type":"string"}}},"Error":{"type":"object","properties":{"error":{"type":"string"}}},"Errors":{"type":"object","properties":{"errors":{"type":"array","items":{"type":"string"}}}},"UserSummary":{"type":"object","properties":{"mci_id":{"type":"string"},"first_name":{"type":"string"},"last_name":{"type":"string"}}},"UserSummaries":{"type":"object","properties":{"users":{"type":"array","items":{"$ref":"#/components/schemas/UserSummary"}},"links":{"type":"array","items":{"$ref":"#/components/schemas/LinkRel"}}}},"LinkRel":{"type":"object","properties":{"rel":{"type":"string"},"href":{"type":"string","format":"uri"}}},"MailingAddress":{"type":"object","properties":{"address":{"type":"string"},"city":{"type":"string"},"state":{"type":"string"},"postal_code":{"type":"string"},"country":{"type":"string"}}},"UserFoundInMCI":{"type":"object","properties":{"mci_id":{"type":"string"},"vendor_id":{"type":"string"},"first_name":{"type":"string"},"last_name":{"type":"string"},"match_probability":{"type":"number"}}},"UserCreated":{"type":"object","properties":{"mci_id":{"type":"string"},"vendor_id":{"type":"string"},"first_name":{"type":"string"},"last_name":{"type":"string"}}},"UserRequest":{"type":"object","properties":{"vendor_id":{"type":"string"},"ssn":{"type":"string"},"first_name":{"type":"string"},"last_name":{"type":"string"},"middle_name":{"type":"string"},"suffix":{"type":"string"},"mailing_address":{"$ref":"#/components/schemas/MailingAddress"},"date_of_birth":{"type":"string","format":"date"},"email_address":{"type":"string","format":"email"},"telephone":{"type":"string"},"gender":{"type":"string"},"ethnicity_race":{"type":"string"},"education_level":{"type":"string"},"employment_status":{"type":"string"},"source":{"type":"string"}}},"UserDetail":{"type":"object","properties":{"mci_id":{"type":"string"},"vendor_id":{"type":"string"},"registration_date":{"type":"string","format":"date"},"first_name":{"type":"string"},"last_name":{"type":"string"},"middle_name":{"type":"string"},"suffix":{"type":"string"},"mailing_address":{"$ref":"#/components/schemas/MailingAddress"},"date_of_birth":{"type":"string","format":"date"},"email_address":{"type":"string","format":"email"},"telephone":{"type":"string"},"gender":{"type":"string"},"ethnicity_race":{"type":"array","items":{"type":"string"}},"education_level":{"type":"string"},"employment_status":{"type":"string"},"source":{"type":"string"}}},"Referral":{"type":"object","properties":{"id":{"type":"integer"},"mci_id":{"type":"string"},"program_id":{"type":"integer"},"source_provider_id":{"type":"integer"},"destination_provider_id":{"type":"integer"},"referral_date":{"type":"string","format":"date"},"referral_start_date":{"type":"string","format":"date"},"referral_end_date":{"type":"string","format":"date"},"recommended_date":{"type":"string","format":"date"},"accepted_date":{"type":"string","format":"date"},"completed_date":{"type":"string","format":"date"},"serviced_date":{"type":"string","format":"date"}}},"NewReferral":{"type":"object","properties":{"mci_id":{"type":"string"},"program_id":{"type":"integer"},"source_provider_id":{"type":"integer"},"destination_provider_id":{"type":"integer"},"referral_date":{"type":"string","format":"date"},"referral_start_date":{"type":"string","format":"date"},"referral_end_date":{"type":"string","format":"date"},"recommended_date":{"type":"string","format":"date"},"accepted_date":{"type":"string","format":"date"},"completed_date":{"type":"string","format":"date"},"serviced_date":{"type":"string","format":"date"}}},"Referrals":{"type":"array","items":{"$ref":"#/components/schemas/Referral"}},"MyJourneyUsers":{"type":"array","items":{"$ref":"#/components/schemas/MyJourneyUser"}},"MyJourneyUser":{"type":"object","properties":{"id":{"type":"integer"},"mci_id":{"type":"string"},"checksum":{"type":"string"},"date_updated":{"type":"string","format":"date"},"data":{"$ref":"#/components/schemas/MyJourneyUserDetail"}}},"Program":{"type":"object","properties":{"id":{"type":"integer"},"program_name":{"type":"string"},"program_code":{"type":"string"},"program_description":{"type":"string"},"program_status":{"type":"string"},"program_fees":{"type":"integer"},"provider_id":{"type":"integer"},"location_id":{"type":"integer"},"eligibility_criteria":{"type":"string"},"credential_earned_id":{"type":"integer"},"potential_outcome_id":{"type":"string"},"program_url":{"type":"string"},"program_contact_phone":{"type":"string"},"languages":{"type":"string"},"current_intake_capacity":{"type":"integer"},"program_length_hours":{"type":"integer"},"program_length_weeks":{"type":"integer"},"prerequisite_id":{"type":"integer"},"program_soc":{"type":"string"},"funding_sources":{"type":"string"},"on_etpl":{"type":"integer"},"cost_of_books_and_supplies":{"type":"integer"}}},"Provider":{"type":"object","properties":{"id":{"type":"integer"},"provider_name":{"type":"string"},"provider_alternate_name":{"type":"string"},"provider_full_address":{"type":"string"},"provider_description":{"type":"string"},"provider_contact_email":{"type":"string"},"provider_url":{"type":"string"},"year_incorporated":{"type":"integer"}}},"Programs":{"type":"array","items":{"$ref":"#/components/schemas/Program"}},"Providers":{"type":"array","items":{"$ref":"#/components/schemas/Provider"}},"MyJourneyUserDetail":{"type":"object","properties":{"uuid":{"type":"string"},"first_name":{"type":"string"},"last_name":{"type":"string"},"gender":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"phone_type":{"type":"string","enum":["Mobile","Home","Work"]},"resume":{"type":"string"},"street":{"type":"string"},"street2":{"type":"string"},"city":{"type":"string"},"state":{"type":"string"},"zipcode":{"type":"string"},"country":{"type":"string"},"birthdate":{"type":"string"},"highest_education":{"type":"string"},"work_authorized":{"type":"boolean"},"preferred_language":{"type":"string","enum":["english","spanish","chinese","thai","russian","simplified-english"]},"unemployment_insurance":{"type":"string"},"race":{"type":"string"},"selective_service":{"type":"string"},"veteran":{"type":"string"},"created_at":{"type":"string"},"last_login":{"type":"string"},"journey_role":{"type":"string","enum":["parent","educator","case_worker","adult","student"]},"ssn_last4":{"type":"string"},"high_school_graduation_year":{"type":"integer"},"associated_organization":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"organization_type":{"type":"string"},"address":{"type":"string"},"address_2":{"type":"string"},"city":{"type":"string"},"state":{"type":"string"},"zip":{"type":"string"},"zip_4":{"type":"string"},"phone":{"type":"string"},"website_url":{"type":"string"},"fax":{"type":"string"},"email":{"type":"string"},"lowest_grade":{"type":"string"},"highest_grade":{"type":"string"},"district_number":{"type":"integer"},"district_name":{"type":"string"},"district_setting":{"type":"string"},"charter":{"type":"boolean"},"cde_school_code":{"type":"integer"},"workforce_office_id":{"type":"integer"}}},"legacy_data_consent":{"type":"boolean"},"work_histories":{"type":"array","items":{"type":"object","properties":{"city":{"type":"string"},"company":{"type":"string"},"country":{"type":"string"},"state":{"type":"string"},"description":{"type":"string"},"is_current":{"type":"boolean"},"title":{"type":"string"},"date_range":{"type":"object","properties":{"start":{"type":"string"},"finish":{"type":"string"}}}}}},"most_recent_completed_assessment":{"type":"array","items":{"type":"object","properties":{"qualities":{"type":"array","items":{"type":"object","properties":{"category":{"type":"string"},"description":{"type":"string"},"name":{"type":"string"},"icon_url":{"type":"string"}}}}}}},"user_employment":{"type":"array","items":{"type":"object","properties":{"currently_employed":{"type":"boolean"},"laid_off":{"type":"boolean"},"mass_layoff":{"type":"boolean"},"fired":{"type":"boolean"},"changing_careers":{"type":"boolean"},"current_industry":{"type":"boolean"},"seasonal":{"type":"boolean"}}}},"military_histories":{"type":"array","items":{"type":"object","properties":{"branch":{"type":"string"},"code":{"type":"string"}}}},"certifications":{"type":"array","items":{"type":"object","properties":{"date_range":{"type":"object","properties":{"start":{"type":"string"},"finish":{"type":"string"}}},"description":{"type":"string"},"institution":{"type":"string"},"name":{"type":"string"}}}},"education_histories":{"type":"array","items":{"type":"object","properties":{"date_range":{"type":"object","properties":{"start":{"type":"string"},"finish":{"type":"string"}}},"degree":{"type":"string"},"description":{"type":"string"},"school":{"type":"string"},"field_of_study":{"type":"string"}}}},"language_proficiency":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"proficiency":{"type":"string"}}}},"user_question_data":{"type":"object","properties":{"job_difficulties":{"type":"string"},"assistance":{"type":"string"},"looking_for":{"type":"string"},"va_benefits":{"type":"boolean"},"homeless_risk":{"type":"boolean"},"incarcerated":{"type":"boolean"},"divorced":{"type":"boolean"},"looking_change_self_employment":{"type":"boolean"},"low_income":{"type":"boolean"},"housing_situation":{"type":"string"},"satisfied_income":{"type":"boolean"},"aspired_education":{"type":"string"},"education_training_info":{"type":"string"}}},"outcomes":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"uuid":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"archived":{"type":"boolean"},"complete":{"type":"boolean"},"updated_at":{"type":"string"},"created_at":{"type":"string"},"completed_at":{"type":"string"},"goals":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"updated_at":{"type":"string"},"created_at":{"type":"string"},"completed_at":{"type":"string"},"actions":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"resources":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"resource_type":{"type":"string"}}}}}}}}}}}}}}}},"securitySchemes":{"accessCode":{"type":"oauth2","flows":{"authorizationCode":{"authorizationUrl":"http://example.com/oauth/auth","tokenUrl":"http://example.com/oauth/token","scopes":{"get:write":"allows modifying resources","set:read":"allows reading resources"}}}}}}}