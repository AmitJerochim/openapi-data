{"openapi":"3.0.0","info":{"title":"Sunrise API","version":"1.0.0-oas3","description":"The Sunrise Vouchers Service enables Sunrise to create and\ncancel vouchers in our platform, it is also responsible of\nnotifying Sunrise when any of those vouchers has been redeemed.\n","contact":{"email":"paula@melodyvr.com"}},"paths":{"/vouchers":{"post":{"tags":["Vouchers"],"summary":"Creates a voucher in the Melody system and returns the new code","description":"Submit a request to this endpoint creates a new voucher\nwith status `allocated`.\n","parameters":[{"in":"header","name":"x-api-key","description":"API Key provided by Melody to grant access to this API","required":true,"schema":{"type":"string"}}],"requestBody":{"required":false,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewVoucherRequest"}}}},"responses":{"200":{"description":"Returns a valid voucher code","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseVoucher"}}}},"400":{"description":"Bad request (missing params)"},"401":{"description":"Authorization information is missing or invalid"},"5XX":{"description":"Unexpected error"}}}},"/vouchers/{code}":{"delete":{"tags":["Vouchers"],"summary":"Removes a voucher from the Melody system","description":"Submit a request to this endpoint to cancel a voucher, setting its\nstatus to `cancelled`. That will either prevent the code to be\nredeemed or automatically cancel any subscription the voucher has been\nexchanged for.\n","parameters":[{"in":"header","name":"x-api-key","description":"API Key provided by Melody to grant access to this API","required":true,"schema":{"type":"string"}},{"in":"path","name":"code","description":"voucher code previously created through POST /vouchers","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Returns message confirming voucher deletion","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseDeleteVoucher"}}}},"400":{"description":"Invalid voucher code"},"401":{"description":"Authorization information is missing or invalid"},"5XX":{"description":"Unexpected error"}}}}},"components":{"schemas":{"NewVoucherRequest":{"type":"object","properties":{"months_count":{"type":"integer","example":6}}},"ResponseVoucher":{"type":"object","properties":{"code":{"type":"string","example":"Diel5i2lcRlsqpo2d990"},"status":{"type":"string","enum":["allocated"]},"created_at":{"type":"string","format":"date-time","example":"2019-07-31T11:11:11.001Z"},"appDeepLinkUrl":{"type":"string","example":"https://myaccount.melodyvr.com/redeem/3ncrypt3v0uch3c0d3"}}},"ResponseDeleteVoucher":{"type":"object","properties":{"code":{"type":"string","example":"Diel5i2lcRlsqpo2d990"},"status":{"type":"string","enum":["cancelled"]},"deleted_at":{"type":"string","format":"date-time","example":"2019-07-31T11:11:11.001Z"}}}}}}