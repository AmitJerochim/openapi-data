penapi: 3.0.0
info:
  version: "0.9"
  title: 'KLA-API-v1'
  description: 'API voor UitrustingApp'
security:
  - bearerAuth: []
paths:
  /info:
    get:
      summary: Ophalen van algemene info van de API.
      description: Ophalen van algemene info van de API.
      tags:
        - Public
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Info'
  /afbeeldingen/{afbeeldingId}:
    get:
      summary: Ophalen van een afbeelding van een product
      description: Ophalen van een afbeelding van een product. De afbeelding wordt gecached.
      tags:
        - Public
      parameters:
        - name: afbeeldingId
          in: path
          required: true
          description: ID van de afbeelding
          schema:
            type: number
            default: 30
      responses:
        '200':
          description: OK
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
  /afbeeldingen/{afbeeldingId}/thumbnail:
    get:
      summary: Ophalen van een thumbnail afbeelding van een product
      description: Ophalen van een thumbnail afbeelding van een product. De thumbnail afbeelding wordt gecached.
      tags:
        - Public
      parameters:
        - name: afbeeldingId
          in: path
          required: true
          description: ID van de thumbnail afbeelding
          schema:
            type: number
            default: 30
      responses:
        '200':
          description: OK
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
  /havenarbeiders/ik:
    get:
      summary: Ophalen details havenarbeider
      description: Ophalen details havenarbeider voor de gebruiker die is ingelogd.
      tags:
        - Secure
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Havenarbeider'
  /bestellingen/mijn:
    get:
      summary: Overzicht van mijn afgeronde en lopende bestellingen.
      description: De laatste 10 afgeronde en de laatste 10 lopende bestellingen.
      tags:
        - Secure
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bestellingen'
    post:
      summary: Aanmaken van een bestelling
      tags:
        - Secure
      requestBody:
        description: Command voor het aanmaken van een bestelling
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBestelling'
      responses:
        '201':
          description: Created
  /bestellingen/mijn/lopende:
    get:
      summary: Overzicht van mijn lopende bestellingen.
      description: De laatste 10 lopende bestellingen.
      tags:
        - Secure
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Bestelling'
  /bestellingen/mijn/afgeronde:
    get:
      summary: Overzicht van mijn afgeronde bestellingen.
      description: De laatste 10 afgeronde bestellingen.
      tags:
        - Secure
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Bestelling'
  /bestellingen/mijn/lopende/{nrbestelbon}:
    get:
      summary: Detail van een lopende bestellingen.
      description: Detail van een lopende bestellingen.
      tags:
        - Secure
      parameters:
        - name: nrbestelbon
          in: path
          required: true
          description: nrbestelbon van het detail
          schema:
            type: number
            default: 6487945
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BestellingDetail'
  /bestellingen/mijn/afgeronde/{nrbestelbon}:
    get:
      summary: Detail van een afgeronde bestellingen.
      description: Detail van een afgeronde bestellingen.
      tags:
        - Secure
      parameters:
        - name: nrbestelbon
          in: path
          required: true
          description: nrbestelbon van het detail
          schema:
            type: number
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BestellingDetail'
  /bestellingen/mijn/aftehalen/qr:
    get: 
      summary: Geeft een hash terug van de bestelling die klaarstaat om op te halen. Van deze hash dient er een QR-code gemaakt te worden. De lockers verwachten ook een gehashte waarde. Indien er geen bestelling klaar staat om af te halen, zal er een lege json worden teruggekoppeld met code 200.
      description: Hash van een af te halen bestelling.
      tags:
        - Secure
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BestellingQR'
  /tellers/mijn:
    get:
      summary: Ophalen van het saldo van de kledijtellers.
      description: Ophalen van het saldo van de kledijtellers.
      tags:
        - Secure
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Teller'
  /kledijmaten/mijn:
    get:
      summary: Ophalen van mijn kledijmaten.
      description: Ophalen van mijn kledijmaten.
      tags:
        - Secure
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Kledijmaat'  
  /afhaalpunten:
    get:
      summary: Ophalen van alle afhaalpunten.
      description: Ophalen van alle afhaalpunten. Het eerste afhaalpunt in de lijst (ID 1) is kledijbedeling en de andere afhaalpunten zijn allemaal lockers.
      tags:
        - Secure
      deprecated: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Afhaalpunt'  
  /afhaalpunten/mijn:
    get:
      summary: Ophalen van mijn afhaalpunten.
      description: Ophalen van mijn afhaalpunten. Het eerste afhaalpunt in de lijst (ID 1) is kledijbedeling en de andere afhaalpunten zijn allemaal lockers.
      tags:
        - Secure
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Afhaalpunt'  
  /rubrieken/mijn:
    get:
      summary: Ophalen van de rubrieken die producten bevatten én gekoppeld zijn aan de havenarbeider.
      description: Ophalen van de rubrieken
      deprecated: true
      tags:
        - Secure
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Rubriek'
  /rubrieken/mijn/{rubriek}/subrubrieken:
    get:
      summary: Ophalen van de subrubrieken (Cached op apigee?)
      description: Ophalen van de subrubrieken
      deprecated: true
      tags:
        - Secure
      parameters:
        - name: rubriek
          in: path
          required: true
          description: rubriek
          schema:
            type: string
        - name: subrubrieken
          in: query
          required: false
          description: subrubrieken
          schema:
            type: array
            items:
              type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Subrubriek'
  /rubrieken/mijn/{rubriek}/producten:
    get:
      summary: Ophalen van de producten binnen een rubriek
      description: Ophalen van de producten binnen een rubriek
      tags:
        - Secure
      parameters:
        - name: rubriek
          in: path
          required: true
          description: rubriek
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'
  /rubrieken/mijn/{rubriek}/producten/{soort}/{type}:
    get:
      summary: Ophalen van product detail.
      description: Ophalen van product detail.
      tags:
        - Secure
      parameters:
        - name: rubriek
          in: path
          required: true
          description: rubriek
          schema:
            type: string
        - name: soort
          in: path
          required: true
          description: soort
          schema:
            type: number
        - name: type
          in: path
          required: true
          description: type
          schema:
            type: number
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductDetail'
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
  schemas:
    Info:
      type: object
      title: Info
      description: Algemene info van de API
      properties:
        status: 
          type: string
          description: Geeft aan of de service UP is
        androidAppVersion:
          type: string
          description: Huidige android version
        androidOtpAppVersion:
          type: string
          description: Geeft aan welke versie we verwachten van de OTP app op android.
          example: 1.0.1
        iosAppVersion:
          type: string
          description: Huidige ios version
        iosOtpAppVersion:
          type: string
          description: Geeft aan welke versie we verwachten van de OTP app op iOS.
          example: 1.0.1
        faq:
          type: string
          description: Link naar de FAQ
        privacy:
          type: string
          description: Link naar de privacy
        algvw:
          type: string
          description: Link naar de algemene voorwaarden
        siwhaTelefoon:
          type: string
          description: Geeft de telefoonnummer SIWHA terug.
          example: 03 541 00 23
        melding:
          allOf:
            - $ref: '#/components/schemas/Melding'
    Melding:
      type: object
      properties:
        onderwerp:
          type: string
          description: ONDERWERP
          example: Onderhoud applicatie
        boodschap:
          type: string
          description: BOODSCHAP
          example: >-
            Op 4 juni 2018 doen wij onderhoudswerken aan onze infrastructuur.
            Hierdoor is de mobile app onbereikbaar.
    Bestellingen: 
      type: object
      title: Bestellingen
      description: Lijst van afgeronde en lopende bestellingen
      properties:
        afgeronde:
          type: array
          description: Lijst van de 10 laatste afgeronde bestellingen
          items:
            $ref: '#/components/schemas/Bestelling'
        lopende:
          type: array
          description: Lijst van de 10 laatste afgeronde bestellingen
          items:
            $ref: '#/components/schemas/Bestelling'
    BestellingQR:
      type: object
      title: QR code van een bestelling
      description: QR code van een bestelling
      properties:
        qrcode:
          type: string
          description: QR
          example: '49b087a1c47b9e74ded5191962dd1735'
    Bestelling:
      type: object
      title: Bestelling
      description: Record bestelling
      properties:
        aantal: 
          type: number
          description: Aantal artikelen
          example: 2
        bestelStatus:
          type: string
          description: Status van de bestelling
          example: "Bestelling af te halen in locker OF afgerond OF ..."
        datumBestel:
          type: string
          format: date
          description: DATUM_INSERT
          example: '18/01/2018 13:10:00'
        nrbestelbon:
          type: number
          description: Nummer van de bestelbon
          example: 766805
    BestellingDetail:
      type: object
      title: Bestelling
      description: Record bestelling
      properties:
        aantal: 
          type: number
          description: Aantal artikelen
          example: 2
        bestelStatus:
          type: string
          description: Status van de bestelling
          example: "Bestelling af te halen in locker OF afgerond OF ..."
        datumBestel:
          type: string
          format: date
          description: DATUM_INSERT
          example: '18/01/2018 13:10:00'
        nrbestelbon:
          type: number
          description: Nummer van de bestelbon
          example: 766805
        artikelen:
          type: array
          description: Lijst van de bestelde artikelen.
          items:
            $ref: '#/components/schemas/Artikel'
    Teller: 
      type: object
      title: Tellers saldo
      description: Tellers saldo
      properties:
        idKledijteller:
          type: number
          description: Id van de kledijteller. Alles verschillende van 0 is een aparte teller.
        kledijtellerOmschr:
          type: string
          description: Omschrijving van de teller
        saldo:
          type: number
          description: Saldo van de teller
    Kledijmaat:
      type: object
      title: Kledij maten
      description: Kledij maten
      properties:
        omschrijving: 
          type: string
          description: Omschrijving van het artikel
        maat: 
          type: string
          description: De eigenlijke maat voor het artikel
    MogelijkeKledijmaat:
      type: object
      title: Mogelijke Kledij maten
      description: Kiesbare maat voor een product
      properties:
        maat: 
          type: string
          description: Een mogelijke kledijmaat voor het artikel
    Rubriek:
      type: object
      title: Rubrieken
      description: Ophalen van de mogelijke rubrieken. Wij zullen deze cachen op onze proxy layer.
      properties:
        rubriek:
          type: string
          description: rubriek
          example: HOOFD
    Subrubriek:
      type: object
      title: Subrubriek
      description: Ophalen van de mogelijke subrubrieken.
      properties:
        subrubriek:
          type: string
          description: subrubriek
          example: Winter
        aantal:
          type: number
          description: aantal producten per subrubriek
    Product:
      type: object
      title: Product
      description: Product met zijn eigenschappen
      allOf:
        - type: object
          properties:
            soort:
              type: number
              description: Soort (deel van de PK, samen met werkboek).
            type:
              type: number
              description: Soort (deel van de PK, samen met werkboek).
            omschrijving:
              type: string
              description: Omschrijving van het product.
            punten:
              type: number
              description: De prijs in punten.
            prijsInTaken:
              type: number
              description: De prijs in taken.
            aparteTellersBeschikbaar:
              type: boolean
              description: Geeft aan of er aparte tellers zijn
            thumbnail:
              type: string
              description: thumbnail naar het product
            subrubriek:
              type: string
              description: subrubriek waartoe het product hoort
    Artikel:
      type: object
      allOf:
        - type: object
          properties:
            omschrijving:
              type: string
              description: Omschrijving van het bestelde product.
            maat:
              type: string
              description: Gekozen maat.
            aantal:
              type: number
              description: Aantal.
            punten:
              type: number
              description: Hoeveelheid betaalde punten.
            taken:
              type: number
              description: Hoeveelheid betaalde taken.
    Thumbnail:
      type: object
      title: Thumbnail
      description: Thumbnail
      properties:
        link:
          type: string
          description: Link naar afbeelding van een product. Bij het ophalen zullen wij de nodige caching voorzien op de proxy laag.
    Afhaalpunt:
      type: object
      title: Afhaalpunt
      description: afhaalpunt
      properties:
        id:
          type: number
          description: Unieke ID om afhaalpunt te specifiëren
        omschrijving:
          type: string
          description: Naam van het afhaalpunt
        adres:
          type: string
          description: Adres van het afhaalpunt
        openingsuren:
          type: string
          description: Openingsuren van het afhaalpunt
        aantalGroteLockers:
          type: number
          description: Aantal grote lockers op afhaalpunt
        aantalKleineLockers:
          type: number
          description: Aantal kleine lockers op afhaalpunt
    CreateBestelling:
      type: object
      title: CreateBestellingCommand
      description: Commando om een bestelling aan te maken
      properties:
        idAfhaalpunt:
          type: number
          description: ID van het gekozen afhaalpunt
        email:
          type: string
          description: Email adres van de HA. 
        artikelen:
            type: array 
            items:
              $ref: '#/components/schemas/CreateBestellingArtikel'   
      required:
        - datumAanvraag
        - idAfhaalpunt
        - artikelen
    CreateBestellingArtikel:
      type: object
      title: CreateBestellingArtikelCommand
      description: Commando om een artikel van een bestelling mee te geven
      properties:
        soort:
          type: number
          description: Soort artikel
        type:
          type: number
          description: Type artikel
        maat:
          type: string
          description: Geselecteerde maat voor artikel
        aantalStuks:
          type: number
          description: Aantal geselecteerde stuks van het artikel
      required:
        - soort
        - type
        - maat
        - aantalStuks
    ProductDetail:
      type: object
      title: Product
      description: Product met zijn eigenschappen
      allOf:
        - $ref: '#/components/schemas/Product'
        - type: object
          properties:
            maat:
              type: string
              description: Mijn laatst gekende maat (kan leeg zijn)
            mogelijkeKledijmaten:
              type: array 
              items:
                $ref: '#/components/schemas/MogelijkeKledijmaat' 
            thumbnails:
              type: array 
              items:
                $ref: '#/components/schemas/Thumbnail'   
            afbeeldingen:
              type: array 
              items:
                $ref: '#/components/schemas/Thumbnail'  
            aparteTellers:
              type: array 
              items:
                $ref: '#/components/schemas/Teller'
            onderhoudsvoorschriften:
              type: string
            wasvoorschriften:
              type: string
            toepassing:
              type: string
            beschikbareMaten:
              type: string
            samenstelling:
              type: string
            maattabel:
              type: string
              description: Optioneel - CDN link naar maattabel (pdf)
            wasvoorschrift:
              type: string
              description: Optioneel - CDN link naar wasvoorschrift (pdf)
            subrubriek:
              type: string
              description: subrubriek waartoe het product hoort
    Havenarbeider:
      title: Havenarbeider
      description: Havenarbeider Personalia
      type: object
      allOf:
        - type: object
          properties:
            werkboekId:
              type: integer
              format: int64
              description: WERKBOEK
              example: 20000
            achternaam:
              type: string
              description: NAAM
              example: JANSSEN
            voornaam:
              type: string
              description: VOORNAAM
              example: JAN
            nationaliteit:
              type: string
              description: NATIONALITEIT
              pattern: '^[A-Z]{3,3}$'
              example: BEL
            geslacht:
              type: string
              description: GESLACHT
              enum:
                - MALE
                - FEMALE
            rijksregisterNr:
              type: integer
              format: int64
              description: RIJKSREGISTERNR
              pattern: '^\d{11}$'
              example: 12345678901
            barcodeKaart:
              type: string
              description: BARCODE_ERKENNINGSKAART
              example: '123456789012'
            geboorteDatum:
              type: string
              description: GEBOORTE_DATUM
              format: date
              example: 31/01/1970
            geboortePostcode:
              type: string
              description: GEBOORTE_POSTCODE
              example: '9120'
            geboorteGemeente:
              type: string
              description: GEBOORTE_GEMEENTE
              example: BEVEREN-WAAS
            geboorteLand:
              type: string
              description: GEBOORTE_LAND
              pattern: '^[A-Z]{3,3}$'
              example: BEL
            kaartType:
              type: string
              description: KAART_TYPE
              enum:
                - ERKENNINGSKAART
                - GELEGENHEIDSKAART
                - INSCHRIJVINGSKAART
            kaartKleur:
              type: string
              description: KAART_KLEUR (rgb)
              example: '300'
            controleGetal:
              type: integer
              description: CONTROLE_GETAL
              example: 95
            barcodeErkenningskaartTekst:
              type: string
              description: BARCODE_ERKENNINGSKAART_TEKST
              example: 41753-781-00-43
            kaartFotoKleur:
              type: string
              description: KAART_FOTO_KLEUR (rgb)
              example: '255,140,0'
            woonWerkZichtbaar:
              type: boolean
              description: Geeft aan of er bij een adreswijziging een veld KM zichtbaar is.
              example: true
        - $ref: '#/components/schemas/ContactDetails'
        - $ref: '#/components/schemas/Adres'
        - $ref: '#/components/schemas/WerkDetails'       
    Adres:
      type: object
      properties:
        straat:
          type: string
          description: STRAAT
          example: ANTWERPSESTEENWEG
        huisnr:
          type: string
          description: HUISNR
          example: '264'
        busnr:
          type: string
          description: BUSNR
          example: '2'
        postcode:
          type: string
          description: POSTCODE
          example: '2070'
        gemeente:
          type: string
          description: GEMEENTE
          example: ANTWERPEN
        land:
          type: string
          description: LAND
          pattern: '^[A-Z]{3,3}$'
          example: BEL
    WerkDetails:
      type: object
      properties:
        categorie:
          type: integer
          description: CATEGORIE
          example: 8
        categorieOmschrijving:
          type: string
          description: CATEGORIE_OMSCHRIJVING
          example: RANG A - STUKGOEDMARKEERDER
        categorieAfkorting:
          type: string
          description: CATEGORIE_AFKORTING
          example: DA
        functie:
          type: integer
          description: FUNCTIE
          example: 2
        firma:
          type: integer
          description: FIRMA
          example: 100
        departement:
          type: integer
          description: DEPT
          example: 1
        firmaNaam:
          type: string
          description: FIRMA_NAAM
          example: Zuidnatie
        aanwervingszitting:
          type: integer
          description: AANWERVINGSZITTING
          example: 3
        omschrijvingStage:
          type: string
          description: OMSCHRIJVING_STAGE
          example: Inschrijving
    ContactDetails:
        type: object
        properties:
          telefoon:
            type: string
            description: TELEFOON
            pattern: '^(\+\d{2})(\d{8,9})$'
            example: '+3232219711'
          gsm:
            type: string
            description: GSM
            pattern: '^(\+31)(6)(\d{8})$|^(\+32)(4)(\d{8})$'
            example: '+32412345678'
          email:
            type: string
            description: EMAIL
            pattern: ^\S+@\S+\.\S+$
            example: example@gmail.com
# Added by API Auto Mocking Plugin
servers:
  - url: 'https://api.cepa.be/kla/v1'
    description: Production
  - url: 'https://api-uat.cepa.be/kla/v1'
    description: Acceptance
  - url: 'https://api-dev.cepa.be/kla/v1'
    description: Development