penapi: 3.0.0
# Added by API Auto Mocking Plugin
servers:
# Added by API Auto Mocking Plugin
# Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/shuchirb/VehicleMgmt_V2/1.0.0
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/shuchirb/customer/1.0.0
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/shuchirb/VehicleManagement/1.0.0
info:
  description: This API is for Vehicle Management
  version: "1.0.0"
  title: Vehicle Management
#Apply the security globally to all operations
security:
  - bearerAuth: []

paths:
  /v1/customer/vehicles:
    get:
      tags:
        - vehicle
      summary: Get the list of all vehicles
      operationId: getAllVehicles
      description: |
       You can list all the vehicles associated with the logged in customer.
      responses:
        '200':
          description: search results matching criteria
          content:
            application/json:
              schema:
                type: array
                items: 
                  $ref: '#/components/schemas/VehicleProfileWithStats'
        '400':
          description: Bad request or Service internal failure.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access token is missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      tags:
        - vehicle
      summary: Add a new vehicle
      operationId: addVehicle
      description: Will add a new vehicle for the customer logged in.
      requestBody:
        content:
          application/json:
            schema:
                $ref: '#/components/schemas/CreateVehicleProfileRequest'
        description: Create customer profile
      responses:
        '201':
          description: Customer added successfully
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/CreateVehicleProfileResponse'
        '400':
          description: Bad request or Service internal failure.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access token is missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  
  /v1/customer/vehicle/smart-skills/{vin}:
    get:
      tags:
        - smart skills
      summary: Get the smart skills for the requested vehicle
      description: |
        You can list all the smart skills configured associated ewith the VIN & loggedin user.
      operationId: getSmartskills
      parameters:
        - name: vin
          in: path
          description: VIN of the car.
          required: true
          style: simple
          explode: false
          schema:
            type: string
      responses:
        '200':
          description: Search results matching criteria
          content:
            application/json:
              schema:
                type: array
                items: 
                  $ref: '#/components/schemas/SmartSkills'
        '400':
          description: Bad request or Service internal failure.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access token is missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /v1/customer/vehicle/smart-skills/{vehicle_smart_skill_id}:
    put:
      tags:
        - smart skills
      summary: Update the smart skills for the requested vehicle
      description: |
        You can add/update smart-skill for a vehicle. 
      operationId: putSmartskills
      parameters:
        - name: vehicle_smart_skill_id
          in: path
          description: VIN of the car.
          required: true
          style: simple
          explode: false
          schema:
            type: string
      requestBody:
        description: Vehicle to update
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSmartSkills'
      responses:
        '200':
          description: Smart skills updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateSmartSkillsResponse'
        '400':
          description: Bad request or Service internal failure.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access token is missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /v1/customer/vehicle/smart-skills/:  
    post:
      tags:
        - smart skills
      summary: Add the smart skills for the requested vehicle
      description: |
        You can add smart-skill for a vehicle. 
      operationId: AddSmartskills
      requestBody:
        description: Vehicle to update
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfiguredSmartSkills'
      responses:
        '200':
          description: Samrt skills updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfiguredSmartSkillsResponse'
        '400':
          description: Bad request or Service internal failure.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access token is missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse' 
 
  /v1/customer/vehicles/{vin}:  
    get:
      tags:
        - vehicle
      summary: Get the requested vehicle details
      operationId: getVehicle
      description: |
       You can list the details of the vehicle associated with the VIN & logged in user.
      parameters:
        - in: path
          name: vin
          description: VIN of the car.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: search results matching criteria
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/VehicleProfileWithStats'
        '400':
          description: Bad request or Service internal failure.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access token is missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      tags:
        - vehicle
      summary: Update the vehicle
      operationId: updateVehicle
      description: Will update the vehicle details.
      parameters:
        - in: path
          name: vin
          description: VIN of the car.
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateVehicleProfile'
        description: Vehicle to update
      responses:
        '200':
          description: Vehicle updated Successfully
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/UpdateVehicleProfile'
        '400':
          description: Bad request or Service internal failure.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access token is missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      tags:
        - vehicle
      summary: Delete a vehicle
      operationId: deleteVehicle
      description: Will delete the vehicle.
      parameters:
        - in: path
          name: vin
          description: VIN of the car.
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Vehicle deleted Successfully
        '200':
          description: Vehicle deleted Successfully
        '400':
          description: Bad request or Service internal failure.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access token is missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /v1/customer/vehicles/events:
    post:
      tags:
        - vehicle
      summary: Create vehicle events
      operationId: addVehicleEvent
      description: Will add an event for a vehicle
      requestBody:
        content:
          application/json:
            schema:
                $ref: '#/components/schemas/VehicleEvents'
        description: Create customer profile
      responses:
        '201':
          description: Customer added successfully
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/VehicleEvents'
        '400':
          description: Bad request or Service internal failure.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access token is missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
components:
  securitySchemes:
    bearerAuth:            # arbitrary name for the security scheme
      type: http
      scheme: bearer
      bearerFormat: JWT    # optional, arbitrary value for documentation purposes
  schemas:
    SmartSkills:
      required:
        - smart_skill_rule_id
        - default_rule_desc
        - default_threshold_value
        - smart_skill_status
      properties:
        vehicle_smart_skill_id:
          type: integer
          example: 1
        vin:
          type: string
          example: 1234ABC2
        smart_skill_rule_id:
          type: integer
          example: 12345
        default_rule_desc:
          type: string
          example: 'Battery Level'
        default_threshold_value:
          type: integer
          example: 20
        smart_skill_status:
          type: boolean
          default: false
        custom_threshold_value:
          type: integer
          example: 30
        custom_rule_description:
          type: string
          example: 'Low Battery Level'
    ConfiguredSmartSkills:
      required:
        - vin
        - smart_skill_rule_id
        - custom_rule_description
        - custom_threshold_value
        - smart_skill_status
      properties:
        vin:
          type: string
          example: 567AB123
        smart_skill_rule_id:
          type: integer
          example: 12345
        custom_threshold_value:
          type: integer
          example: 30
        custom_rule_description:
          type: string
          example: 'Low Battery Level'
        smart_skill_status:
          type: boolean
          example: true
    ConfiguredSmartSkillsResponse:
      required:
        - vin
        - smart_skill_rule_id
        - custom_rule_description
        - custom_threshold_value
        - smart_skill_status
      properties:
        vin:
          type: string
          example: 567AB123
        vehicle_smart_skill_id:
          type: integer
          example: 1
        smart_skill_rule_id:
          type: integer
          example: 12345
        custom_threshold_value:
          type: integer
          example: 30
        custom_rule_description:
          type: string
          example: 'Low Battery Level'
        smart_skill_status:
          type: boolean
          example: true
    UpdateSmartSkills:
      required:
        - vin
        - smart_skill_rule_id
        - custom_rule_description
        - custom_threshold_value
        - smart_skill_status
      properties:
        vin:
          type: string
          example: 567AB123
        smart_skill_rule_id:
          type: integer
          example: 12345
        custom_threshold_value:
          type: integer
          example: 30
        custom_rule_description:
          type: string
          example: 'Low Battery Level'
        smart_skill_status:
          type: boolean
          example: true
    UpdateSmartSkillsResponse: 
      required:
        - vin
        - vehicle_smart_skill_id
        - smart_skill_rule_id
        - custom_rule_description
        - custom_threshold_value
        - smart_skill_status
      properties:
        vin:
          type: string
          example: 567AB123
        vehicle_smart_skill_id:
          type: integer
          example: 2
        smart_skill_rule_id:
          type: integer
          example: 12345
        custom_threshold_value:
          type: integer
          example: 30
        custom_rule_description:
          type: string
          example: 'Low Battery Level'
        smart_skill_status:
          type: boolean
          example: true
    CreateVehicleProfileRequest:
      type: object
      required:
        - vin
      properties:
        vin:
          type: string
          example: JM1NB3538Y0153757
        nissan_connect_sync_status:
          type: boolean
          example: true
        default_vehicle:
          type: boolean
          example: true
        model:
          type: string
          example: NISSAN Micra
        model_year:
          type: number
          example: 2009
        transmission_type:
          type: string
          enum: [MANUAL,AUTOMATIC]
        fuel_type:
          type: string
          enum: [PETROL,DIESEL,EV,HEV,PHEV]
        purchase_date:
          type: string
          format: date
          example: '2017-07-21'
        color:
          type: string
          example: Red
        battery_capacity:
          type: number
          example: 140
        horse_power:
          type: number
          format: integer
          example: 150
        model_varient:
          type: string
          example: acenta
    CreateVehicleProfileResponse:
      type: object
      required:
        - vin
      properties:
        vehicle_detail_id:
          type: number
          example: 12345
        nissan_gid_cid:
          type: string
          example: 567AB123
        vin:
          type: string
          example: JM1NB3538Y0153757
        nissan_connect_sync_status:
          type: boolean
          example: true
        default_vehicle:
          type: boolean
          example: true
        model:
          type: string
          example: NISSAN Micra
        model_year:
          type: number
          example: 2009
        transmission_type:
          type: string
          enum: [MANUAL,AUTOMATIC]
        fuel_type:
          type: string
          enum: [PETROL,DIESEL,EV,HEV,PHEV]
        purchase_date:
          type: string
          format: date
          example: '2017-07-21'
        color:
          type: string
          example: Red
        battery_capacity:
          type: number
          example: 140
        horse_power:
          type: number
          format: integer
          example: 150
        model_varient:
          type: string
          example: acenta
    UpdateVehicleProfile:
      type: object
      required:
        - vin
      properties:
        vehicle_detail_id:
          type: number
          example: 12345
        nissan_gid_cid:
          type: string
          example: 567AB123
        vin:
          type: string
          example: JM1NB3538Y0153757
        nissan_connect_sync_status:
          type: boolean
          example: true
        default_vehicle:
          type: boolean
          example: true
        model:
          type: string
          example: NISSAN Micra
        model_year:
          type: number
          example: 2009
        transmission_type:
          type: string
          enum: [MANUAL,AUTOMATIC]
        fuel_type:
          type: string
          enum: [PETROL,DIESEL,EV,HEV,PHEV]
        purchase_date:
          type: string
          format: date
          example: '2017-07-21'
        color:
          type: string
          example: Red
        battery_capacity:
          type: number
          format: integer
          example: 140
        horse_power:
          type: number
          format: integer
          example: 150
        model_varient:
          type: string
          example: acenta
    VehicleProfileWithStats:
      type: object
      required:
        - vin
      properties:
        vehicle_detail_id:
          type: number
          example: 12345
        nissan_gid_cid:
          type: string
          example: 567AB123
        vin:
          type: string
          example: JM1NB3538Y0153757
        nissan_connect_sync_status:
          type: boolean
          example: true
        default_vehicle:
          type: boolean
          example: true
        model:
          type: string
          example: NISSAN Micra
        model_year:
          type: number
          example: 2009
        transmission_type:
          type: string
          enum: [MANUAL,AUTOMATIC]
        fuel_type:
          type: string
          enum: [PETROL,DIESEL,EV,HEV,PHEV]
        purchase_date:
          type: string
          format: date
          example: '2017-07-21'
        color:
          type: string
          example: Red
        battery_capacity:
          type: number
          format: integer
          example: 140
        horse_power:
          type: number
          format: integer
          example: 150
        model_varient:
          type: string
          example: acenta
        vehicle_stat:
          type: object
          $ref: '#/components/schemas/VehicleStats'
    VehicleStats:
      type: object
      properties:
        battery_level:
          type: number
          format: integer
          example: 30
        temperature:
          type: number
          format: integer
          example: 15
        mileage:
          type: number
          format: integer
          example: 130
        car_status :
          type: string
          enum: [LOCKED,UNLOCKED]
        charging_status:
          type: string
          enum: [CHARGING,NOTCHARGING]
        distance since last charge   :
          type: number
          format: integer
          example: 130
        tyre_pressure   :
          type: object
          properties:
            front_right:
              type: number
              format: float
              example: 30.1
            front_left:
              type: number
              format: float
              example: 27.9
            rear_right:
              type: number
              format: float
              example: 20.6
            rear_left:
              type: number
              format: float
              example: 28.3
    ErrorResponse:
      type: object
      properties:
        code:
          type: string
          example: E000001
          description: 'Notification code. First character indicates severity (E,W,I).'
        message:
          type: string
          example: Something is invalid
          description: "Description of the error or information notification. Where the
          response is 2xx, it's a notification with informational details about
          this response."
        uuid:
          type: string
          example: aadde-ddddee-eeeedd-eeeedd
          description: Unique identifier for this notification
        timestamp:
          type: string
          format: date-time
          example: '2017-10-12T20:38:45.408Z'
          description: Timestamp of the notification
    VehicleEvents:
      required:
        - vin
        - event_type_id
        - event_payload
      properties:
        vin:
          type: string
          example: 567AB123
        event_type_id:
          type: integer
          example: 1
        event_payload:
          properties:
            data:
              type: number
              format: integer
              example: 30
            event_date:
              type: string
              format: date
              example: "2001-04-19"