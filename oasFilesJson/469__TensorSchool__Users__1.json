{"openapi":"3.0.0","info":{"version":"1","title":"Социальная сеточка","description":"Создание пользователя, авторизация, работа с данными пользователя, создание/чтение сообщений, установление связей между пользователями"},"paths":{"/user/create":{"post":{"summary":"Создание пользователя с минимальными данными","requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"login":{"type":"string"},"password":{"type":"string","format":"password"}}}}}},"responses":{"201":{"description":"ОК","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["User"]}},"/user/read/{id}":{"get":{"summary":"Чтение данных пользователя","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["User"]}},"/user/update":{"post":{"summary":"Обновление данных пользователя","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"responses":{"202":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["User"]}},"/user/upload_photo":{"post":{"summary":"Загрузка фото для профайла","requestBody":{"content":{"image/png":{"schema":{"type":"string","format":"binary"}}}},"responses":{"200":{"description":"OK"}},"tags":["User"]}},"/user/login":{"post":{"summary":"Авторизация пользователя","requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"login":{"type":"string"},"password":{"type":"string","format":"password"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"401":{"description":"Неверный логин/пароль"}},"tags":["User"]}},"/user/logout":{"get":{"summary":"Выход текущего пользователя","responses":{"200":{"description":"ОК"}},"tags":["User"]}},"/user/current":{"get":{"summary":"Возвращает текущего авторизованного пользователя\n","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["User"]}},"/user_link/list":{"get":{"summary":"Возвращает список друзей пользователя. По умолчанию запрашивает 10 чел, есть навигация\n","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArrayOfLinks"}}}}},"tags":["UserLink"]}},"/user_link/create":{"post":{"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"user_id":{"type":"integer","description":"Пользователь, с которым хотим установить свзяь\n"},"link_type":{"$ref":"#/components/schemas/UserLinkType"}}}}}},"responses":{"201":{"description":"ОК","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLink"}}}}},"tags":["UserLink"]}},"/user_link/update":{"post":{"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"id":{"type":"integer","description":"Идентификатор изменяемой связи\n"},"user_to":{"type":"integer","description":"Пользователь, с которым хотим установлена свзяь\n"},"link_type":{"$ref":"#/components/schemas/UserLinkType"}}}}}},"responses":{"202":{"description":"ОК","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLink"}}}}},"tags":["UserLink"]}},"/user_link/delete":{"post":{"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"user":{"type":"integer"}}}}}},"responses":{"204":{"description":"ОК"}},"tags":["UserLink"]}},"/message/addressee_list":{"get":{"summary":"Список адресатов сообщений с навигацией\n","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArrayOfUsers"}}}}},"tags":["Message"]}},"/message/list/{addressee}":{"get":{"summary":"Возвращает список сообщений пользователя. По умолчанию запрашивает 10 чел, есть навигация\n","parameters":[{"name":"addressee","description":"Адресат сообщения\n","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArrayOfMessages"}}}}},"tags":["Message"]}},"/message/create":{"post":{"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Message"}}}},"responses":{"201":{"description":"ОК","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLink"}}}}},"tags":["Message"]}},"/message/update":{"post":{"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Message"}}}},"responses":{"202":{"description":"ОК","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}},"tags":["Message"]}},"/message/delete":{"post":{"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"message_id":{"type":"integer"}}}}}},"responses":{"204":{"description":"ОК"}},"tags":["Message"]}},"/photo/list/{user_id}":{"get":{"parameters":[{"name":"user_id","description":"Идентификатор пользователя\n","in":"path","required":true,"schema":{"type":"integer"}}],"summary":"Список фоток пользователя\n","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArrayOfPhotos"}}}}},"tags":["Photo"]}},"/photo/upload":{"post":{"requestBody":{"content":{"image/png":{"schema":{"type":"string","format":"binary"}}}},"responses":{"201":{"description":"ОК","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Photo"}}}}},"tags":["Photo"]}},"/photo/delete":{"post":{"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"photo_id":{"type":"integer"}}}}}},"responses":{"204":{"description":"ОК"}},"tags":["Photo"]}}},"components":{"schemas":{"User":{"description":"Информация по пользователю","type":"object","properties":{"id":{"description":"Идентификатор пользователя"},"login":{"description":"Логин пользователя"},"data":{"$ref":"#/components/schemas/Data"},"computed_data":{"$ref":"#/components/schemas/ComputedData"}}},"ArrayOfUsers":{"type":"object","properties":{"user":{"type":"array","items":{"$ref":"#/components/schemas/User"},"default":[]},"message_count":{"type":"integer","default":0},"outcome":{"type":"object","properties":{"has_more":{"description":"флаг наличия записей на следующих страницах","type":"boolean","default":false}},"default":{}}}},"Data":{"description":"Дополнительная информация о пользователе. Формат JSON","type":"object","properties":{"name":{"type":"string"},"birth_date":{"type":"string","format":"date"},"city":{"type":"string"},"family_state":{"type":"string"},"education":{"type":"string"},"job":{"type":"string"}}},"ComputedData":{"description":"Вычисляемые поля на сервере. Только чтение","type":"object","properties":{"last_activity":{"type":"string","format":"datetime"},"photo_ref":{"type":"string","format":"url"}}},"Message":{"description":"Сообщение пользователя","type":"object","properties":{"id":{"type":"integer","description":"Уникальный идентификатор сообщения пользователя"},"author":{"type":"integer","description":"Идентификатор автора"},"addressee":{"type":"integer","description":"Идентификатор адресата сообщения"},"message":{"type":"string","description":"Текст сообщения"},"image":{"type":"string","description":"Ссылка на картинку для новости"}}},"ArrayOfMessages":{"type":"object","properties":{"messages":{"type":"array","items":{"$ref":"#/components/schemas/Message"},"default":[]},"outcome":{"type":"object","properties":{"has_more":{"description":"флаг наличия записей на следующих страницах","type":"boolean","default":false}},"default":{}}}},"UserLink":{"description":"Связи пользователя (друзья и подписчики)","type":"object","properties":{"id":{"type":"integer","description":"Уникальный идентификатор связи"},"user_from":{"type":"integer","description":"Пользователь, инициировавший связь"},"user_to":{"type":"integer","description":"Пользователь, адресат запроса"},"link_type":{"$ref":"#/components/schemas/UserLinkType"}}},"UserLinkType":{"type":"string","description":"Тип связи\n","enum":["friend","subscriber","friendship_request"]},"ArrayOfLinks":{"type":"object","properties":{"user_links":{"type":"array","items":{"$ref":"#/components/schemas/UserLink"},"default":[]}}},"Photo":{"type":"object","description":"Картинка","properties":{"id":{"type":"integer","description":"Уникальный идентификатор картинки\n"},"path":{"type":"string","description":"путь к файлу\n"}}},"ArrayOfPhotos":{"type":"object","properties":{"photos":{"type":"array","items":{"$ref":"#/components/schemas/Photo"},"default":[]},"outcome":{"type":"object","properties":{"has_more":{"description":"флаг наличия записей на следующих страницах\n","type":"boolean","default":false}},"default":{}}}}}},"servers":[{"description":"проверить на тестовой базе","url":"https://tensor-school.herokuapp.com/"}]}