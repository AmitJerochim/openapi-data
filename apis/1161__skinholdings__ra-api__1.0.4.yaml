openapi: 3.0.0
info:
  description: This is a nice API
  version: "1.0.4"
  title: API for Ra project
  contact:
    email: mykyta.mazur@ekingdom.tech
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
tags:
  - name: auth
    description: User Authentication routes
  - name: games
    description: Games Service routes
  - name: util
    description: Client utility routes
  - name: user
    description: User Service routes
paths:
  /v1/auth/resend:
    get:
      tags:
        - auth
      security:
        - bearerAuth: []
      summary: resend verification token
      operationId: resend
      description: resend verification token
      responses:
        '200':
          description: ok
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
  /v1/auth/sign-up:
    post:
      tags:
        - auth
      summary: adds a new user
      operationId: signUp
      description: Adds a new user into the system
      responses:
        '200':
          description: user created
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: The user token.
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewUser'
        description: new user to add
  /v1/auth/sign-in:
    post:
      tags:
        - auth
      summary: sign user in (issue a token)
      operationId: signIn
      description: Sign user into the system
      responses:
        '200':
          description: user signed in
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: The user token.
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignIn'
        description: user login input
  /v1/auth/verify:
    post:
      tags:
        - auth
      summary: Verify a user account
      operationId: verify
      description: Verify a user account
      responses:
        '200':
          description: user verified
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string
                  description: The user verification token.
        description: user account verification input
  /v1/auth/request-recovery:
    post:
      tags:
        - auth
      summary: Request a password recovery
      operationId: recovery
      description: Request a password recovery
      responses:
        '200':
          description: request created
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: The user email.
        description: user password recovery input
  /v1/auth/accept-recovery:
    post:
      tags:
        - auth
      summary: Accept password recovery
      operationId: acceptRecovery
      description: Accept password recovery
      responses:
        '200':
          description: accepted
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string
                  description: The user recovery token.
                password:
                  type: string
                  description: New user password.
        description: user account accept-recovery input
  /v1/games/:
    get:
      tags:
        - games
      summary: Getting paginated games list
      operationId: gamesList
      description: Getting paginated games list
      parameters:
        - in: query
          name: offset
          schema:
            type: integer
          description: The number of items to skip before starting to collect the result set
        - in: query
          name: limit
          schema:
            type: integer
          description: The numbers of items to return
        - in: query
          name: provider
          schema:
            type: string
            example: NetEnt
          description: Games provider name
        - in: query
          name: device
          schema:
            type: string
            enum: [mobile,desktop]
          description: Device type
        - in: query
          name: category
          schema:
            type: string
            example: slots
          description: Game category
        - in: query
          name: orderDirection
          schema:
            type: string
            enum: [ASC,DSC]
        - in: query
          name: orderBy
          schema:
            type: string
            example: name
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  games:
                    type: array
                    items:
                      $ref: '#/components/schemas/GamesListItem'
                  count:
                    type: integer
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
  /v1/games/providers:
    get:
      tags:
        - games
      summary: Getting providers list
      operationId: providersList
      description: Getting providers list
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  providers:
                    type: array
                    items:
                      $ref: '#/components/schemas/ProvidersListItem'
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
  /v1/games/{slug}:
    get:
      tags:
        - games
      summary: Getting a single game by slug
      operationId: gameBySlug
      description: Getting a single game by slug
      parameters:
        - in: path
          name: slug
          required: true
          schema:
            type: string
          description: The game slug
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  game:
                    $ref: '#/components/schemas/GamesListItem'
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
  /v1/games/demo:
    post:
      tags:
        - games
      summary: Init game demo
      operationId: initDemo
      description: Init game demo
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  link:
                    type: string
                    description: Link to the game instance.
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  description: internal game id
  /v1/games/init-game:
    post:
      tags:
        - games
      summary: Init real game
      operationId: initGame
      description: Init real game
      security:
        - bearerAuth: []
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  link:
                    type: string
                    description: Link to the game instance.
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  description: internal game id
  /v1/i18/translations:
    get:
      tags:
        - util
      summary: Getting list of available translations
      operationId: i18translations
      description: Getting list of available translations
      parameters:
        - in: query
          name: locale
          schema:
            type: string
            example: en
          description: Locale code
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  translations:
                    type: array
                    items:
                      type: object
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
  /v1/payments/replenish-config:
    get:
      tags:
        - util
      summary: Getting list of available payment methods
      operationId: replenishConfig
      description: Getting list of available payment methods
      parameters:
        - in: query
          name: country
          schema:
            type: string
            example: TH
          description: Country Code
        - in: query
          name: currency
          schema:
            type: string
            example: USD
          description: Currency code
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReplenishConfig'
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
  /v1/payments/{provider}/replenish:
    post:
      tags:
        - payments
      summary: Init replenish operation
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: provider
          required: true
          schema:
            type: string
          description: The payment provider name
      operationId: initReplenish
      description: Init replenish operation
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  link:
                    type: string
                    description: Link to the payment page.
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Replenish'
  /v1/payments/{provider}/withdraw:
    post:
      tags:
        - payments
      summary: Init withdraw operation
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: provider
          required: true
          schema:
            type: string
          description: The payment provider name
      operationId: initWithdraw
      description: Init withdraw operation
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                method:
                  type: string
                  example: card
                amount:
                  type: integer
                  example: 10
  /v1/user/me:
    get:
      tags:
        - user
      summary: Getting current user
      security:
        - bearerAuth: []
      operationId: currentUser
      description: Getting current user
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CurrentUser'
        '500':
          description: 'Internal Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Sorry! Something went wrong. Please try again later
        '400':
          description: 'Invalid Input'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
servers:
  - url: 'https://dev-api.ra.casino'
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    SignIn:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          pattern: (?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])
        password:
          type: string
    ApiError:
      required:
        - errorCode
      properties:
        name:
          type: string
          example: Some Important Error
        statusCode:
          type: integer
          example: 400
        errorCode:
          type: string
          example: 'IMPORTANT_ERROR'
        errors:
          type: array
          items: {}
    NewUser:
      type: object
      required:
        - email
        - name
        - dateOfBirth
        - firstName
        - lastName
        - password
      properties:
        name:
          type: string
          pattern: ^[a-zA-Z0-9_\\-]{2,64}$
        email:
          type: string
          pattern: (?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])
        dateOfBirth:
          type: string
        firstName:
          type: string
          minLength: 2
          maxLength: 64
        lastName:
          type: string
          minLength: 2
          maxLength: 64
        password:
          type: string
          minLength: 2
          maxLength: 64
        currency:
          type: string
          enum: [USD,EUR,BTC]
        phone:
          type: string
    GamesListItem:
      type: object
      properties:
        name:
          type: string
        id:
          type: string
          description: Game id on integrator side
        aggregator:
          type: string
          description: Name of the aggregator
          example: slotegrator
        external_id:
          type: string
          description: Game id on aggregator side
        image:
          type: string
          description: Image url
        type:
          type: string
          description: Type of the game
          example: slots
        provider:
          type: string
          description: Game provider name
          example: NetEnt
        technology:
          type: string
          description: Game technology
          example: html5
        has_lobby:
          type: integer
          description: Indicates if game has a lobby
          enum: [1,0]
        is_mobile:
          type: integer
          description: Indicates if its a mobile version of the game
          enum: [1,0]
        has_freespins:
          type: integer
          description: Indicates if the game has freespins
          enum: [1,0]
        slug:
          type: string
          description: url friendly game slug
          example: 100-joker-staxx-playson-fae5s7bs14i
    ProvidersListItem:
      type: object
      properties:
        name:
          type: string
        id:
          type: string
          description: Provider id on integrator side
        slug:
          type: string
          description: url friendly provider slug
          example: playson
    ReplenishConfig:
      type: object
      properties:
        allowedPaymentProviders:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
              allowed_countries:
                type: array
                items:
                  type: string
                  example: TH
              amount_steps:
                type: array
                items:
                  type: integer
                  example: 10
              enabled:
                type: boolean
                example: true
              excluded_countries:
                type: array
                items:
                  type: string
                  example: TH
              force:
                type: string
                description: force method (if available)
              max_amount:
                type: integer
                example: 5000
              min_amount:
                type: integer
              name:
                type: string
              payment_group:
                type: string
              preferable_weight:
                type: integer
              short_name:
                type: string
                description: unique url-friendly name for a payment method
              suggest_all:
                type: boolean
              suggested:
                type: array
                items:
                  type: string
                  example: TH
                description: Array of suggested country codes for a payment methods
              allowed_currencies:
                type: array
                items:
                  type: string
                  example: USD
        preferredPaymentProvider:
          type: string
        suggestedProviders:
          type: array
          items:
            type: string
            example: pay_op
    Replenish:
      type: object
      required:
        - amount
      properties:
        amount:
          type: integer
        currency:
          type: string
        paymentMethod:
          type: string
          description: specify a force method here (do not send otherwise)
        failureRedirectUrl:
          type: string
        successRedirectUrl:
          type: string
    CurrentUser:
      type: object
      properties:
        name:
          type: string
          pattern: ^[a-zA-Z0-9_\\-]{2,64}$
        email:
          type: string
          pattern: (?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])
        dateOfBirth:
          type: string
        firstName:
          type: string
          minLength: 2
          maxLength: 64
        lastName:
          type: string
          minLength: 2
          maxLength: 64
        countryCode:
          type: string
          example: TH
        phone:
          type: string
        createdAt:
          type: string
        isVerified:
          type: boolean
        wallets:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              userId:
                type: string
              amount:
                type: string
              currency:
                type: string
              createdAt:
                type: string
              updatedAt:
                type: string
              active:
                type: boolean
        id:
          type: string
        roles:
          type: array
          items:
            type: string
            example: user
