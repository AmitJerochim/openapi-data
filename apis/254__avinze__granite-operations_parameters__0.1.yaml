penapi: 3.0.0
info:
  title: Granite Operations Parameters
  description: Furnishes all current sat routing data for Gummy
  termsOfService: TBS
  contact:
    name: Jim Goddard
    email: jimbo_lg@yahoo.com
  license:
    name: Granite License
    url: TBS
  version: '0.1'
servers:
  - url: 'https:dev.granite.com/v1'
    description: Dev Granite Server
  - url: 'https://virtserver.swaggerhub.com/Granite201/SatRouting/0.1'
    description: SwaggerHub API Auto Mocking
paths:
  /subscribe:
    post:
      summary: Subscribe to a webhook
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/body'
        required: true
      responses:
        '201':
          description: Webhook created
      callbacks:
        ElementSetUpdate:
          '{$request.body#/callbackUrl}':
            post:
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/ElementSet'
                required: true
              responses:
                '200':
                  description: Your server returns this code if it accepts the callback
        YawSwitchUpdate:
          '{$request.body#/callbackUrl}':
            post:
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/YawSwitches'
                required: true
              responses:
                '200':
                  description: Your server returns this code if it accepts the callback
        SatContactUpdate:
          '{$request.body#/callbackUrl}':
            post:
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/SatContacts'
                required: true
              responses:
                '200':
                  description: Your server returns this code if it accepts the callback
components:
  schemas:
    SatContacts:
      type: array
      description: Array of satellite contacts
      items:
        $ref: '#/components/schemas/SatContact'
    SatContact:
      properties:
        contactStart:
          type: integer
          description: Start of pass in unix time
        contactEnd:
          type: integer
          description: End of pass in unix time
        fm:
          maximum: 97
          minimum: 73
          type: integer
          description: Satellite flight model number
          example: 80
        gwId:
          maximum: 99
          minimum: 1
          type: integer
          description: Gateway ID for pass
          example: 1
        antId:
          minimum: 1
          type: integer
          description: Antenna ID for pass
          example: 1
      description: Defines a satellite pass at a given gateway
    YawSwitches:
      type: array
      description: Array of yaw switch sets
      items:
        $ref: '#/components/schemas/YawSwitch'
    YawSwitch:
      properties:
        fm:
          type: integer
          description: Flight model number
          example: 73
        switchTime:
          type: integer
          description: Yaw Switch Time in unix time
        yawMode:
          maximum: 4
          minimum: 0
          type: integer
          description: New Yaw Mode
          example: 1
        yawBias:
          maximum: 360
          minimum: -360
          type: number
          description: Yaw Bias Angle in deg
        maxBeta:
          type: number
          description: Maximum Beta Angle in deg
          example: 32
        maxYawRate:
          type: number
          description: Maximum Rate for Yaw Steering (rate-limited) in deg/min
          example: 5
        maxTransRate:
          type: number
          description: Maximum Rate for Mode Transitions in deg/min
          example: 5
      description: Yaw Mode Switch
    ElementSet:
      type: array
      description: Array of orbital elements
      items:
        $ref: '#/components/schemas/Elements'
    Elements:
      properties:
        fm:
          type: integer
          description: Flight model number
          example: 73
        epoch:
          type: integer
          description: Epoch unix time
        posX:
          type: number
          description: Satellite ECI Position(x) in km
        posY:
          type: number
          description: Satellite ECI Position(y) in km
        posZ:
          type: number
          description: Satellite ECI Position(z) in km
        velX:
          type: number
          description: Satellite ECI Velocity(x) in km/s
        velY:
          type: number
          description: Satellite ECI Velocity(x) in km/s
        velZ:
          type: number
          description: Satellite ECI Velocity(x) in km/s
      description: Osculating orbit parameters for a satellite
    body:
      required:
        - callbackUrl
      type: object
      properties:
        callbackUrl:
          type: string
          format: uri
          example: 'https://myserver.com/send/callback/here'