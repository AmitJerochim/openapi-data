{
  "openapi" : "3.0.0",
  "info" : {
    "version" : "4.0.0",
    "title" : "Call Center API",
    "description" : "Danh sách API cho call center:<ul><li>Group ACD thường và thông minh</li><li>IVR</li><li>Routing tag</li><li>Quản lí cấu hình cho hardphone</li><li>Thêm/Gỡ đầu số</li><li>Cấu hình đầu số gọi ra</li></ul>"
  },
  "servers" : [ ],
  "tags" : [ {
    "name" : "ivr",
    "description" : "Tùy chỉnh lời chào thoại (IVR)"
  }, {
    "name" : "acd",
    "description" : "Cấu hình điều phối cuộc gọi"
  }, {
    "name" : "acd_smart",
    "description" : "Cấu hình điều phối cuộc gọi thông minh(ACD)"
  }, {
    "name" : "block_call",
    "description" : "Tùy chỉnh chặn cuộc gọi"
  }, {
    "name" : "agent",
    "description" : "Agent API"
  }, {
    "name" : "routing_info",
    "description" : "Lấy cấu hình routing"
  }, {
    "name" : "routing_tag",
    "description" : "Ưu tiên chuyển cuộc gọi trên mobile"
  }, {
    "name" : "call_center",
    "description" : "Call Center API"
  }, {
    "name" : "hardphone",
    "description" : "Quản lí cấu hình hardphone"
  } ],
  "paths" : {
    "/hardphone/check/provider/{provider}/mac_address/{mac_address}" : {
      "get" : {
        "tags" : [ "hardphone" ],
        "summary" : "Kiểm tra mac address có thể được assign vào một agent",
        "description" : "Kiểm tra mac address có thể được assign vào một agent",
        "parameters" : [ {
          "name" : "mac_address",
          "in" : "path",
          "description" : "mac_address của hardphone cần kiểm tra",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "29b6cbff88f38eb28902ac06"
        }, {
          "name" : "provider",
          "in" : "path",
          "description" : "Mã provider",
          "required" : true,
          "schema" : {
            "enum" : [ "yealink", "fanvil", "grandstream" ],
            "type" : "string"
          },
          "example" : "yealink"
        }, {
          "name" : "quick_check",
          "in" : "query",
          "description" : "check nhanh mac_address (trong data trả về chỉ có các field registered_with_provider và can_assign)",
          "required" : false,
          "schema" : {
            "type" : "boolean"
          },
          "example" : false
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "type" : "object",
                      "properties" : {
                        "registered_with_provider" : {
                          "type" : "boolean",
                          "description" : "mac address đã được đăng kí với hãng sản xuất hay chưa"
                        },
                        "can_assign" : {
                          "type" : "boolean",
                          "description" : "Có thể assign mac address vào một agent bất kì hay không"
                        },
                        "agent_sip_info" : {
                          "type" : "object",
                          "description" : "thông tin sip info của agent lưu trong database"
                        }
                      },
                      "example" : {
                        "registered_with_provider" : true,
                        "tenant_id" : "5d884f49bca30d00b90a9adc",
                        "agent_id" : "5d884f49bca30d00b90a9adb",
                        "tenant_expired" : false,
                        "agent_sip_info" : {
                          "sipNumberPassword" : "DN8bl2LnagJCKT4GEV/WSA==",
                          "pbxName" : "dev882",
                          "tenantName" : "VNG",
                          "routingTable" : "Routing: to PSTN from VPBX_VNG",
                          "domainAddress" : "cc11.stgsip2.123cs.vn",
                          "publicNumber" : 2.877779548E9,
                          "maxChannel" : 2,
                          "emergency_location" : "Default Location",
                          "pricelist" : "End User Price List Default",
                          "ruleset" : "Route : Subscriber",
                          "sipNumber" : 101,
                          "accountAuthorizationName" : "dev882_101",
                          "displayName" : "User 101",
                          "recordingEmail" : "dev882_101@cc11.stgsip2.123cs.vn",
                          "alarmEmail" : "dev882_101@cc11.stgsip2.123cs.vn",
                          "proxy" : "49.213.127.3",
                          "pass_encrypt" : true,
                          "hardphoneMacAddress" : "112233445560",
                          "hardphoneProviderCode" : "yealink",
                          "hardphoneId" : "b17444e6ebf144a6978ef6ae3fffed07"
                        },
                        "mac_address" : "112233445560",
                        "can_assign" : true,
                        "tenant_domain" : "cc11",
                        "provider_code" : "yealink"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/hardphone/config/provider/{provider}/{mac_address}.{ext}" : {
      "get" : {
        "tags" : [ "hardphone" ],
        "summary" : "Lấy cấu hình hardphone qua API Gateway",
        "description" : "Lấy cấu hình hardphone theo hãng sản xuất và mac address <span style=\"color:red; font-weight: bold;\">qua API Gateway</span>",
        "parameters" : [ {
          "name" : "provider",
          "in" : "path",
          "description" : "provider_code của nhà sản xuất hardphone",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "yealink"
        }, {
          "name" : "mac_address",
          "in" : "path",
          "description" : "mac_address của thiết bị",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : 112233445566
        }, {
          "name" : "ext",
          "in" : "path",
          "description" : "Loại file cấu hình. Nếu là file boot thì API sẽ trả về mã 404",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "cfg"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "text/plain" : {
                "example" : "#!version:1.0.0.1\n\nsecurity.user_name.admin = admin\nsecurity.user_password = admin:admin\nsecurity.user_name.user = user\nsecurity.user_password = user:user\n\naccount.1.enable = 1\naccount.1.label = 101\naccount.1.display_name = 101\naccount.1.user_name = 101\naccount.1.auth_name = test882_101  \naccount.1.password = 0v34OTpdfghdfh\n\naccount.1.sip_server_host.legacy = cc11.stgsip2.123cs.vn\naccount.1.sip_server.1.address = cc11.stgsip2.123cs.vn\naccount.1.sip_server.1.transport_type = 2\nstatic.security.trust_certificates = 0\n\naccount.1.outbound_proxy_enable = 0\n\nauto_provision.server.url = https://apigw.stg.123cs.vn/hardphone/config/provider/yealink/112233445560.cfg\nauto_provision.server.username = user1\nauto_provision.server.password = password1\n\nvoice.ring_vol = 10\nfeatures.dnd.enable = 1\nphone_setting.redial_number = 9110\nphone_setting.call_return_user_name = IP Phone\nphone_setting.call_return_server = 127.0.0.1\nphone_setting.custom_headset_mode_status = 1\nprogramablekey.7.type = 0\nprogramablekey.7.line = 0\nprogramablekey.7.value = %NULL%\nprogramablekey.7.label = %NULL%\nprogramablekey.7.extension = %NULL%\nprogramablekey.7.xml_phonebook = %NULL%\nprogramablekey.7.pickup_value = %NULL%\nprogramablekey.8.type = 0\nprogramablekey.8.line = 0\nprogramablekey.8.value = %NULL%\nprogramablekey.8.label = %NULL%\nprogramablekey.8.extension = %NULL%\nprogramablekey.8.xml_phonebook = %NULL%\nprogramablekey.8.pickup_value = %NULL%\n"
              }
            }
          }
        }
      }
    },
    "/hardphone/providers" : {
      "get" : {
        "tags" : [ "hardphone" ],
        "summary" : "Lấy danh sách hãng sản xuất hardphone",
        "description" : "Lấy danh sách hãng sản xuất hardphone",
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "type" : "object",
                      "properties" : {
                        "provider_code" : {
                          "type" : "string",
                          "description" : "Mã hãng sản xuất"
                        },
                        "provider_name" : {
                          "type" : "string",
                          "description" : "Tên hãng sản xuất"
                        }
                      },
                      "example" : [ {
                        "provider_code" : "yealink",
                        "provider_name" : "Yealink"
                      }, {
                        "provider_code" : "granstream",
                        "provider_name" : "Granstream"
                      }, {
                        "provider_code" : "fanvil",
                        "provider_name" : "Fanvil"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/hardphone/assign/profile_id/{profile_id}" : {
      "post" : {
        "tags" : [ "hardphone" ],
        "summary" : "Assign hardphone vào agent",
        "description" : "Assign hardphone vào agent theo profile_id",
        "parameters" : [ {
          "name" : "profile_id",
          "in" : "path",
          "description" : "profile_id của agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "29b6cbff88f38eb28902ac06"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "allOf" : [ {
                  "$ref" : "#/components/schemas/HardPhoneInfo"
                } ]
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "$ref" : "#/components/schemas/HardPhoneAssignCode"
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/HardPhoneDetail"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/hardphone/assign/agent_id/{agent_id}" : {
      "post" : {
        "tags" : [ "hardphone" ],
        "summary" : "Assign hardphone vào agent",
        "description" : "Assign hardphone vào agent theo agent_id",
        "parameters" : [ {
          "name" : "agent_id",
          "in" : "path",
          "description" : "agent_id của agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "ed89ea893a5aebed16c45598"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "allOf" : [ {
                  "$ref" : "#/components/schemas/HardPhoneInfo"
                } ]
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "$ref" : "#/components/schemas/HardPhoneAssignCode"
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/HardPhoneDetail"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/hardphone/unassign/agent_id/{agent_id}" : {
      "delete" : {
        "tags" : [ "hardphone" ],
        "summary" : "Gỡ cấu hình hardphone khỏi agent",
        "description" : "Gỡ cấu hình hardphone khỏi agent theo agent_id",
        "parameters" : [ {
          "name" : "agent_id",
          "in" : "path",
          "description" : "agent_id của agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "ed89ea893a5aebed16c45598"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/hardphone/unassign/profile_id/{profile_id}" : {
      "delete" : {
        "tags" : [ "hardphone" ],
        "summary" : "Gỡ cấu hình hardphone khỏi agent",
        "description" : "Gỡ cấu hình hardphone khỏi agent theo profile_id",
        "parameters" : [ {
          "name" : "profile_id",
          "in" : "path",
          "description" : "profile_id của agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "29b6cbff88f38eb28902ac06"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd/tenant_id/{tenant_id}/group_ext" : {
      "get" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "call_center" ],
        "summary" : "Lấy danh sách số nội bộ của các group được sử dụng trong tenant",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant cần lấy danh sách số nội bộ group",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : [ "99151" ]
                }
              }
            }
          }
        }
      }
    },
    "/callcenter/tenant_id/{tenant_id}" : {
      "post" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "call_center" ],
        "summary" : "KHỞI TẠO call center (group ACD, IVR, outbound config,...)",
        "description" : "Project: CloudV2.API.vCS. KHÔNG DÙNG ĐỂ MUA THÊM SỐ",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant được khởi tạo",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/CallCenterInitParams"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000
                }
              }
            }
          }
        }
      },
      "put" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "call_center" ],
        "summary" : "MUA THÊM ĐẦU SỐ cho call center (group ACD, IVR, outbound config,...)",
        "description" : "Project: CloudV2.API.vCS. KHÔNG DÙNG ĐỂ MUA THÊM SỐ",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant được khởi tạo",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/CallCenterInitParams"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000
                }
              }
            }
          }
        }
      }
    },
    "/callcenter/tenant_id/{tenant_id}/number/{number}" : {
      "delete" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "call_center" ],
        "summary" : "Gỡ đầu số đang sử dụng khỏi tenant",
        "description" : "Project: CloudV2.API.vCS.",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        }, {
          "name" : "number",
          "in" : "path",
          "description" : "Đầu số cần gỡ khỏi tenant",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "02812345678"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000
                }
              }
            }
          }
        }
      }
    },
    "/aaranet2fs/tenant_id/{tenant_id}" : {
      "post" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "call_center" ],
        "summary" : "Convert tenant từ hệ thống Aaranet sang vVoice (Freeswitch)",
        "description" : "Project: CloudV2.API.vCS",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000
                }
              }
            }
          }
        }
      }
    },
    "/search_profile" : {
      "post" : {
        "tags" : [ "call_center" ],
        "summary" : "Search profile",
        "description" : "Project: CloudV2.API.Web.SearchProfile",
        "security" : [ {
          "bearerAuth" : [ ]
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "type" : "object",
                "properties" : {
                  "tenant_id" : {
                    "type" : "string",
                    "example" : "5cf5e3968e605c00bc6bd750"
                  },
                  "phone_number" : {
                    "type" : "string",
                    "example" : 9.06562266E8
                  }
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "type" : "object",
                      "properties" : {
                        "profile_id" : {
                          "type" : "string",
                          "description" : "profile_id thỏa điều kiện search và có ngày cập nhật gần nhất",
                          "example" : "5cf5e3968e605c00bc6bd754"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/check_call_validate" : {
      "post" : {
        "tags" : [ "call_center" ],
        "summary" : "Validate call",
        "description" : "Project: CloudV2.API.NotificationForCallCenter",
        "security" : [ {
          "bearerAuth" : [ ]
        } ],
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Tenant ID",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "58214eb8b7c68c55130b8b47"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "allOf" : [ {
                  "$ref" : "#/components/schemas/CallValidateRequest"
                } ]
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/CallValidateResponse"
                      } ]
                    },
                    "message" : {
                      "type" : "string",
                      "example" : "SC_OK"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd_smart/tenant_id/{tenant_id}/profile_attributes" : {
      "get" : {
        "tags" : [ "acd_smart" ],
        "summary" : "Lấy danh sách thuộc tính trong profile",
        "description" : "<span style=\"color: red; font-weight: bold;\">API yêu cầu xác thực</span>",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Tenant ID",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "58214eb8b7c68c55130b8b47"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "type" : "array",
                      "items" : {
                        "allOf" : [ {
                          "$ref" : "#/components/schemas/AttributeCode"
                        }, {
                          "$ref" : "#/components/schemas/AttributeName"
                        }, {
                          "$ref" : "#/components/schemas/AttributeValueList"
                        } ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd_smart/tenant_id/{tenant_id}/reorder" : {
      "post" : {
        "tags" : [ "acd_smart" ],
        "summary" : "Sắp xếp lại độ ưu tiên cho group ACD khôn",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Tenant ID",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "58214eb8b7c68c55130b8b47"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "type" : "object",
                "description" : "Thứ tự của group",
                "additionalProperties" : {
                  "type" : "integer"
                },
                "example" : {
                  "0882aec1d2f5c26b5bac2bd9" : 1,
                  "580d7c30a9d9fc3713c52961" : 2,
                  "294add2151401dd425317df0" : 3
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd_smart/group/create" : {
      "post" : {
        "tags" : [ "acd_smart" ],
        "summary" : "Tạo thông tin cấu hình của một nhóm ACD khôn",
        "parameters" : [ {
          "name" : "agent_name",
          "in" : "query",
          "description" : "Tên agent thực hiện hành động tạo",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "Quoc-Bao Nguyen"
        }, {
          "name" : "agent_id",
          "in" : "query",
          "description" : "ID của agent thực hiện hành động tạo",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "c5642ff7e3e2b7b643997940"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ACDGroupSmart"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/ACDGroupId"
                      }, {
                        "$ref" : "#/components/schemas/ACDGroupSmart"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd_smart/group_id/{group_id}" : {
      "get" : {
        "tags" : [ "acd_smart" ],
        "summary" : "Lấy toàn bộ thông tin cấu hình của một nhóm ACD khôn",
        "parameters" : [ {
          "name" : "group_id",
          "in" : "path",
          "description" : "ID của group",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "fda468600d079a0443c40ca7"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/ACDGroupId"
                      }, {
                        "$ref" : "#/components/schemas/ACDGroupSmart"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put" : {
        "tags" : [ "acd_smart" ],
        "summary" : "Chỉnh sửa cấu hình một nhóm ACD khôn. Tạm thời chỉ hỗ trợ dạng update full-presentation.",
        "parameters" : [ {
          "name" : "group_id",
          "in" : "path",
          "description" : "ID của group",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0656a1e00caea4f447dc40"
        }, {
          "name" : "agent_name",
          "in" : "query",
          "description" : "Tên agent thực hiện hành động sửa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "Quoc-Bao Nguyen"
        }, {
          "name" : "agent_id",
          "in" : "query",
          "description" : "ID của agent thực hiện hành động sửa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "c5642ff7e3e2b7b643997940"
        } ],
        "requestBody" : {
          "description" : "Cấu hình ACD",
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ACDGroupSmart"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/ACDGroupId"
                      }, {
                        "$ref" : "#/components/schemas/ACDGroupSmart"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "acd_smart" ],
        "summary" : "Xóa group ACD khôn",
        "parameters" : [ {
          "name" : "group_id",
          "in" : "path",
          "description" : "ID của group",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "fda468600d079a0443c40ca7"
        }, {
          "name" : "agent_name",
          "in" : "query",
          "description" : "Tên agent thực hiện hành động xóa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "Quoc-Bao Nguyen"
        }, {
          "name" : "agent_id",
          "in" : "query",
          "description" : "ID của agent thực hiện hành động xóa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "c5642ff7e3e2b7b643997940"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation"
          }
        }
      }
    },
    "/acd_smart/tenant_id/{tenant_id}/groups" : {
      "get" : {
        "tags" : [ "acd_smart" ],
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Tenant ID",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "58214eb8b7c68c55130b8b47"
        } ],
        "summary" : "Lấy danh sách nhóm ACD khôn thuộc sở hữu của tenant",
        "description" : "",
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "type" : "array",
                      "items" : {
                        "allOf" : [ {
                          "$ref" : "#/components/schemas/ACDGroupId"
                        }, {
                          "$ref" : "#/components/schemas/ACDGroupInfo"
                        }, {
                          "type" : "object",
                          "properties" : {
                            "order" : {
                              "type" : "integer",
                              "description" : "Độ ưu tiên của nhóm",
                              "example" : 1
                            }
                          }
                        } ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/callcenter/public_number/tenant_id/{tenant_id}" : {
      "get" : {
        "deprecated" : false,
        "tags" : [ "call_center" ],
        "summary" : "Lấy danh sách đầu số public của tenant và cấu hình phân quyền gọi ra",
        "description" : "",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant_id",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c9347bf2fb22100b9bc269c"
        }, {
          "name" : "show_service_number",
          "in" : "query",
          "description" : "Trả về các đầu số dịch vụ 1900, 1800. Mặc định API sẽ không trả về danh sách đầu số dịch vụ",
          "required" : false,
          "schema" : {
            "type" : "boolean"
          },
          "example" : true
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "string",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/TenantIdAndDomain"
                      }, {
                        "$ref" : "#/components/schemas/CallCenter"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/features/tenant_id/{tenant_id}" : {
      "get" : {
        "tags" : [ "call_center" ],
        "summary" : "Kiểm tra các features của tenant đang bật hay tắt",
        "description" : "",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant_id",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c9347bf2fb22100b9bc269c"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "string",
                      "example" : 1000
                    },
                    "data" : {
                      "type" : "object",
                      "properties" : {
                        "features" : {
                          "type" : "object",
                          "properties" : {
                            "ivr" : {
                              "type" : "boolean",
                              "description" : "Tính năng IVR (tenant chạy vVoice)"
                            },
                            "object_storage" : {
                              "type" : "boolean",
                              "description" : "Sử dụng dịch vụ object storage do vStorage cung cấp"
                            },
                            "transcript" : {
                              "type" : "boolean"
                            }
                          },
                          "description" : "Sử dụng tính năng transcript cuộc gọi"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/callcenter/public_number/tenant_id/{tenant_id}/outbound" : {
      "put" : {
        "deprecated" : false,
        "tags" : [ "call_center" ],
        "summary" : "Cập nhật danh sách đầu số public của tenant và cấu hình phân quyền gọi ra",
        "description" : "",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant_id",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c9347bf2fb22100b9bc269c"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "allOf" : [ {
                  "$ref" : "#/components/schemas/CallCenter"
                } ]
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "string",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/TenantIdAndDomain"
                      }, {
                        "$ref" : "#/components/schemas/CallCenter"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/profile/profile_id/{profile_id}/routing_tag" : {
      "get" : {
        "deprecated" : false,
        "tags" : [ "routing_tag" ],
        "summary" : "Lấy routing tag của profile",
        "description" : "",
        "parameters" : [ {
          "name" : "profile_id",
          "in" : "path",
          "description" : "Id của profile cần lấy routing tag",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c9347bf2fb22100b9bc269c"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "string",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/RoutingTag"
                      }, {
                        "type" : "object",
                        "properties" : {
                          "callcenter_number" : {
                            "type" : "array",
                            "description" : "Danh sách đầu số tổng đài của tenant đang quản lí profile hiện tại",
                            "items" : {
                              "type" : "string",
                              "example" : 2.836221443E9
                            }
                          },
                          "profile_number" : {
                            "type" : "array",
                            "description" : "Danh sách số di động của profile",
                            "items" : {
                              "type" : "string",
                              "example" : 9.06562266E8
                            }
                          },
                          "cache_routing_tag" : {
                            "type" : "array",
                            "description" : "Thông tin cache về routing tag (CHỈ DÙNG CHO MỤC ĐÍCH DEBUG)",
                            "items" : {
                              "type" : "object",
                              "example" : {
                                "rt_0906562266_02836221443_5c9201a3a69e9e00b9818eb9" : "5c9201a3a69e9e00b9818eb8",
                                "rt_0906562266_02836221443_5c9201a3a69e9e00b9818eb9_m" : null,
                                "rt_0906562266_02836221443_5c9201a3a69e9e00b9818eb9_pid" : "5cdbe048780a0000ba3a3886",
                                "ext_5c9201a3a69e9e00b9818eb8" : "101"
                              }
                            }
                          },
                          "recent_route" : {
                            "type" : "object",
                            "properties" : {
                              "0906562266_5c9201a3a69e9e00b9818eb9" : {
                                "type" : "object",
                                "example" : {
                                  "agent_id" : "5c9201a3a69e9e00b9818eb8",
                                  "agent_name" : "Nguyễn Quốc Bảo",
                                  "call_start_date" : 1558430398
                                }
                              }
                            }
                          }
                        }
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete" : {
        "deprecated" : false,
        "tags" : [ "routing_tag" ],
        "summary" : "Xóa routing tag của profile",
        "description" : "",
        "parameters" : [ {
          "name" : "profile_id",
          "in" : "path",
          "description" : "Id của profile cần xóa routing tag",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c9347bf2fb22100b9bc269c"
        }, {
          "name" : "modified_by",
          "in" : "query",
          "description" : "agent_id của agent thực hiện thao tác xóa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c9201a3a69e9e00b9818eb8"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "string",
                      "example" : 1000
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put" : {
        "deprecated" : false,
        "tags" : [ "routing_tag" ],
        "summary" : "Cập nhật routing tag của profile.",
        "description" : "<span style=\"color: red; font-weight: bold\">CÁC THÔNG TIN Ở PHẦN RESPONSE CỦA API NÀY CÓ THỂ THAY ĐỔI HOẶC BỎ ĐI</span>",
        "parameters" : [ {
          "name" : "profile_id",
          "in" : "path",
          "description" : "Id của profile cần cập nhật routing tag",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c9347bf2fb22100b9bc269c"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "type" : "object",
                "properties" : {
                  "modified_by" : {
                    "type" : "string",
                    "description" : "agent_id của agent thực hiện cập nhật",
                    "example" : "5c9201a3a69e9e00b9818eb8"
                  },
                  "assigned_to" : {
                    "type" : "string",
                    "description" : "agent_id của agent tiếp nhận cuộc gọi từ profile",
                    "example" : "5c9201a3a69e9e00b9818eb8"
                  }
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "phone_numbers" : [ 9.06562266E8 ],
                    "tenant_numbers" : [ 2.836221443E9 ],
                    "routing_tag" : "#agent:baonq5@vng.com.vn",
                    "ext" : "101",
                    "agent_id" : "5c9201a3a69e9e00b9818eb8"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/ivr/tenant_id/{tenant_id}/number/{number}" : {
      "get" : {
        "deprecated" : true,
        "tags" : [ "ivr" ],
        "summary" : "Lấy cấu hình IVR của một số đích hoặc alias trong tenant",
        "description" : "",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant cần lấy danh sách đầu số",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        }, {
          "name" : "number",
          "in" : "path",
          "description" : "Số đích hoặc số alias cần lấy cấu hình IVR",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : 2.836221443E9
        }, {
          "name" : "ivr_customized",
          "in" : "query",
          "description" : "Xem cấu hình IVR nâng cao của đầu số",
          "required" : false,
          "schema" : {
            "type" : "string"
          },
          "example" : false
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/IVRTenantId"
                      }, {
                        "$ref" : "#/components/schemas/TenantIVR"
                      } ]
                    }
                  }
                }
              },
              "application/xml" : {
                "examples" : {
                  "xml" : {
                    "externalValue" : "https://git-cs.vng.com.vn/snippets/4"
                  }
                }
              }
            }
          }
        }
      },
      "put" : {
        "deprecated" : true,
        "tags" : [ "ivr" ],
        "summary" : "Cập nhật cấu hình IVR hoặc IVR nâng cao của một số đích hoặc alias trong tenant",
        "description" : "Cập nhật cấu hình IVR hoặc IVR nâng cao của một số đích hoặc alias trong tenant.",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant cần lấy danh sách đầu số",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        }, {
          "name" : "number",
          "in" : "path",
          "description" : "Số đích hoặc số alias cần lấy cấu hình IVR",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : 2.836221443E9
        }, {
          "name" : "ivr_customized",
          "in" : "query",
          "description" : "Cập nhật cấu hình IVR nâng cao. Content type của request phải là xml.",
          "required" : false,
          "schema" : {
            "type" : "boolean"
          },
          "example" : true
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/TenantIVR"
              }
            },
            "application/xml" : {
              "examples" : {
                "xml" : {
                  "summary" : "Cấu IVR nâng cao ở dạng XML",
                  "externalValue" : "https://git-cs.vng.com.vn/snippets/4"
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/IVRTenantId"
                      }, {
                        "$ref" : "#/components/schemas/TenantIVR"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post" : {
        "deprecated" : true,
        "tags" : [ "ivr" ],
        "summary" : "Tạo hoặc reset cấu hình IVR của một số đích hoặc alias trong tenant về cấu hình mặc định",
        "description" : "",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant cần lấy danh sách đầu số",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        }, {
          "name" : "number",
          "in" : "path",
          "description" : "Số đích hoặc số alias cần lấy cấu hình IVR",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : 2.836221443E9
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/IVRTenantId"
                      }, {
                        "$ref" : "#/components/schemas/TenantIVR"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/ivr/tenant_id/{tenant_id}/numbers/v3" : {
      "get" : {
        "tags" : [ "ivr" ],
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant cần lấy danh sách đầu số",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        } ],
        "summary" : "Lấy danh sách đầu số đang tích hợp vào tenant",
        "description" : "Lấy danh sách đầu số đang tích hợp vào tenant",
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "type" : "object",
                      "properties" : {
                        "tenant_id" : {
                          "type" : "string",
                          "description" : "Id của tenant",
                          "example" : "5d7b159a4da13e00bc728c1a"
                        },
                        "total_number" : {
                          "type" : "integer",
                          "description" : "Số lượng đầu số"
                        },
                        "ivr" : {
                          "type" : "array",
                          "items" : {
                            "type" : "object",
                            "properties" : {
                              "numbers" : {
                                "type" : "array",
                                "items" : {
                                  "type" : "string",
                                  "description" : "Đầu số tổng đài"
                                }
                              },
                              "id" : {
                                "oneOf" : [ {
                                  "type" : "string",
                                  "description" : "Id cấu hình IVR của đầu số",
                                  "example" : "5d9d68c2b706395930e348a5"
                                }, {
                                  "type" : "string",
                                  "description" : "Id cấu hình IVR mới của đầu số",
                                  "example" : "v2/5d9d68c2b706395930e348a5"
                                } ]
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "example" : {
                    "code" : 1000,
                    "data" : {
                      "tenant_id" : "5d7b159a4da13e00bc728c1a",
                      "total_number" : 3,
                      "ivr" : [ {
                        "numbers" : [ "19001234" ],
                        "id" : "5d9d68c2b706395930e348a5"
                      }, {
                        "numbers" : [ 2.836221446E9 ],
                        "id" : "5d9eb666b70639556a659be6"
                      }, {
                        "numbers" : [ 2.836221447E9 ],
                        "id" : "v2/5d9eb666b70639556a659bf6"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/ivr/ivr_id/{ivr_id}" : {
      "get" : {
        "tags" : [ "ivr" ],
        "summary" : "Lấy cấu hình IVR của một đầu số theo IVR id",
        "description" : "",
        "parameters" : [ {
          "name" : "ivr_id",
          "in" : "path",
          "description" : "IVR id",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "bc5108f4e031d06b06fe466d"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/IVRTenantId"
                      }, {
                        "$ref" : "#/components/schemas/TenantIVR"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put" : {
        "tags" : [ "ivr" ],
        "summary" : "Cập nhật cấu hình IVR của một đầu số theo IVR id",
        "description" : "",
        "parameters" : [ {
          "name" : "ivr_id",
          "in" : "path",
          "description" : "IVR id",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "bc5108f4e031d06b06fe466d"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/TenantIVR"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/IVRTenantId"
                      }, {
                        "$ref" : "#/components/schemas/TenantIVR"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/ivr/ivr_id/v2/{ivr_id}" : {
      "get" : {
        "tags" : [ "ivr" ],
        "summary" : "Lấy cấu hình IVR MỚI của một đầu số theo IVR id",
        "description" : "",
        "parameters" : [ {
          "name" : "ivr_id",
          "in" : "path",
          "description" : "IVR id",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "bc5108f4e031d06b06fe466d"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/IVRTenantId"
                      }, {
                        "$ref" : "#/components/schemas/TenantIVRv2"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put" : {
        "tags" : [ "ivr" ],
        "summary" : "Cập nhật cấu hình IVR MỚI của một đầu số theo IVR id",
        "description" : "",
        "parameters" : [ {
          "name" : "ivr_id",
          "in" : "path",
          "description" : "IVR id",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "bc5108f4e031d06b06fe466d"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/TenantIVRv2"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/IVRTenantId"
                      }, {
                        "$ref" : "#/components/schemas/TenantIVRv2"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd/tenant_id/{tenant_id}/agent_ext" : {
      "get" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "agent" ],
        "summary" : "Lấy danh sách số nội bộ đang được sử dụng trong tenant",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant cần lấy danh sách agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : [ "102", "201", "203", "2222" ]
                }
              }
            }
          }
        }
      }
    },
    "/invite/create" : {
      "post" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "agent" ],
        "summary" : "Tạo mới agent",
        "description" : "Frontend URL: https://<tenant_domain>.stg.123cs.vn/list-agent.html<br/>Backend URL: http://wsetprofile-v1.stg.123cs.vn/invite/create<br/>Project: CloudV2.API.Web.SetProfile<br/>Method: SetController::inviteMemberDefaultAction()",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/AgentSchema"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "profile_id" : "5bffc608d0e59a00b93ed2da"
                  },
                  "message" : "SC_OK"
                }
              }
            }
          }
        }
      }
    },
    "/agent/agent_id/{agent_id}/refresh_sip_password" : {
      "post" : {
        "tags" : [ "agent" ],
        "summary" : "Refresh sip password của agent",
        "description" : "Refresh sip password của agent (không buộc đăng xuất)",
        "parameters" : [ {
          "name" : "agent_id",
          "in" : "path",
          "description" : "Id của agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        }, {
          "name" : "length",
          "in" : "query",
          "description" : "Độ dài password. Mặc định là 18 kí tự",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : 24
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "type" : "string",
                      "description" : "sip password đã được mã hóa và encode ở base64 format",
                      "example" : "7oZqto5019jacg4JMCBmeMk+y6Kodbm8YQcnS+37Btc="
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/agent/agent_id/{agent_id}/force_logout" : {
      "post" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "agent" ],
        "summary" : "Buộc agent logout khỏi các thiết bị đang đăng nhập",
        "description" : "Buộc agent logout khỏi các thiết bị đang đăng nhập (mặc định logout khỏi mobile app)",
        "parameters" : [ {
          "name" : "agent_id",
          "in" : "path",
          "description" : "Id của agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        }, {
          "name" : "refresh_password",
          "in" : "query",
          "description" : "Refresh sip password của agent (mặc định false)",
          "required" : false,
          "schema" : {
            "type" : "boolean"
          },
          "example" : true
        }, {
          "name" : "logout_web",
          "in" : "query",
          "description" : "Logout khỏi web quản trị (mặc định false)",
          "required" : false,
          "schema" : {
            "type" : "boolean"
          },
          "example" : true
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000
                }
              }
            }
          }
        }
      }
    },
    "/agent/agent_id/{agent_id}/force_logout_api_check" : {
      "post" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "deprecated" : true,
        "tags" : [ "agent" ],
        "summary" : "Buộc agent logout khỏi thiết bị mobile bằng API check .",
        "description" : "Buộc agent logout khỏi thiết bị mobile bằng API check.",
        "parameters" : [ {
          "name" : "agent_id",
          "in" : "path",
          "description" : "Id của agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000
                }
              }
            }
          }
        }
      }
    },
    "/agent/agent_id/{agent_id}/force_logout_push_notify" : {
      "post" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "deprecated" : true,
        "tags" : [ "agent" ],
        "summary" : "Buộc gent logout khỏi thiết bị mobile bằng push notification",
        "description" : "Buộc agent logout khỏi thiết bị mobile bằng push notification",
        "parameters" : [ {
          "name" : "agent_id",
          "in" : "path",
          "description" : "Id của agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000
                }
              }
            }
          }
        }
      }
    },
    "/agent/tenant_id/{tenant_id}/force_logout" : {
      "post" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "agent" ],
        "summary" : "Buộc tất cả agent trong tenant logout khỏi thiết bị mobile bằng API check và push notification",
        "description" : "Buộc tất cả agent trong tenant logout khỏi thiết bị mobile bằng API check và push notification",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        }, {
          "name" : "api_check",
          "in" : "path",
          "description" : "Force logout trên mobile bằng api check. Mặc định tắt.",
          "required" : true,
          "schema" : {
            "type" : "boolean"
          },
          "example" : true
        }, {
          "name" : "push_notify",
          "in" : "path",
          "description" : "Force logout trên mobile bằng push notification. Mặc định tắt.",
          "required" : true,
          "schema" : {
            "type" : "boolean"
          },
          "example" : true
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000
                }
              }
            }
          }
        }
      }
    },
    "/agent/tenant_id/{tenant_id}/force_logout_api_check" : {
      "post" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "deprecated" : true,
        "tags" : [ "agent" ],
        "summary" : "Buộc tất cả agent trong tenant logout khỏi thiết bị mobile bằng API check.",
        "description" : "Buộc tất cả agent trong tenant logout khỏi thiết bị mobile bằng API check.",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000
                }
              }
            }
          }
        }
      }
    },
    "/login/auth/loginv2/web/emailorphone/tenant/{tenant_id}" : {
      "post" : {
        "tags" : [ "agent" ],
        "summary" : "Lấy token chứng thực",
        "description" : "Backend URL: https://<api gateway>/login/auth/loginv2/web/emailorphone/tenant/{tenant_id}",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant mà token có hiệu lực",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "example" : {
                "username" : "baonq5@vng.com.vn",
                "password" : "xxxxxxxxxx"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "change_password" : false,
                    "expire_token" : 1645368842755,
                    "access_refresh_token_href" : "https://apigw.stg.123cs.vn/login/auth/access_tokenv2/eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJ0ZW5hbnRzIjpbeyJ0ZW5h",
                    "expire_refresh_token" : 1645368842769,
                    "ticket_id" : "ST-4361-Uf5xssCWBe0iz5ovr9HJmM39m1FJdcyPg-0Pu-229AdA4v.vinadata.vn",
                    "token" : "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJ0ZW5hbnRzIj"
                  },
                  "message" : "SC_OK"
                }
              }
            }
          }
        }
      }
    },
    "/agent/tenant_id/{tenant_id}/force_logout_push_notify" : {
      "post" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "deprecated" : true,
        "tags" : [ "agent" ],
        "summary" : "Buộc tất cả agent trong tenant logout khỏi thiết bị mobile bằng push notification",
        "description" : "Buộc tất cả agent trong tenant logout khỏi thiết bị mobile bằng push notification",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c1a762cc7095d5a7157eafd"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000
                }
              }
            }
          }
        }
      }
    },
    "/acd/agent_id/{agent_id}/ready" : {
      "get" : {
        "tags" : [ "agent" ],
        "summary" : "Kiểm tra trạng thái của agent có đang sẵn sàng nhận cuộc gọi hay không",
        "description" : "",
        "parameters" : [ {
          "name" : "agent_id",
          "in" : "path",
          "description" : "Id của agent cần kiểm tra",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c9201a3a69e9e00b9818eb8"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "want_receive_call" : true,
                    "ready" : true,
                    "can_receive_call" : true
                  }
                }
              }
            }
          }
        }
      }
    },
    "/profiles/delete/{profile_id}/agent/{agent_id}/tenant/{tenant_id}" : {
      "post" : {
        "tags" : [ "agent" ],
        "summary" : "Xóa agent",
        "parameters" : [ {
          "name" : "profile_id",
          "in" : "path",
          "description" : "profile_id của agent bị xóa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffad0"
        }, {
          "name" : "agent_id",
          "in" : "path",
          "description" : "agent_id của agent đang thực hiện thao tác xóa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacb"
        }, {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "tenant_id của tenant mà agent đang thuộc về",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        } ],
        "description" : "Frontend URL: https://<tenant_domain>.stg.123cs.vn/agent-detail_<profile_id>.html<br/>Backend URL: http://wsetprofile-v1.stg.123cs.vn/profiles/delete/{profile_id}/agent/{agent_id}/tenant/{tenant_id}<br/>Project: CloudV2.API.Web.SetProfile<br/>Method: SetController::updateAction()",
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "status" : "success"
                  },
                  "message" : "SC_OK"
                }
              }
            }
          }
        }
      }
    },
    "/profiles/update/{profile_id}/agent/{agent_id}/tenant/{tenant_id}" : {
      "post" : {
        "tags" : [ "agent" ],
        "summary" : "Update thông tin agent",
        "parameters" : [ {
          "name" : "profile_id",
          "in" : "path",
          "description" : "profile_id của agent sẽ được update",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffad0"
        }, {
          "name" : "agent_id",
          "in" : "path",
          "description" : "agent_id của agent đang thực hiện thao tác update",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacb"
        }, {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "tenant_id của tenant mà agent đang thuộc về",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        } ],
        "description" : "Frontend URL: https://<tenant_domain>.stg.123cs.vn/agent-detail_<profile_id>.html<br/>Backend URL: http://wsetprofile-v1.stg.123cs.vn/profiles/update/{profile_id}/agent/{agent_id}/tenant/{tenant_id}<br/>Project: CloudV2.API.Web.SetProfile<br/>Method: SetController::updateAction()",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "example" : {
                "fullname" : "Nguyễn Quốc Bảo",
                "jobtitle" : "",
                "addressinfo" : [ {
                  "address" : "",
                  "country_code" : "vn",
                  "country_name" : "Vietnam",
                  "id" : "",
                  "province_name" : "",
                  "province_code" : "",
                  "zip_code" : "",
                  "action" : "add"
                } ],
                "gender" : "",
                "birthday" : "",
                "timezone" : "",
                "language" : "",
                "attachfile" : [ ],
                "is_member" : true,
                "ext" : "101",
                "member" : {
                  "tenants" : [ {
                    "tenant_id" : "5c0dedf3f533a600b95ffacc",
                    "is_admin" : true,
                    "role_detail" : [ {
                      "id" : "5c0dee715a638e00b9d7c606",
                      "name" : "Quản trị hệ thống"
                    }, {
                      "id" : "5c0dee725a638e00b9d7c6c6",
                      "name" : "Quản trị thành viên"
                    } ],
                    "group_detail" : [ ],
                    "billing_limit" : {
                      "is_limit" : false,
                      "limit_value" : 0
                    }
                  } ],
                  "customercode" : "5c0dee725a638e00b9d7c6b2"
                },
                "lastupdateby" : "5c0dedf3f533a600b95ffacb",
                "profileid" : "5c0dedf3f533a600b95ffad0"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "status" : "success"
                  },
                  "message" : "SC_OK"
                }
              }
            }
          }
        }
      }
    },
    "/acd/tenant_id/{tenant_id}/agents" : {
      "get" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "agent" ],
        "summary" : "Lấy danh sách agent và số nội bộ nhỏ nhất không được sử dụng bởi một agent",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Id của tenant cần lấy danh sách agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ListAgentFull"
                },
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "min_ext_available" : "101",
                    "list_agent" : [ {
                      "ext" : "102",
                      "name" : "BinhLD",
                      "id" : "5c18c63659f91d00babd49d4"
                    }, {
                      "ext" : "201",
                      "name" : "ACD 1",
                      "id" : "5c0e30a6f533a600b9eff482"
                    }, {
                      "ext" : "203",
                      "name" : "ACD 3",
                      "id" : "5c0e4930f533a600b9eff490"
                    }, {
                      "ext" : "2222",
                      "name" : "Nguyễn Quốc Bảo",
                      "id" : "5c0dedf3f533a600b95ffacb"
                    } ]
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd/agent_id/{agent_id}/delete" : {
      "delete" : {
        "security" : [ {
          "BearerAuth" : [ ]
        } ],
        "tags" : [ "agent" ],
        "summary" : "Xoá agent ra khỏi tất cả các group và cập nhật lại routing info của các group đó",
        "parameters" : [ {
          "name" : "agent_id",
          "in" : "path",
          "description" : "Id của agent cần xóa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "agent_id" : "5c1b1941e919a200ba720759",
                    "affected_groups" : [ "5c0e2030075aac00ba3af9d8" ],
                    "message" : "Agent has been removed from all groups and routing info of them have been reloaded"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd/group/create" : {
      "post" : {
        "tags" : [ "acd" ],
        "summary" : "Tạo thông tin cấu hình của một nhóm ACD",
        "parameters" : [ {
          "name" : "agent_name",
          "in" : "query",
          "description" : "Tên agent thực hiện hành động tạo",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "Quoc-Bao Nguyen"
        }, {
          "name" : "agent_id",
          "in" : "query",
          "description" : "ID của agent thực hiện hành động tạo",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "c5642ff7e3e2b7b643997940"
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ACDGroup"
              },
              "example" : {
                "name" : "Nhóm R&D",
                "tenant_id" : "58214eb8b7c68c55130b8b47",
                "description" : "Nhóm Nghiên cứu & Phát triển",
                "config" : {
                  "routing" : {
                    "mode" : "fixed",
                    "config" : [ "1236e9f6a5dd836f8f4fb52d", "1b9ded48877768f6084a626d", "cf67d5577c1ec8ef5b2cd68d", "7d2c8f5cb6b5494a40fab352" ],
                    "time_wait" : "20"
                  },
                  "backup_routes" : [ {
                    "mode" : "agent",
                    "ready" : true,
                    "config" : "7d2c8f5cb6b5494a40fab352"
                  } ]
                },
                "agents" : [ "1236e9f6a5dd836f8f4fb52d", "1b9ded48877768f6084a626d", "cf67d5577c1ec8ef5b2cd68d", "7d2c8f5cb6b5494a40fab352" ]
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/ACDGroupId"
                      }, {
                        "$ref" : "#/components/schemas/ACDGroup"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd/tenant_id/{tenant_id}/group_number/{group_number}" : {
      "get" : {
        "tags" : [ "acd" ],
        "summary" : "Lấy toàn bộ thông tin cấu hình của một nhóm ACD theo tenant_id và group_number",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "tenant_id của tenant sở hữu group",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacc"
        }, {
          "name" : "group_number",
          "in" : "path",
          "description" : "Số nội bộ của nhóm",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : 99151
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/ACDGroupId"
                      }, {
                        "$ref" : "#/components/schemas/ACDGroup"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd/group_id/{group_id}" : {
      "get" : {
        "tags" : [ "acd" ],
        "summary" : "Lấy toàn bộ thông tin cấu hình của một nhóm ACD",
        "parameters" : [ {
          "name" : "group_id",
          "in" : "path",
          "description" : "ID của group trong MongoDB",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "fda468600d079a0443c40ca7"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/ACDGroupId"
                      }, {
                        "$ref" : "#/components/schemas/ACDGroup"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put" : {
        "tags" : [ "acd" ],
        "summary" : "Chỉnh sửa cấu hình một nhóm ACD. Tạm thời chỉ hỗ trợ dạng update full-presentation",
        "parameters" : [ {
          "name" : "group_id",
          "in" : "path",
          "description" : "ID của group trong MongoDB",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0656a1e00caea4f447dc40"
        }, {
          "name" : "agent_name",
          "in" : "query",
          "description" : "Tên agent thực hiện hành động sửa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "Quoc-Bao Nguyen"
        }, {
          "name" : "agent_id",
          "in" : "query",
          "description" : "ID của agent thực hiện hành động sửa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "c5642ff7e3e2b7b643997940"
        } ],
        "requestBody" : {
          "description" : "Cấu hình ACD",
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ACDGroup"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/ACDGroupId"
                      }, {
                        "$ref" : "#/components/schemas/ACDGroup"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "acd" ],
        "summary" : "Xóa group ACD",
        "parameters" : [ {
          "name" : "group_id",
          "in" : "path",
          "description" : "ID của group trong MongoDB",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "fda468600d079a0443c40ca7"
        }, {
          "name" : "agent_name",
          "in" : "query",
          "description" : "Tên agent thực hiện hành động xóa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "Quoc-Bao Nguyen"
        }, {
          "name" : "agent_id",
          "in" : "query",
          "description" : "ID của agent thực hiện hành động xóa",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "c5642ff7e3e2b7b643997940"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation"
          }
        }
      }
    },
    "/acd/tenant_id/{tenant_id}/groups" : {
      "get" : {
        "tags" : [ "acd" ],
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "Tenant ID",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "58214eb8b7c68c55130b8b47"
        } ],
        "summary" : "Lấy danh sách nhóm ACD thuộc sở hữu của tenant",
        "description" : "",
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "type" : "array",
                      "items" : {
                        "allOf" : [ {
                          "$ref" : "#/components/schemas/ACDGroupId"
                        }, {
                          "$ref" : "#/components/schemas/ACDGroupInfo"
                        } ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd/tenant_id/{tenant_id}/files" : {
      "get" : {
        "tags" : [ "acd" ],
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "tenant_id của group trong MongoDB",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "fda468600d079a0443c40ca7"
        } ],
        "summary" : "Lấy danh sách các file ghi âm đã upload của nhóm tổng đài",
        "description" : "Đường dẫn đến file: http://static.stg.123cs.vn/acd/tenant_id/filename",
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/FileList"
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post" : {
        "tags" : [ "acd" ],
        "summary" : "Upload file ghi âm cho nhóm tổng đài. Hỗ trợ convert các định dạng phổ biến như mp3, m4a, acc,... sang wav",
        "description" : "Đường dẫn đến file: http://static.stg.123cs.vn/acd/tenant_id/filename",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "tenant_id giữ file được upload",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c9201a3a69e9e00b9818eb9"
        } ],
        "requestBody" : {
          "content" : {
            "multipart/form-data" : {
              "schema" : {
                "type" : "object",
                "properties" : {
                  "file" : {
                    "type" : "string",
                    "format" : "binary"
                  }
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "description" : "Mã trả về: 1000 (thành công), 20001 (convert file ghi âm thất bại)",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/FileList"
                      }, {
                        "type" : "object",
                        "properties" : {
                          "uploaded_file" : {
                            "type" : "string",
                            "description" : "Tên file vừa được upload",
                            "example" : "hello.mp3"
                          },
                          "converted_file" : {
                            "type" : "string",
                            "description" : "Tên file vừa upload sau khi đã convert",
                            "example" : "hello.wav"
                          }
                        }
                      } ]
                    }
                  }
                },
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "default" : [ "AllBusyByeFor99000v2.wav", "Greeting.wav" ],
                    "endcall" : "AllBusyByeFor99000v2.wav",
                    "greeting" : "Greeting.wav",
                    "files" : [ "AllBusyByeFor99000v2.wav", "Greeting.wav", "hello.wav" ],
                    "uploaded_file" : "hello.mp3",
                    "converted_file" : "hello.wav"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd/tenant_id/{tenant_id}/file/{file}" : {
      "delete" : {
        "tags" : [ "acd" ],
        "summary" : "Xóa file ghi âm đã upload",
        "description" : "Đường dẫn đến file: http://static.stg.123cs.vn/acd/tenant_id/filename",
        "parameters" : [ {
          "name" : "tenant_id",
          "in" : "path",
          "description" : "tenant_id",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "58214eb8b7c68c55130b8b47"
        }, {
          "name" : "file",
          "in" : "path",
          "description" : "Tên file ghi âm cần xóa.",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "hello.wav"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/FileList"
                      }, {
                        "type" : "object",
                        "properties" : {
                          "deleted_file" : {
                            "type" : "string",
                            "description" : "Tên file đã bị xóa. Nếu rỗng tức là file cần xóa không tồn tại.",
                            "example" : "hello.wav"
                          }
                        }
                      } ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/routing_info" : {
      "post" : {
        "tags" : [ "routing_info" ],
        "summary" : "Lấy toàn bộ thông tin cấu hình của một nhóm ACD",
        "description" : "URL: http://pushcall-v1.stg.123cs.vn/routing_info</br>Project: CloudV2.API.NotificationForCallCenter</br>Method: NotificationController::routingInfoAction()",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "type" : "string",
                "example" : "dsgsdgsdg"
              },
              "example" : {
                "ReqRouting" : {
                  "FromUSER" : {
                    "from" : "02812345678@acd3.stgsip.123cs.vn",
                    "to" : "99151@acd3.stgsip.123cs.vn",
                    "transactionid" : {
                      "callid" : "111g11111",
                      "index" : "",
                      "label" : "456654"
                    }
                  }
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "properties" : {
                    "code" : {
                      "type" : "integer",
                      "example" : 1000
                    },
                    "data" : {
                      "allOf" : [ {
                        "$ref" : "#/components/schemas/RoutingInfoResponse"
                      } ]
                    }
                  }
                },
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "routing_info" : {
                      "tenant_new_package" : true,
                      "r_v3_bk" : [ {
                        "dest" : [ {
                          "v" : 9.87653311E8,
                          "rd" : "1"
                        } ]
                      } ],
                      "r_v3" : [ {
                        "ext" : [ {
                          "v" : "201",
                          "rd" : "1"
                        } ]
                      }, {
                        "ext" : [ {
                          "v" : "202",
                          "rd" : "1"
                        } ]
                      } ],
                      "ge" : "99151",
                      "gt" : "fixed",
                      "px" : "49.213.127.3",
                      "tw" : "30"
                    },
                    "trans_id" : {
                      "label" : "456654",
                      "cid" : "111g11111",
                      "idx" : ""
                    }
                  },
                  "message" : "SC_OK"
                }
              }
            }
          }
        }
      }
    },
    "/set_routing_info" : {
      "post" : {
        "tags" : [ "routing_info" ],
        "summary" : "Set cấu hình routing của nhóm một nhóm ACD",
        "description" : "URL: http://pushcall-v1.stg.123cs.vn/set_routing_info</br>Project: CloudV2.API.NotificationForCallCenter</br>Method: NotificationController::setRoutingInfoAction()",
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "domain" : "acd3.stgsip.123cs.vn",
                  "groups" : [ {
                    "proxy" : "49.213.127.3",
                    "routes" : [ {
                      "ext" : [ "201@acd3.stgsip.123cs.vn" ],
                      "timeWait" : 30,
                      "order" : 1
                    }, {
                      "ext" : [ "202@acd3.stgsip.123cs.vn" ],
                      "timeWait" : 30,
                      "order" : 2
                    } ],
                    "groupType" : "fixed",
                    "backup_routes" : [ {
                      "ready" : true,
                      "dest" : [ 9.87653311E8 ],
                      "timeWait" : 30,
                      "order" : 1
                    } ],
                    "groupExt" : "99151"
                  } ]
                }
              }
            }
          }
        }
      }
    },
    "/acd/group_id/{group_id}/reload_routing_info" : {
      "post" : {
        "tags" : [ "routing_info" ],
        "summary" : "Reload routing info của một group theo group_id",
        "parameters" : [ {
          "name" : "group_id",
          "in" : "path",
          "description" : "Id của group",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0e2030075aac00ba3af9d8"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "group_id" : "5c0e2030075aac00ba3af9d8",
                    "message" : "Routing info of group has been reloaded"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/acd/agent_id/{agent_id}/reload_routing_info" : {
      "post" : {
        "tags" : [ "routing_info" ],
        "summary" : "Reload routing info của tất cả các group có agent theo agent_id tham gia",
        "parameters" : [ {
          "name" : "agent_id",
          "in" : "path",
          "description" : "Id của agent",
          "required" : true,
          "schema" : {
            "type" : "string"
          },
          "example" : "5c0dedf3f533a600b95ffacb"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "content" : {
              "application/json" : {
                "example" : {
                  "code" : 1000,
                  "data" : {
                    "agent_id" : "5c0dedf3f533a600b95ffacb",
                    "affected_groups" : [ "5c0e2030075aac00ba3af9d8" ],
                    "message" : "Routing info of groups that contain the agent has been reloaded"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components" : {
    "schemas" : {
      "IVRTenantId" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "description" : "Id của cấu hình IVR",
            "example" : "fda468600d079a0443c40f21"
          }
        }
      },
      "TenantIVR" : {
        "description" : "Cấu hình IVR của một tenant",
        "type" : "object",
        "properties" : {
          "tenant_id" : {
            "type" : "string",
            "description" : "tenant_id của tenant",
            "example" : "5c0dedf3f533a600b95ffacc"
          },
          "tenant_domain" : {
            "type" : "string",
            "description" : "domain của tenant",
            "example" : "acd3"
          },
          "numbers" : {
            "description" : "Danh sách đầu số được áp dụng cấu hình IVR",
            "type" : "array",
            "items" : {
              "type" : "string",
              "description" : "Đầu số gọi vào"
            },
            "example" : [ 2.836221443E9 ]
          },
          "ivr_mode" : {
            "type" : "integer",
            "enum" : [ 0, 1, 2 ],
            "description" : "Chế độ cấu hình IVR thủ công. Mode 0: sử dụng cấu hình IVR mặc định. Mode 1: Sử dụng cấu hình IVR do người dùng tùy chỉnh. Mode 2: Sử dụng cấu hình IVR do vCS tùy chỉnh thủ công",
            "example" : 1
          },
          "ivr_conditions" : {
            "type" : "array",
            "items" : {
              "allOf" : [ {
                "$ref" : "#/components/schemas/IVRCondition"
              } ]
            }
          },
          "key_press_mode" : {
            "type" : "integer",
            "enum" : [ 0, 1, 2 ],
            "description" : "Chế độ cấu hình bấm phím thủ công. Mode 0: Sử dụng thiết lập mặc định khi người dùng không sử dụng cấu hình bấm phím. Mode 1: Sử dụng cấu hình bấm phím do người dùng tùy chỉnh. Mode 2: Sử dụng cấu hình điều phối thông minh (GroupACD khôn).",
            "example" : 1
          },
          "key_press_action" : {
            "type" : "array",
            "items" : {
              "allOf" : [ {
                "$ref" : "#/components/schemas/KeyPressAction"
              } ]
            }
          },
          "key_press_timeout" : {
            "description" : "Hành động khi khách hàng không nhấn phím",
            "type" : "object",
            "properties" : {
              "file" : {
                "type" : "string",
                "description" : "File ghi âm được phát",
                "example" : "timeout.wav"
              },
              "action" : {
                "type" : "string",
                "enum" : [ "repeat_ivr", "end_call" ],
                "description" : "Hành động sẽ thực hiện"
              }
            }
          },
          "key_press_invalid" : {
            "description" : "Hành động khi khách hàng ấn phím không hợp lệ",
            "type" : "object",
            "properties" : {
              "file" : {
                "type" : "string",
                "description" : "File ghi âm được phát",
                "example" : "invalid.wav"
              },
              "action" : {
                "type" : "string",
                "enum" : [ "repeat_ivr", "end_call" ],
                "description" : "Hành động sẽ thực hiện"
              }
            }
          },
          "key_no_press" : {
            "description" : "Hành động khi khách hàng không nhấn phím",
            "allOf" : [ {
              "$ref" : "#/components/schemas/KeyPressAction"
            } ]
          },
          "agent_priority_call" : {
            "type" : "boolean",
            "description" : "Cấu hình bật/tắt ưu tiên chuyển cuộc gọi cho nhân viên phụ trách",
            "example" : true
          },
          "agent_priority_backup" : {
            "description" : "Cấu hình backup route nếu thất bại khi ưu tiên chuyển cuộc gọi đến nhân viên phụ trách",
            "type" : "array",
            "items" : {
              "allOf" : [ {
                "$ref" : "#/components/schemas/AgentBackupRoute"
              } ]
            }
          },
          "agent_priority_count" : {
            "minimum" : 1,
            "maximum" : 10,
            "description" : "Số lần liên hệ thất bại tối đa trước khi chức năng ưu tiên chuyển cuộc gọi bị tắt cho một khách hàng",
            "example" : 5
          },
          "agent_recent_call" : {
            "type" : "boolean",
            "description" : "Bật/tắt ưu tiên chuyển cuộc gọi đến cho nhân viên mới liên lạc (routing đến đúng agent mà không quan tâm số nội bộ của agent đó)",
            "example" : true
          },
          "agent_recent_range" : {
            "type" : "string",
            "minimum" : 5,
            "maximum" : 600,
            "description" : "Thời gian lớn nhất đến lần liên lạc gần nhất mà cuộc gọi sẽ được chuyển cho nhân viên tiếp nhận đã nhận cuộc gọi trước đó.",
            "example" : 30
          }
        }
      },
      "KeyPressAction" : {
        "description" : "Cấu hình bấm phím",
        "type" : "object",
        "properties" : {
          "digit" : {
            "type" : "string",
            "enum" : [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "*", "#", " " ],
            "description" : "Phím bấm được nhấn.",
            "example" : "1"
          },
          "forward_to" : {
            "oneOf" : [ {
              "type" : "string",
              "format" : "agent_id:\\w+",
              "description" : "Id của agent tiếp nhận cuộc gọi",
              "example" : "agent_id:5c0dedf3f533a600b95ffacb"
            }, {
              "type" : "string",
              "format" : "group_id:\\w+",
              "description" : "Id của group tiếp nhận cuộc gọi",
              "example" : "group_id:5c0e2030075aac00ba3af9d8"
            }, {
              "type" : "string",
              "description" : "Sử dụng điều phối cuộc gọi bằng giọng nói",
              "example" : "voice_routing"
            } ],
            "example" : "agent_id:5c0dedf3f533a600b95ffacb"
          },
          "file" : {
            "type" : "string",
            "description" : "Đường dẫn đến file ghi âm được chạy khi nhấn phím",
            "example" : "default"
          },
          "play_file" : {
            "type" : "string",
            "description" : "Bật/tắt phát file ghi âm khi nhấn phím",
            "example" : true
          }
        }
      },
      "IVRCondition" : {
        "description" : "Điều kiện phát lời chào (cấu hình time of day). Tham khảo <a href=\"https://freeswitch.org/confluence/display/FREESWITCH/Time+of+Day+and+Holiday+Routing#TimeofDayandHolidayRouting-HolidayRouting\">Time of Day and Holiday Routing</a>",
        "type" : "object",
        "properties" : {
          "file" : {
            "type" : "string",
            "description" : "Đường dẫn đến file ghi âm sẽ bật nếu cuộc gọi tới tổng đài thỏa các điều kiện về thời gian"
          },
          "mode" : {
            "type" : "integer",
            "enum" : [ 0, 1, 2 ],
            "description" : "Bật/tắt cấu hình . Mode 0: tắt cấu hình. Mode 1: bật cấu hình. Mode 2: Sử dụng cấu hình do vCS tùy chỉnh thủ công"
          },
          "year" : {
            "type" : "string",
            "minimum" : 0,
            "maximum" : 9999,
            "description" : "Calendar year. Can type in range like 2018-2019"
          },
          "yday" : {
            "type" : "string",
            "minimum" : 1,
            "maximum" : 366,
            "description" : "Day of year. Can type in range like 1-10"
          },
          "mon" : {
            "type" : "string",
            "minimum" : 1,
            "maximum" : 12,
            "description" : "Month (example: Jan = 1). Can type in range like 1-10"
          },
          "mday" : {
            "type" : "string",
            "minimum" : 1,
            "maximum" : 31,
            "description" : "Day of month. Can type in range like 1-10"
          },
          "week" : {
            "type" : "string",
            "minimum" : 1,
            "maximum" : 53,
            "description" : "Week of year. Can type in range like 1-10"
          },
          "wday" : {
            "oneOf" : [ {
              "type" : "string",
              "enum" : [ "mon", "tue", "wed", "thu", "fri", "sat", "sun" ],
              "description" : "Day of week"
            }, {
              "type" : "string",
              "minimum" : 1,
              "maximum" : 7,
              "description" : "Day of week (sun = 1, mon = 2, etc)"
            } ]
          },
          "hour" : {
            "type" : "string",
            "minimum" : 0,
            "maximum" : 23,
            "description" : "Hour. Can type in range like 1-10"
          },
          "minute" : {
            "type" : "string",
            "minimum" : 0,
            "maximum" : 59,
            "description" : "Minute (of the hour). Can type in range like 1-10"
          },
          "minute_of_day" : {
            "type" : "string",
            "minimum" : 0,
            "maximum" : 1440,
            "description" : "Minute of the day (midnight = 1, 1am = 60, noon = 720, etc). Can type in range like 1-60"
          },
          "time_of_day" : {
            "oneOf" : [ {
              "type" : "string",
              "format" : "hh:mm-hh:mm",
              "description" : "Time range (24-hour format)",
              "example" : "08:00-17:00"
            }, {
              "type" : "string",
              "format" : "hh:mm:ss-hh:mm:ss",
              "description" : "Time range, with seconds (24-hour format)"
            } ]
          },
          "date_time" : {
            "oneOf" : [ {
              "type" : "string",
              "format" : "YYYY-MM-DD hh:mm~YYYY-MM-DD hh:mm",
              "description" : "date time range, note the ~ delimiter",
              "example" : "2010-10-01 00:00:01~2010-10-15 23:59:59"
            }, {
              "type" : "string",
              "format" : "YYYY-MM-DD hh:mm:ss~YYYY-MM-DD hh:mm:ss",
              "description" : "Date time range, with seconds, note the ~ delimiter"
            } ]
          },
          "terminate_call" : {
            "type" : "boolean",
            "description" : "Ngat cuoc goi",
            "example" : true
          }
        },
        "example" : {
          "mode" : 1,
          "year" : "2018",
          "month" : "9",
          "mday" : "2",
          "file" : "default",
          "terminate_call" : true
        }
      },
      "Agent" : {
        "description" : "Thông tin đơn giản của một agent",
        "type" : "object",
        "properties" : {
          "agent_name" : {
            "type" : "string",
            "description" : "Tên của agent",
            "example" : "Quoc-Bao Nguyen"
          },
          "agent_id" : {
            "type" : "string",
            "description" : "agent_id",
            "example" : "c5642ff7e3e2b7b643997940"
          }
        }
      },
      "Timestamp" : {
        "description" : "Thời gian tạo/cập nhật",
        "type" : "object",
        "properties" : {
          "creation_date" : {
            "type" : "integer",
            "description" : "Thời gian tạo nhóm theo UNIX timestamp",
            "example" : 1479975851507
          },
          "modification_date" : {
            "type" : "integer",
            "description" : "Thời điểm cập nhật thông tin lần cuối",
            "example" : 1479975851507
          }
        }
      },
      "ListAgent" : {
        "description" : "Danh sách thành viên (agent)",
        "type" : "object",
        "properties" : {
          "agents" : {
            "type" : "array",
            "items" : {
              "type" : "string",
              "description" : "agent_id của thành viên",
              "example" : "50863ac4101a0b59b0be782b"
            },
            "example" : [ "1236e9f6a5dd836f8f4fb52d", "1b9ded48877768f6084a626d", "cf67d5577c1ec8ef5b2cd68d", "7d2c8f5cb6b5494a40fab352" ]
          }
        }
      },
      "ListAgentFull" : {
        "description" : "Danh sách agent kèm tên (lấy từ profile) và số nội bộ",
        "type" : "object",
        "properties" : {
          "min_ext_available" : {
            "type" : "string",
            "description" : "Số nội bộ nhỏ nhất đang có sẵn",
            "example" : "101"
          },
          "list_agent" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "ext" : {
                  "type" : "string",
                  "description" : "Số nội bộ của agent",
                  "example" : "102"
                },
                "name" : {
                  "type" : "string",
                  "description" : "Tên đầy đủ của agent",
                  "example" : "Nguyễn Quốc Bảo"
                },
                "id" : {
                  "type" : "string",
                  "description" : "Id của agent",
                  "example" : "5c0dedf3f533a600b95ffacb"
                }
              }
            }
          }
        }
      },
      "ACDGroupSmart" : {
        "description" : "Nhóm điều phối cuộc gọi thông minh (nhóm cũ là nhóm ngu)",
        "allOf" : [ {
          "$ref" : "#/components/schemas/ACDGroup"
        }, {
          "type" : "object",
          "properties" : {
            "contact_attribute" : {
              "type" : "boolean",
              "description" : "Sử dụng thuộc tính trong chi tiết danh bạ để điều phối cuộc gọi",
              "example" : true
            },
            "contact_attribute_list" : {
              "description" : "Danh sách thuộc tính chi tiết trong danh bạ",
              "type" : "array",
              "items" : {
                "allOf" : [ {
                  "$ref" : "#/components/schemas/AttributeCode"
                }, {
                  "$ref" : "#/components/schemas/AttributeValue"
                } ]
              }
            },
            "speaking_pattern" : {
              "type" : "boolean",
              "description" : "Sử dụng danh sách các từ người gọi nói để điều phối cuộc gọi",
              "example" : true
            },
            "speaking_pattern_list" : {
              "type" : "array",
              "items" : {
                "type" : "string",
                "description" : "Từ được nói",
                "example" : [ "Chăm sóc khách hàng", "Võ Lâm Truyền Kỳ", "Võ Lâm Chi Mộng" ]
              }
            },
            "public_number" : {
              "type" : "boolean",
              "description" : "Điều phối cuộc gọi theo đầu số gọi vào",
              "example" : true
            },
            "public_number_map" : {
              "type" : "object",
              "additionalProperties" : {
                "type" : "boolean",
                "description" : "Cấu hình đầu số gọi vào cho phép điều phối (xem example trong phần editor)"
              },
              "example" : {
                "02812345678" : true,
                "19001234" : false
              }
            },
            "day_of_week" : {
              "type" : "boolean",
              "description" : "Sử dụng cấu hình ngày trong tuần",
              "example" : true
            },
            "day_of_week_map" : {
              "type" : "object",
              "additionalProperties" : {
                "type" : "boolean",
                "description" : "Cấu hình ngày trong tuần (xem example trong phần editor)"
              },
              "example" : {
                "mon" : true,
                "tue" : false,
                "wed" : true,
                "thu" : true,
                "fri" : false,
                "sat" : true,
                "sun" : false
              }
            },
            "time_of_day" : {
              "type" : "boolean",
              "description" : "Điều phối cuộc gọi trong khoảng thời gian trong ngày",
              "example" : true
            },
            "time_of_day_list" : {
              "type" : "array",
              "description" : "Danh sách thời gian trong ngày",
              "items" : {
                "type" : "string",
                "example" : "09:00-18:00"
              }
            },
            "order" : {
              "type" : "integer",
              "description" : "Độ ưu tiên của group",
              "example" : 1
            }
          }
        } ]
      },
      "AttributeName" : {
        "description" : "Tên một thuộc tính (vào phần editor để xem ví dụ)",
        "type" : "object",
        "properties" : {
          "fieldname" : {
            "type" : "object",
            "additionalProperties" : {
              "type" : "string"
            },
            "example" : {
              "vn" : "Giới tính",
              "en" : "Gender"
            }
          }
        }
      },
      "AttributeCode" : {
        "description" : "Danh sách thuộc tính",
        "type" : "object",
        "properties" : {
          "fieldcode" : {
            "type" : "string",
            "description" : "Mã thuộc tính (nếu là thuộc tính tùy chỉnh thì field này chứa tên thuộc tính)",
            "example" : "gender"
          }
        }
      },
      "AttributeValueList" : {
        "description" : "Danh sách giá trị của thuộc tính",
        "type" : "object",
        "properties" : {
          "valuedefault" : {
            "type" : "array",
            "items" : {
              "type" : "string",
              "description" : "Giá trị của thuộc tính"
            },
            "example" : [ "Nam", "Nữ", "Chưa xác định" ]
          }
        }
      },
      "AttributeValue" : {
        "description" : "Danh sách thuộc tính",
        "type" : "object",
        "properties" : {
          "fieldvalue" : {
            "type" : "string",
            "description" : "Giá trị thuộc tính",
            "example" : "Nam"
          }
        }
      },
      "ACDGroupId" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "description" : "group_id của group",
            "example" : "fda468600d079a0443c40ca7"
          }
        }
      },
      "ACDGroup" : {
        "description" : "Nhóm điều phối cuộc gọi ACD",
        "allOf" : [ {
          "$ref" : "#/components/schemas/ACDGroupInfo"
        }, {
          "$ref" : "#/components/schemas/ACDConfig"
        }, {
          "$ref" : "#/components/schemas/ListAgent"
        } ]
      },
      "ACDConfig" : {
        "type" : "object",
        "description" : "Cấu hình ACD của nhóm",
        "properties" : {
          "config" : {
            "type" : "object",
            "properties" : {
              "routing" : {
                "allOf" : [ {
                  "$ref" : "#/components/schemas/ACDRouting"
                } ]
              },
              "backup_routes" : {
                "allOf" : [ {
                  "$ref" : "#/components/schemas/ACDBackupRoute"
                } ]
              }
            }
          }
        }
      },
      "ACDGroupInfo" : {
        "description" : "Thông tin chung của nhóm ACD",
        "allOf" : [ {
          "type" : "object",
          "properties" : {
            "name" : {
              "type" : "string",
              "description" : "Tên nhóm",
              "example" : "Nhóm R&D"
            },
            "tenant_id" : {
              "type" : "string",
              "description" : "tenant đang sở hữu nhóm",
              "example" : "58214eb8b7c68c55130b8b47"
            },
            "group_number" : {
              "type" : "string",
              "description" : "Số  nhóm tổng đài",
              "example" : "99151"
            },
            "description" : {
              "type" : "string",
              "description" : "Mô tả nhóm",
              "example" : "Nhóm Nghiên cứu và Phát triển"
            },
            "created_by" : {
              "allOf" : [ {
                "$ref" : "#/components/schemas/Agent"
              } ]
            },
            "modified_by" : {
              "allOf" : [ {
                "$ref" : "#/components/schemas/Agent"
              } ]
            }
          }
        }, {
          "$ref" : "#/components/schemas/Timestamp"
        } ]
      },
      "ACDBackupRoute" : {
        "description" : "Cấu hình ACD khi cuộc gọi không được tổng đài viên nào trong cấu hình ACDRouting trả lời",
        "type" : "array",
        "items" : {
          "type" : "object",
          "properties" : {
            "mode" : {
              "type" : "string",
              "enum" : [ "agent", "group", "phone_number", "file" ],
              "description" : "Chế độ chuyển tiếp cuộc gọi khi tất cả agent đều bận: agent (forward tới agent nội bộ), group (forward tới nhóm nội bộ), phone_number (forward tớ số điện thoại bên ngoài), file (mở file thông báo)",
              "example" : "agent"
            },
            "config" : {
              "type" : "string",
              "enum" : [ "bb50022f57dd2f5ea70e884b", "544261825da7fa1ecbbc8cc8", "0906562266", "all_agent_busy.mp3" ],
              "description" : "Cấu hình tương ứng với mode. Nếu có nhiều giá trị thì các giá trị cần cách nhau một dấu phẩy (không được phép có khoảng trống). API sẽ ghi nhận giá trị đầu tiên",
              "example" : "544261825da7fa1ecbbc8cc8"
            },
            "ready" : {
              "type" : "boolean",
              "description" : "Trạng thái ready",
              "example" : true
            }
          }
        }
      },
      "ACDRouting" : {
        "description" : "Cấu hình điều phối cuộc gọi",
        "allOf" : [ {
          "oneOf" : [ {
            "type" : "object",
            "properties" : {
              "mode" : {
                "type" : "string",
                "pattern" : "fixed",
                "description" : "Thứ tự nhận cuộc gọi cố định"
              },
              "config" : {
                "type" : "array",
                "description" : "Danh sách nhân viên nhận cuộc gọi THEO THỨ TỰ",
                "items" : {
                  "type" : "string",
                  "description" : "Danh sách agent_id nhận cuộc gọi",
                  "example" : [ "c73c24cbdf3970a132ab1e6e", "bb8e4ea6a5409c2996fb8270", "f2318b4a798092ae2fabfcf1", "f740ac4015e275c5a1a3fdb7" ]
                }
              }
            }
          }, {
            "type" : "object",
            "properties" : {
              "mode" : {
                "type" : "string",
                "enum" : [ "roundrobin", "all", "most_free" ],
                "description" : "Tuần tự (round_robin), đổ chuông đồng thời (all), chuyển tới nhân viên rãnh lâu nhất (most_free)",
                "example" : "all"
              }
            }
          } ]
        }, {
          "type" : "object",
          "properties" : {
            "time_wait" : {
              "type" : "string",
              "description" : "Thời gian đổ chuông",
              "example" : 20
            }
          }
        } ],
        "example" : {
          "mode" : "fixed",
          "config" : [ "c73c24cbdf3970a132ab1e6e", "bb8e4ea6a5409c2996fb8270", "f2318b4a798092ae2fabfcf1", "f740ac4015e275c5a1a3fdb7" ],
          "time_wait" : 20
        }
      },
      "RoutingInfoResponse" : {
        "type" : "object",
        "properties" : {
          "routing_info" : {
            "type" : "object",
            "properties" : {
              "tenant_new_package" : {
                "type" : "boolean",
                "example" : true
              },
              "r_v3_bk" : {
                "description" : "Cấu hình forward cuộc gọi khi tất cả các agent đều không nhấc máy",
                "type" : "array",
                "items" : {
                  "type" : "object",
                  "properties" : {
                    "dest" : {
                      "type" : "array",
                      "items" : {
                        "type" : "object",
                        "properties" : {
                          "v" : {
                            "type" : "string",
                            "description" : "Số được forward đến, có thể là số điện thoại hoặc số nội bộ nhân viên, số nội bộ nhóm",
                            "example" : 9.06562266E8
                          },
                          "rd" : {
                            "type" : "string",
                            "enum" : [ "0", "1" ],
                            "description" : "Trạng thái sẵn sàng của cấu hình",
                            "example" : "1"
                          }
                        }
                      }
                    }
                  }
                }
              },
              "r_v3" : {
                "description" : "Routing version 3",
                "type" : "array",
                "items" : {
                  "type" : "object",
                  "properties" : {
                    "ext" : {
                      "type" : "array",
                      "items" : {
                        "type" : "object",
                        "properties" : {
                          "v" : {
                            "type" : "string",
                            "description" : "Số nội bộ của agent",
                            "example" : "101"
                          },
                          "rd" : {
                            "type" : "string",
                            "description" : "Độ ưu tiên",
                            "example" : "1"
                          }
                        }
                      }
                    }
                  }
                }
              },
              "ge" : {
                "type" : "string",
                "description" : "Số nhóm nội bộ",
                "example" : "99151"
              },
              "gt" : {
                "type" : "string",
                "description" : "Phương thức routing",
                "example" : "roundrobin"
              },
              "px" : {
                "type" : "string",
                "description" : "SIP proxy",
                "example" : "49.213.127.3"
              },
              "tw" : {
                "type" : "string",
                "description" : "Thời gian đổ chuông (timewait)",
                "example" : "20"
              }
            }
          },
          "trans_id" : {
            "type" : "object",
            "description" : "SIP transaction ID (dùng để debug)",
            "properties" : {
              "label" : {
                "type" : "string",
                "example" : "456654"
              },
              "cid" : {
                "type" : "string",
                "example" : "111g11111"
              },
              "idx" : {
                "type" : "string",
                "example" : ""
              }
            }
          }
        }
      },
      "FileList" : {
        "description" : "Danh sách tên file đã upload. Để truy cập đến file ghi âm cần gắn thêm domain, tenant_id và group_id. Ví dụ: https://static.stg.123cs.vn/<tenant_id>/acd/<tên file>. File trả về LUÔN LUÔN có phần mở rộng là wav (định dạng PCM).",
        "type" : "object",
        "properties" : {
          "files" : {
            "type" : "array",
            "items" : {
              "type" : "string",
              "description" : "Danh sách các file hiện có",
              "example" : [ "AllBusyByeFor99000v2.wav", "Greeting.wav", "hello.wav" ]
            }
          },
          "default" : {
            "type" : "array",
            "items" : {
              "description" : "Danh sách file mặc định",
              "example" : [ "AllBusyByeFor99000v2.wav", "Greeting.wav" ]
            }
          },
          "endcall" : {
            "type" : "string",
            "description" : "File kết thúc cuộc gọi mặc định",
            "example" : "AllBusyByeFor99000v2.wav"
          },
          "greeting" : {
            "type" : "string",
            "description" : "File lời chào mặc định",
            "example" : "Greeting.wav"
          }
        }
      },
      "RoutingTag" : {
        "type" : "object",
        "properties" : {
          "current_tag" : {
            "type" : "string",
            "description" : "routing tag hiện tại, nếu profile không có routing tag thì field này là chuỗi rỗng",
            "example" : "#agent:baonq5@vng.com.vn"
          },
          "modification_date" : {
            "type" : "integer",
            "format" : "long",
            "description" : "Ngày cập nhật routing tag",
            "example" : 1553850464
          },
          "modified_by" : {
            "type" : "string",
            "description" : "agent_id của agent thực hiện thay đổi gần nhất. Các giá trị đặc biệt của field này: 000000000000000000000000 (được sửa bởi hệ thống), 000000000000000000000001 (bị xóa bởi chức năng ưu tiên chuyển cuộc gọi cho nhân viên), 000000000000000000000002 (routing tag bị xóa do agent đã bị xóa).",
            "example" : "5c9201a3a69e9e00b9818eb8"
          },
          "assigned_to" : {
            "description" : "Nếu profile không có routing tag thì field này không tồn tại",
            "type" : "object",
            "properties" : {
              "agent_id" : {
                "type" : "string",
                "description" : "agent_id của agent sẽ nhận cuộc gọi từ khách hàng (nếu tag đang trỏ tới group thì không có field này)",
                "example" : "5c9201a3a69e9e00b9818eb8"
              },
              "group_id" : {
                "type" : "string",
                "description" : "group_id của group sẽ nhận cuộc gọi từ khách hàng (nếu tag đang trỏ tới agent thì không có field này)"
              },
              "profile_id" : {
                "type" : "string",
                "description" : "profile_id của agent sẽ nhận cuộc gọi từ khách hàng",
                "example" : "5c9347bf2fb22100b9bc269c"
              },
              "fullname" : {
                "type" : "string",
                "description" : "Tên đầy đủ của agent hoặc group sẽ nhận cuộc gọi từ khách hàng",
                "example" : "Nguyễn Quốc Bảo"
              },
              "ext" : {
                "type" : "string",
                "description" : "Số nội bộ của group hoặc agent sẽ chuyển cuộc gọi đến",
                "example" : 101
              }
            }
          }
        }
      },
      "TenantIdAndDomain" : {
        "type" : "object",
        "properties" : {
          "tenant_id" : {
            "type" : "string",
            "example" : "a8cd1ef0634d0582e3220c59"
          },
          "tenant_domain" : {
            "type" : "string",
            "example" : "callcenter"
          }
        }
      },
      "CallCenter" : {
        "type" : "object",
        "properties" : {
          "allow_edit" : {
            "type" : "boolean",
            "description" : "Cho phép chỉnh sửa trên giao diện. Trường hợp allow_edit = false thì chạy cấu hình mặc định (cho phép gọi ra trong nước và quốc tế).",
            "example" : true
          },
          "numbers" : {
            "type" : "array",
            "description" : "Danh sách đầu số tổng đài đang cấu hình",
            "items" : {
              "type" : "object",
              "properties" : {
                "number" : {
                  "type" : "string",
                  "example" : 2.836221443E9
                },
                "agents" : {
                  "type" : "array",
                  "items" : {
                    "type" : "string",
                    "description" : "Danh sách agent được cấu hình. Nếu giá trị là @all thì có nghĩa là tất cả agent trong tenant."
                  },
                  "example" : [ "10c7e64a2b238e5efd5039be", "4da7cd597722c68c17bd4384", "cd696f8d729e409435e2291f" ]
                },
                "call_out_domestic" : {
                  "type" : "boolean",
                  "description" : "Cho phép gọi ra trong nước"
                },
                "call_out_international" : {
                  "type" : "boolean",
                  "description" : "Cho phép gọi ra quốc tế"
                }
              }
            }
          }
        }
      },
      "CallValidateTenantInfo" : {
        "type" : "object",
        "properties" : {
          "sp_type" : {
            "type" : "string",
            "example" : "CD"
          },
          "expired" : {
            "type" : "boolean",
            "example" : false
          },
          "public_number" : {
            "type" : "string",
            "example" : 2367306616
          },
          "domain_address" : {
            "type" : "string",
            "example" : "vcstesttien.stgsip2.123cs.vn"
          },
          "sp_trunk" : {
            "type" : "string",
            "example" : ""
          },
          "next_route" : {
            "type" : "string",
            "description" : "[Looại bỏ]",
            "enum" : [ "default", "ivr" ],
            "example" : "default"
          },
          "next_route_v2" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "type" : {
                  "type" : "string",
                  "description" : "Loại route",
                  "enum" : [ "default", "ivr", "ext", "file" ],
                  "example" : "ext"
                },
                "value" : {
                  "type" : "string",
                  "description" : "Extension đích + domain address (route_type = ext) hoặc đường dẫn đến file ghi âm để play (route_type = file)",
                  "example" : "101@vcstesttien.stgsip2.123cs.vn"
                },
                "timeout" : {
                  "type" : "integer",
                  "example" : 60
                },
                "continue_on_fail" : {
                  "type" : "string",
                  "enum" : [ "always", "never", "busy", "not_available", "timeout" ],
                  "example" : "always"
                },
                "max_dur_on_connected" : {
                  "type" : "integer",
                  "description" : "Max duration on connected",
                  "example" : 200
                }
              }
            }
          },
          "sp_code" : {
            "type" : "string",
            "example" : "FPT"
          },
          "type" : {
            "type" : "string",
            "example" : "buy"
          },
          "max_duration" : {
            "type" : "integer",
            "example" : 86400
          }
        }
      },
      "CallValidateTenantCredit" : {
        "type" : "object",
        "properties" : {
          "tenant_limit" : {
            "type" : "integer",
            "example" : 300000
          },
          "total" : {
            "type" : "integer",
            "example" : 0
          },
          "call_permission" : {
            "type" : "boolean",
            "example" : true
          },
          "not_available" : {
            "type" : "boolean",
            "example" : false
          },
          "can_call" : {
            "type" : "boolean",
            "example" : true
          },
          "current_balance" : {
            "type" : "boolean",
            "example" : 300000
          },
          "user_available_balance" : {
            "type" : "integer",
            "example" : 300000
          },
          "agent_current_balance" : {
            "type" : "integer",
            "example" : 300000
          },
          "error" : {
            "type" : "object",
            "properties" : { }
          }
        }
      },
      "CallValidateResponse" : {
        "type" : "object",
        "properties" : {
          "tenant_info" : {
            "allOf" : [ {
              "$ref" : "#/components/schemas/CallValidateTenantInfo"
            } ]
          },
          "tenant_credit" : {
            "allOf" : [ {
              "$ref" : "#/components/schemas/CallValidateTenantCredit"
            } ]
          },
          "call_id" : {
            "type" : "string",
            "example" : "0f3PNPRn~M"
          }
        }
      },
      "CallValidateRequest" : {
        "type" : "object",
        "properties" : {
          "call_type" : {
            "type" : "string",
            "description" : "Chiều cuộc gọi. Chiều aaranet2user không cần phải validate.",
            "enum" : [ "pstn2aaranet", "aaranet2pstn", "user2aaranet", "aaranet2user" ],
            "example" : "user2aaranet"
          },
          "bill_type" : {
            "type" : "string",
            "description" : "internal (gọi nội bộ), giá trị khác (gọi ra hoặc gọi vào)",
            "enum" : [ "internal", "undefine" ],
            "example" : "bill_type"
          },
          "call_id" : {
            "type" : "string",
            "example" : "0f3PNPRn~M"
          },
          "call_from" : {
            "type" : "string",
            "example" : "101@vcstesttien.stgsip2.123cs.vn"
          },
          "call_to" : {
            "type" : "string",
            "example" : "0977128770@vcstesttien.stgsip2.123cs.vn"
          }
        }
      },
      "HardPhoneProviderCode" : {
        "description" : "Mã hãng sản xuất hardphone",
        "type" : "string",
        "enum" : [ "yealink", "granstream", "fanvil" ],
        "example" : "yealink"
      },
      "HardPhoneInfo" : {
        "description" : "Thông tin cấu hình hardphone",
        "type" : "object",
        "properties" : {
          "mac_address" : {
            "type" : "string",
            "description" : "Địa chỉ mac address của hardphone",
            "pattern" : "^[a-fA-F0-9]{2}:?[a-fA-F0-9]{2}:?[a-fA-F0-9]{2}:?[a-fA-F0-9]{2}:?[a-fA-F0-9]{2}:?[a-fA-F0-9]{2}$",
            "example" : "112233445566"
          },
          "provider_code" : {
            "allOf" : [ {
              "$ref" : "#/components/schemas/HardPhoneProviderCode"
            } ]
          }
        }
      },
      "HardPhoneDetail" : {
        "description" : "Thông tin cấu hình hardphone",
        "allOf" : [ {
          "type" : "object",
          "properties" : {
            "agent_id" : {
              "type" : "string",
              "description" : "agent_id của agent gắn với hardphone",
              "example" : "ed89ea893a5aebed16c45598"
            },
            "hardphone_id" : {
              "type" : "string",
              "description" : "id của hardphone được quản lí bởi hãng sản xuất",
              "example" : "b17444e6ebf144a6978ef6ae3fffed07"
            }
          }
        }, {
          "$ref" : "#/components/schemas/HardPhoneInfo"
        } ]
      },
      "CallCenterInitParams" : {
        "type" : "object",
        "properties" : {
          "public_number" : {
            "type" : "array",
            "items" : {
              "type" : "string",
              "description" : "Danh sách đầu số public của tổng đài",
              "example" : [ "02887654321" ]
            }
          },
          "service_number" : {
            "type" : "array",
            "description" : "Dách sách các cặp số đích - số tiếp nhận",
            "items" : {
              "type" : "array",
              "items" : {
                "type" : "string",
                "description" : "Cặp số tiếp nhận và số đích. Có thể nhiều hơn 2 số",
                "example" : [ "19001234", "02812345678" ]
              }
            }
          }
        }
      },
      "AgentSchema" : {
        "type" : "object",
        "properties" : {
          "username" : {
            "type" : "string",
            "description" : "Tên tài khoản (là địa chỉ email hoặc số điện thoại) của agent được thêm vào",
            "example" : "agent1.baonq5@vng.com.vn"
          },
          "name" : {
            "type" : "string",
            "description" : "Tên agent",
            "example" : "Agent 1"
          },
          "ext" : {
            "type" : "string",
            "minimum" : 101,
            "maximum" : 8999,
            "description" : "Số nội bộ sẽ được gán cho agent. Số này  nằm trong khoảng [101, 8999] và không được nằm trong khoảng [900,999]",
            "example" : "201"
          },
          "roles" : {
            "type" : "string",
            "description" : "ID của role mà agent được gán. Định dạng comma seperated list",
            "example" : "5bfdff2ca2953500b9c8075d,5bfdff2ca2953500b9c8079c"
          }
        }
      },
      "HardPhoneAssignCode" : {
        "type" : "integer",
        "description" : "Response code: 1000 (thành công), 2002 (Input không hợp lệ), 60001 (Không hỗ trợ hãng sản xuất hardphone này), 60002 (Lỗi tổng quát), 60003 (Mac address đã được assign cho một máy khác không do vCS quản lí), 60004 (Mac address đã được assign cho một máy khác do vCS quản lí nhưng chưa được cấp cho agent nào (unexpected)), 60005 (Mac address đã được assign cho agent khác trong tenant)",
        "enum" : [ 1000, 2002, 60005, 60006, 60001, 60003, 60004, 60002 ],
        "example" : 1000
      },
      "AgentBackupRoute" : {
        "description" : "Backup route nếu thất bại khi ưu tiên chuyển cuộc gọi đến agent",
        "type" : "object",
        "properties" : {
          "forward_to" : {
            "description" : "Đối tượng nhận cuộc gọi chuyển đến",
            "oneOf" : [ {
              "type" : "string",
              "description" : "Id của agent tiếp nhận cuộc gọi",
              "example" : "agent_id:5c0dedf3f533a600b95ffacb"
            }, {
              "type" : "string",
              "description" : "Id của group tiếp nhận cuộc gọi",
              "example" : "group_id:5c0e2030075aac00ba3af9d8"
            }, {
              "type" : "string",
              "description" : "Số điện thoại ngoài",
              "example" : "phone_number:0906562266"
            } ],
            "example" : "agent_id:5c0dedf3f533a600b95ffacb"
          },
          "file" : {
            "type" : "string",
            "description" : "Đường dẫn đến ghi âm sẽ chạy khi kết thúc cuộc gọi"
          },
          "play_file" : {
            "type" : "boolean",
            "description" : "Bật/Tắt phát file ghi âm khi kết thúc cuộc gọi"
          },
          "do_forward" : {
            "type" : "boolean",
            "description" : "Bật/Tắt chức năng chuyển cuộc gọi"
          }
        }
      },
      "TenantIVRv2" : {
        "description" : "Cấu hình IVR mới của một tenant",
        "type" : "object",
        "properties" : {
          "tenant_id" : {
            "type" : "string",
            "description" : "tenant_id của tenant",
            "example" : "5c0dedf3f533a600b95ffacc"
          },
          "tenant_domain" : {
            "type" : "string",
            "description" : "domain của tenant",
            "example" : "acd3"
          },
          "numbers" : {
            "description" : "Danh sách đầu số được áp dụng cấu hình IVR",
            "type" : "array",
            "items" : {
              "type" : "string",
              "description" : "Đầu số gọi vào"
            },
            "example" : [ 2.836221443E9 ]
          },
          "ivr_mode" : {
            "type" : "integer",
            "enum" : [ 0, 1, 3 ],
            "description" : "Chế độ cấu hình IVR thủ công. Mode 0: sử dụng cấu hình IVR mặc định. Mode 1: Sử dụng cấu hình IVR do người dùng tùy chỉnh. Mode 3: Không sử dụng lời chào",
            "example" : 1
          },
          "key_press_no_greeting" : {
            "type" : "string",
            "description" : "Cấu hình bấm phím khi không sử dụng lời chào",
            "example" : "1fc85b82865642511749df73"
          },
          "key_press_default_greeting" : {
            "type" : "string",
            "description" : "Cấu hình bấm phím khi sử dụng lời chào mặc định",
            "example" : "72d9b9a4619290624cddbf3a"
          },
          "ivr_conditions" : {
            "type" : "array",
            "items" : {
              "allOf" : [ {
                "$ref" : "#/components/schemas/IVRConditionV2"
              } ]
            }
          },
          "list_key_press" : {
            "type" : "array",
            "items" : {
              "allOf" : [ {
                "$ref" : "#/components/schemas/KeyPressV2"
              } ]
            }
          },
          "agent_priority_call" : {
            "type" : "boolean",
            "description" : "Cấu hình bật/tắt ưu tiên chuyển cuộc gọi cho nhân viên phụ trách",
            "example" : true
          },
          "agent_priority_backup" : {
            "description" : "Cấu hình backup route nếu thất bại khi ưu tiên chuyển cuộc gọi đến nhân viên phụ trách",
            "type" : "array",
            "items" : {
              "allOf" : [ {
                "$ref" : "#/components/schemas/AgentBackupRoute"
              } ]
            }
          },
          "agent_priority_count" : {
            "minimum" : 1,
            "maximum" : 10,
            "description" : "Số lần liên hệ thất bại tối đa trước khi chức năng ưu tiên chuyển cuộc gọi bị tắt cho một khách hàng",
            "example" : 5
          },
          "agent_recent_call" : {
            "type" : "boolean",
            "description" : "Bật/tắt ưu tiên chuyển cuộc gọi đến cho nhân viên mới liên lạc (routing đến đúng agent mà không quan tâm số nội bộ của agent đó)",
            "example" : true
          },
          "agent_recent_range" : {
            "type" : "string",
            "minimum" : 5,
            "maximum" : 600,
            "description" : "Thời gian lớn nhất đến lần liên lạc gần nhất mà cuộc gọi sẽ được chuyển cho nhân viên tiếp nhận đã nhận cuộc gọi trước đó.",
            "example" : 30
          }
        }
      },
      "KeyPressV2" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "description" : "Id kịch bản bấm phím. Kịch bản mặc định luôn phải là chuỗi rỗng",
            "example" : "653107f92497a610d7b2b222"
          },
          "name" : {
            "type" : "string",
            "description" : "Tên cấu hình bấm phím",
            "example" : "Bấm phím trong giờ làm việc"
          },
          "key_press_mode" : {
            "type" : "integer",
            "enum" : [ 0, 1 ],
            "description" : "Cấu hình bấm phím: 0 (không bấm phím), 1 (có bấm phím)"
          },
          "key_no_press" : {
            "description" : "Hành động khi khách hàng không nhấn phím",
            "allOf" : [ {
              "$ref" : "#/components/schemas/KeyPressAction"
            } ]
          },
          "key_press_action" : {
            "type" : "array",
            "items" : {
              "allOf" : [ {
                "$ref" : "#/components/schemas/KeyPressAction"
              } ]
            }
          }
        }
      },
      "IVRConditionV2" : {
        "description" : "Khoảng thời gian thực thi kịch bản IVR. Nếu chọn thời gian còn lại trong ngày thì time_of_day mang giá trị chuỗi rỗng (KHÔNG PHẢI NULL)",
        "type" : "object",
        "properties" : {
          "key_press_id" : {
            "type" : "string",
            "description" : "Id kịch bản bấm phím được sử dụng"
          },
          "year" : {
            "type" : "string",
            "minimum" : 0,
            "maximum" : 9999,
            "description" : "Calendar year. Can type in range like 2018-2019"
          },
          "mon" : {
            "type" : "string",
            "minimum" : 1,
            "maximum" : 12,
            "description" : "Month (example: Jan = 1). Can type in range like 1-10"
          },
          "mday" : {
            "type" : "string",
            "minimum" : 1,
            "maximum" : 31,
            "description" : "Day of month. Can type in range like 1-10"
          },
          "wday" : {
            "oneOf" : [ {
              "type" : "string",
              "enum" : [ "mon", "tue", "wed", "thu", "fri", "sat", "sun" ],
              "description" : "Day of week"
            }, {
              "type" : "string",
              "minimum" : 1,
              "maximum" : 7,
              "description" : "Day of week (sun = 1, mon = 2, etc)"
            } ]
          },
          "time_of_day" : {
            "oneOf" : [ {
              "type" : "string",
              "format" : "hh:mm-hh:mm",
              "description" : "Time range (24-hour format)",
              "example" : "08:00-17:00"
            }, {
              "type" : "string",
              "format" : "hh:mm:ss-hh:mm:ss",
              "description" : "Time range, with seconds (24-hour format)"
            } ]
          }
        },
        "example" : {
          "year" : "2018",
          "month" : "9",
          "mday" : "2",
          "key_press_id" : "b065e92086b7856452512448"
        }
      }
    },
    "securitySchemes" : {
      "BearerAuth" : {
        "type" : "http",
        "scheme" : "bearer",
        "bearerFormat" : "JWT"
      }
    }
  }
}