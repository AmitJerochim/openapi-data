penapi: 3.0.0
# Added by API Auto Mocking Plugin
servers:
# Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/maxim.karavaev/OMEReportOrder/1.0.0
  - description: SwaggerHub API Auto Mocking
    url: https://wr4nwhy5f9.execute-api.us-east-1.amazonaws.com/test
info:
  description: |
    This is a preliminary API. \
    \
    A client should invoke it from a set of trusted IP addresses. In such a case, we would not bother with implementing any kind of authorization process. \
    \
    Otherwise, if it will be invoked directly from some web page then we have to implement some server-2-server validation procedure (API requests should provide some token, which could be validated against some specific endpoint).
  version: "1.1.0"
  title: OME Wellness Report Ordering API
  contact:
    email: maxim.karavaev@omewellness.com
tags:
  - name: Order
  - name: History
paths:
  /order:
    post:
      tags:
        - Order
      summary: Place a new Report Order
      operationId: order
      description: Any User could place only a single Order. It would be an error if someone asks for another report a second time. 
      responses:
        '201':
          description: Order placed successfully
        '400':
          description: 'invalid input, object invalid'
        '409':
          description: An order could not be placed as the User already ordered a report
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Order'
        description: User's identification and a report details
  /status:
    get:
      tags:
        - Order
      summary: Check status of the ordered report or returns the list of available Reports
      operationId: checkStatus
      description: |
        Order statuses would be synchronized between systems through the FTP protocol. This method could be used for convenience in UI implementation.
      parameters:
        - in: query
          name: username
          description: user identity
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Status of the ordered report or the list of available reports
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Report'
        '400':
          description: bad input parameter
  /processed:
    get:
      tags:
        - History
      summary: Returns the list of processed Order for a specified period of time
      operationId: processed
      description: |
        When an order status is changed to "done" then the time of this event is persisted. Define the period of time to retrieve the finished Orders in it.
      parameters:
        - in: query
          name: from
          description: beginning of the period as Unix time format
          required: true
          schema:
            type: number
          example: 1585050674
        - in: query
          name: to
          description: end of the period as Unix time format
          required: false
          schema:
            type: number
      responses:
        '200':
          description: List of finished orders in CSV format
          content:
            text/csv:
              schema:
                type: string
              example: |
                Username,Last_Name,First_Name,DNA Test Completed
                test1234,Doe,John,yes
                test9876,John,Doe,yes
        '400':
          description: bad input parameter
components:
  schemas:
    Order:
      type: object
      required:
        - username
        - report
        - last_name
        - first_name
        - address
      properties:
        username:
          type: string
          example: treilly1234
        last_name:
          type: string
          example: Reilly
        first_name:
          type: string
          example: Tom
        report:
          type: string
          description: The report identities to order
          example: fitness
        address:
          $ref: '#/components/schemas/Address'
    Address:
      required:
        - line1
        - city
        - state
        - zip
      properties:
        line1:
          type: string
          example: 6777 Nancy Ridge Drive
        line2:
          type: string
          example: 
        city:
          type: string
          example: San Diego
        state:
          type: string
          example: CA
        zip:
          type: string
          example: 92121
        phone_number:
          type: string
          example: '123.456.7890'
      type: object
    Report:
      required:
        - id
        - title
      properties:
        id:
          type: string
          example: fitness
        title:
          type: string
          example: PathwayFIT
        status:
          type: string
          description: one of the possible values [available|unavailable|processing|done]
          example: available
        description:
          type: string
          example: |
            Actionable DNA insights that you can turn into powerful lifestyle, fitness, and diet changes. Comes with a Daily Diet Plan, and Licensed Dietician consultation.
        example:
          type: string
          format: URL
          example: 'https://www.pathway.com/wp-content/uploads/2018/03/Pathway_Fit_Sample_Report.pdf'
        image:
          type: string
          format: URL
          example: 'https://www.pathway.com/wp-content/uploads/2018/03/fit-weight-loss.jpg'
      type: object