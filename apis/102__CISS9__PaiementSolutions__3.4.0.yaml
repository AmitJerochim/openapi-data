openapi: 3.0.0
info:
  description: API Paiement.Solutions
  version: "3.4.0"
  title: API Paiement.Solutions
tags:
  - name: Terminal Point de Vente
    description: Actions liées au systême d'encaissement
  - name: Terminal de Paiement Electronique
paths:
  '/tpv/time':
    get:
      tags:
        - Terminal Point de Vente
        - Self
      summary: Timer universel
      description: >
        Permet d’obtenir un TimestampUTC si l’équipement ne dispose pas de
        méthode interne fiable
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  TimestampUTC:
                    type: integer
                    example: '1486540305'
  '/tpe/time':
    get:
      tags:
        - Terminal de Paiement Electronique
        - Self
      summary: Timer universel
      description: >
        Permet d’obtenir un TimestampUTC si l’équipement ne dispose pas de
        méthode interne fiable
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  TimestampUTC:
                    type: integer
                    example: '1486540305'
  '/tpv/init/{BuilderKey}':
    post:
      tags:
        - Terminal Point de Vente
        - Self
      summary: Initialisation du Terminal Point de Vente (TPV)
      description: |
        Permet l’initialisation du TPV lors de l’installation du logiciel
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
      responses:
        '200':
          description: Réponse serveur
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  IDMarchand:
                    type: string
                    example: '123456'
                  APIKey:
                    type: string
                    example: QVbkHb7q58Uy9Wx91KfG41bwmcrajrgMYnToi71v
                  Display:
                    type: string
                    example: Initialisation réussie
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Initialisation'
  '/tpe/init/{BuilderKey}':
    post:
      tags:
        - Terminal de Paiement Electronique
        - Self
      summary: Initialisation du Terminal de Paiement Electronique
      description: |
        Permet l’initialisation du TPE lors de l’installation du logiciel
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPE'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
      responses:
        '200':
          description: Réponse serveur
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  IDMarchand:
                    type: string
                    example: '123456'
                  APIKey:
                    type: string
                    example: QVbkHb7q58Uy9Wx91KfG41bwmcrajrgMYnToi71v
                  Display:
                    type: string
                    example: Initialisation réussie
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Initialisation'
  '/tpv/session/{IDMarchand}/{TimestampUTC}/{HMAC}':
    get:
      tags:
        - Terminal Point de Vente
        - Self
      summary: Ouverture d'une session sur les serveurs paiement.solutions
      description: |
        Permet d’obtenir un identifiant de session pour le TPV
      parameters:
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: TimestampUTC
          description: Heure de création de l'appel
          required: true
          schema:
            type: integer
        - in: path
          name: HMAC
          description: >-
            Signature des parametres envoyés, créée a partir de l'APIKey et du
            timestamp
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Session:
                    type: string
                    example: 7q58Uy9Wx91KfQVbkHbG41bwmcrajrgMYnToi71v
  '/tpe/session/{IDMarchand}/{TimestampUTC}/{HMAC}':
    get:
      tags:
        - Terminal de Paiement Electronique
        - Self
      summary: Ouverture d'une session sur les serveurs paiement.solutions
      description: |
        Permet d’obtenir un identifiant de session pour le TPV
      parameters:
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: TimestampUTC
          description: Heure de création de l'appel
          required: true
          schema:
            type: integer
        - in: path
          name: HMAC
          description: >-
            Signature des parametres envoyés, créée a partir de l'APIKey et du
            timestamp
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Session:
                    type: string
                    example: 7q58Uy9Wx91KfQVbkHbG41bwmcrajrgMYnToi71v
  '/tpv/consultation/{IDMarchand}/{TimestampUTC}/{HMAC}':
    post:
      tags:
        - Terminal Point de Vente
        - Marchand
      summary: Consultation des informations du marchand
      description: |
        Consulter les les informations du marchand
      parameters:
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: TimestampUTC
          description: Heure de création de l'appel
          required: true
          schema:
            type: integer
        - in: path
          name: HMAC
          description: >-
            Signature des parametres envoyés, créée a partir de l'APIKey et du
            timestamp
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Réponse serveur
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  IDMarchand:
                    type: string
                    example: '123456'
                  APIKey:
                    type: string
                    example: QVbkHb7q58Uy9Wx91KfG41bwmcrajrgMYnToi71v
                  Display:
                    type: string
                    example: Informations marchand
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Consultation'
  '/tpe/consultation/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Terminal de Paiement Electronique
        - Marchand
      summary: Consultation des informations du marchand
      description: |
        Consulter les informations du marchand
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Réponse serveur
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  IDMarchand:
                    type: string
                    example: '123456'
                  APIKey:
                    type: string
                    example: QVbkHb7q58Uy9Wx91KfG41bwmcrajrgMYnToi71v
                  Display:
                    type: string
                    example: Informations marchand
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Consultation'
  '/tpv/teleparametrage/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Terminal Point de Vente
        - Self
      summary: Paramétrage du TPV
      description: |
        Permet le téléparamétrage du TPV selon les réglages marchands
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Réponse serveur
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  Cloture:
                    type: string
                    description: Heure de cloture
                    example: '2235'
                  Logo:
                    type: string
                    description: URL du fichier logo au format BMP
                    example: 'http://my.url.com/logo.bmp'
                  Display:
                    type: string
                    description: Affichage de fin sur téléparamétrage réussi
                    example: Téléparamétrage réussi
                  SansContact:
                    type: integer
                    description: Présent si le sans-contact doit etre en écoute
                    example: 1
                    default: 0
                  VCH:
                    type: integer
                    description: Acceptation des vouchers
                    example: 1
                    default: 0
                  FID:
                    type: integer
                    description: Acceptation des cartes fidélité
                    example: 1
                    default: 0
                  KDO:
                    $ref: '#/components/schemas/KDOObject'
                  PME:
                    $ref: '#/components/schemas/PMEInitObject'
                  CPN:
                    type: integer
                    description: Acceptation des coupons
                    example: 1
                    default: 0
                  Menu:
                    $ref: '#/components/schemas/PMEInitMenu'
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Teleparametrage'
  '/tpe/teleparametrage/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Terminal de Paiement Electronique
        - Self
      summary: Paramétrage du TPE
      description: |
        Permet le téléparamétrage du TPE selon les réglages marchands
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Réponse serveur
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  HeureAppel:
                    type: string
                    description: Heure de la télécollecte virtuelle
                    example: '2235'
                  Logo:
                    type: string
                    description: URL du fichier logo au format BMP
                    example: 'http://my.url.com/logo.bmp'
                  RefTransac:
                    $ref: '#/components/schemas/TPERefTransac'
                  PrestaPCIDSS:
                    $ref: '#/components/schemas/PrestaPCIDSS'
                  Display:
                    type: string
                    description: Affichage de fin sur téléparamétrage réussi
                    example: Téléparamétrage réussi
                  SansContact:
                    type: integer
                    description: Présent si le sans-contact doit etre en écoute
                    example: 1
                    default: 0
                  Swipe:
                    type: integer
                    description: >-
                      Présent si le lecteur de piste magnétique doit etre en
                      écoute
                    example: 1
                    default: 0
                  PortConcertIP:
                    type: integer
                    description: Port d'écoute du serveur TCP Concert (inactif si 0)
                    example: 8888
                    default: 0
                  NoData:
                    type: integer
                    description: 'Sur serveur TCP actif, n''émet aucune communication externe'
                    example: 1
                    default: 0
                  VCH:
                    type: integer
                    description: Acceptation des vouchers
                    example: 1
                    default: 0
                  FID:
                    type: integer
                    description: Acceptation des cartes fidélité
                    example: 1
                    default: 0
                  KDO:
                    $ref: '#/components/schemas/KDOObject'
                  PME:
                    $ref: '#/components/schemas/TPEPMEInitObject'
                  PMEOffline:
                    $ref: '#/components/schemas/PMEOfflineStruct'
                  EnteteOffline:
                    type: string
                    description: En-tete du ticket de paiement
                  NbTicketRecharge:
                    type: integer
                    description: Nombre de tickets de reçu de recharge
                    example: 1
                    default: 1
                  NbTicketFidelite:
                    type: integer
                    description: Nombre de tickets fidelite
                    example: 1
                    default: 1
                  NbTicketAnnulation:
                    type: integer
                    description: Nombre de tickets annulation
                    example: 1
                    default: 1
                  NbTicketPaiement:
                    type: integer
                    description: Nombre de tickets de reçu de paiement
                    default: 1
                  CPN:
                    type: integer
                    description: Acceptation des coupons
                    example: 1
                    default: 0
                  Scenarios:
                    type: array
                    description: Scenarions utilisable par le TPE
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: Id du scénario
                          example: 1
                        nom:
                          type: string
                          description: Nom du scénario
                          example: 'CardUpgrade'
                        plateformes:
                          type: array
                          description: Plateformes sur lesquelles le scénario doit être utilisé
                          items:
                            type: string
                            enum: ['Tetra', 'Android']
                  Menu:
                    $ref: '#/components/schemas/PMEInitMenu'
                  EnteteCB:
                    $ref: '#/components/schemas/TicketStruct'
                  PiedCB:
                    $ref: '#/components/schemas/TicketStruct'
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Teleparametrage'
  '/tpe/telecollecte/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Terminal de Paiement Electronique
        - Télécollecte
      summary: Télécollecte
      description: >
        Effectue une télécollecte virtuelle à l’heure programmée lors du
        téléparamétrage
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  Display:
                    type: string
                    example: Télécollecte réussie
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Telecollecte'
  '/tpv/telecollecte/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Terminal Point de Vente
        - Télécollecte
      summary: Télécollecte
      description: >
        Effectue une télécollecte virtuelle à l’heure programmée lors du
        téléparamétrage
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  Display:
                    type: string
                    example: Télécollecte réussie
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Telecollecte'
  '/tpe/transactions/envoi/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Transactions
        - Terminal de Paiement Electronique
      summary: Envoi des transactions
      description: |
        Permet l'envoi des transactions du marchand
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Transactions:
                  type: array
                  items:
                    $ref: '#/components/schemas/TransactionTPE'
  '/tpe/transactions/liste/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Transactions
        - Terminal de Paiement Electronique
      summary: Liste des transactions
      description: >
        Liste de l’ensemble des transactions réalisées sur le parc des TPE du
        marchand
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  Transactions:
                    type: array
                    items:
                      $ref: '#/components/schemas/TransactionsSimples'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Liste:
                  type: array
                  items:
                    $ref: '#/components/schemas/ListeTransactions'
  '/tpe/transactions/prestataire/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Transactions
        - Terminal de Paiement Electronique
      summary: Envoie la référence de la transaction à un prestataire
      description: |
        Envoie la référence de la transaction à un prestataire
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                  Msg:
                    type: string
                    example: OK
                  Display:
                    type: string
                    example: |
                      Transaction réussie
                       Bonne journée 
                  Tickets:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Transaction:
                  type: array
                  items:
                    $ref: '#/components/schemas/TransactionPrestataire'
  '/tpv/badge/infos/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal Point de Vente
      summary: Informations d'un badge (carte/bracelet...)
      description: >
        Obtenir les informations d’un badge (PME/Fidelite/Cagnotte simple
        PME/Cagnotte multi PME)
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: GENERICTPV
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  IDBadge:
                    type: string
                    example: '21515021'
                    description: >-
                      Identifiant du badge ou de la carte à utiliser pour les
                      appels
                  Display:
                    type: string
                    example: |
                      Prenom Nom sur 16
                      Solde badge sur 16
                      Ligne 3&4 sur 16
                    description: Affichage écran
                  Badge:
                    $ref: '#/components/schemas/Badge'
                  FID:
                    type: string
                    example: OK
                    description: >-
                      Présent si le point de vente propose un programme de
                      fidélité
                  QuestionsFID:
                    $ref: '#/components/schemas/QuestionFID'
      requestBody:
        $ref: '#/components/requestBodies/Informations'
  '/tpe/badge/solde/{BuilderKey}/{IDPointDeVente}/{Session}':
    post:
      tags:
        - Badge
        - Terminal de Paiement Electronique
      summary: Solde d'une carte
      description: >
        Obtenir le solde d'un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPE'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: GENERICTPE
        - in: path
          name: IDPointDeVente
          description: Identifiant du point de vente
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                NumCarte:
                  type: string
                  description: Numéro de la carte
                  example: '000000000000'
                TypeCarte:
                  type: string
                  description: Type de lecture de la carte
                  enum: ['NFC', 'Long']
                  example: 'Long'
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Badge:
                    type: object
                    description: Infos du badge
                    properties:
                      IDBadge:
                        type: string
                        description: Id du badge
                      PIN:
                        type: string
                        description: PIN du badge
                        example: '1234'
                      CCV:
                        type: string
                        description: CCV du badge
                        example: '1234'
                      Solde:
                        type: integer
                        example: 5102
                        description: Solde du badge en centimes
                    
            
  '/tpe/badge/infos/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal de Paiement Electronique
      summary: Informations d'un badge (carte/bracelet...)
      description: >
        Obtenir les informations d’un badge (PME/Fidelite/Cagnotte simple
        PME/Cagnotte multi PME)
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPE'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: GENERICTPE
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  IDBadge:
                    type: string
                    example: '21515021'
                    description: >-
                      Identifiant du badge ou de la carte à utiliser pour les
                      appels
                  Display:
                    type: string
                    example: |
                      Prenom Nom sur 16
                      Solde badge sur 16
                      Ligne 3&4 sur 16
                    description: Affichage écran
                  LSTVCH:
                    $ref: '#/components/schemas/LSTVCH'
                  PME:
                    $ref: '#/components/schemas/TPEPMEBadgeObject'
                  Badge:
                    $ref: '#/components/schemas/BadgeTPE'
                  Loyalty:
                    type: string
                    description: >-
                      Présent si le point de vente propose un programme de
                      fidélité
                    example: 1
                  QuestionsCLI:
                    $ref: '#/components/schemas/QuestionStruct'
                  Questions:
                    $ref: '#/components/schemas/QuestionStruct'
      requestBody:
        $ref: '#/components/requestBodies/Informations'
  '/tpe/pme/reset/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME - Porte-Monnaie Electronique
        - Terminal de Paiement Electronique
      summary: reset de la cartemontant (PME) 
         voir https://jira.ciss.fr/browse/WSTPU-152
      description: >
        reset de la cartemontant (PME)
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPE'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: GENERICTPE
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  IDBadge:
                    type: string
                    example: '21515021'
                    description: >-
                      Identifiant du badge ou de la carte à utiliser pour les
                      appels
                  Display:
                    type: string
                    example: |
                      Prenom Nom sur 16
                      Solde badge sur 16
                      Ligne 3&4 sur 16
                    description: Affichage écran
      requestBody:
        $ref: '#/components/requestBodies/Reset'
  '/tpe/badge/recherche/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal de Paiement Electronique
      summary: Recherche d'un badge (carte/bracelet...)
      description: |
        Recherche d'un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Reponses:
                    $ref: '#/components/schemas/ReponseStruct'
      requestBody:
        $ref: '#/components/requestBodies/Recherche'
  '/tpv/badge/recherche/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal Point de Vente
      summary: Recherche d'un badge (carte/bracelet...)
      description: |
        Recherche d'un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Reponses:
                    $ref: '#/components/schemas/ReponseStruct'
      requestBody:
        $ref: '#/components/requestBodies/Recherche'
  '/tpv/badge/consultation/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal Point de Vente
      summary: Consulter/Imprimer les informations d’un badge
      description: >
        Renvoie une structure permettant la consultation et l'impression des
        informations du badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Impression 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Informations:
                  $ref: '#/components/schemas/ConsultationFull'
  '/tpe/badge/consultation/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal de Paiement Electronique
      summary: Consulter/Imprimer les informations d’un badge
      description: >
        Renvoie une structure permettant la consultation et l'impression des
        informations du badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Impression 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Informations:
                  $ref: '#/components/schemas/ConsultationBadgeObl'
  '/tpv/badge/duplicata/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal Point de Vente
      summary: Obtenir un duplicata de derniere transaction TPV ou Badge
      description: >
        Consulter/Imprimer un duplicata de la dernière transaction sur le TPV ou
        celle du badge en cours
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Duplicata 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Duplicata'
  '/tpe/badge/duplicata/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal de Paiement Electronique
      summary: Obtenir un duplicata de derniere transaction TPV ou Badge
      description: >
        Consulter/Imprimer un duplicata de la dernière transaction sur le TPV ou
        celle du badge en cours
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Duplicata 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Duplicata'
  '/tpv/badge/historique/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal Point de Vente
      summary: Historique des transactions d'un badge
      description: |
        Consulter/Imprimer un historique des dernières transactions d’un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Historique 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Historique:
                  $ref: '#/components/schemas/ConsultationBadge'
  '/tpe/badge/historique/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal de Paiement Electronique
      summary: Historique des transactions d'un badge
      description: |
        Consulter/Imprimer un historique des dernières transactions d’un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Historique 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Historique:
                  $ref: '#/components/schemas/ConsultationbyIDBadge'
  '/tpv/badge/annulation/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal Point de Vente
      summary: Annulation de la dernière transaction TPV ou badge
      description: >
        Annulation de la dernière transaction réalisée sur le TPV ou celle du
        badge en cours
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Annulation 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Annulation'
  '/tpe/badge/annulation/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal de Paiement Electronique
      summary: Annulation de la dernière transaction TPE ou badge
      description: >
        Annulation de la dernière transaction réalisée sur le TPE ou celle du
        badge en cours
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Annulation 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Annulation'
  '/tpv/badge/signature/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal Point de Vente
      summary: Demander une signature des conditions d’utilisation imprimées
      description: |
        Demander une signature des conditions d’utilisation imprimées
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Conditions générales validées 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Signature'
  '/tpe/badge/signature/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Badge
        - Terminal de Paiement Electronique
      summary: Demander une signature des conditions d’utilisation imprimées
      description: |
        Demander une signature des conditions d’utilisation imprimées
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPE'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Conditions générales validées 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Signature'
  '/tpv/voucher/consommation/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Voucher
        - Terminal Point de Vente
      summary: Burn du voucher
      description: |
        Consomme ("burn") le voucher
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: GENERICTPV
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Vouchers consommés 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Voucher'
  '/tpe/voucher/consommation/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Voucher
        - Terminal de Paiement Electronique
      summary: Burn du voucher
      description: |
        Consomme ("burn") le voucher
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: GENERICTPV
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Vouchers consommés 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Voucher'
  '/tpv/pme/credit/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME - Porte-Monnaie Electronique
        - Terminal Point de Vente
      summary: Crédit PME
      description: |
        Créditer le porte-monnaie électronique d’un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: GENERICTPV
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Crédit PME effectué 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Credit'
  '/tpe/pme/credit/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME - Porte-Monnaie Electronique
        - Terminal de Paiement Electronique
      summary: Crédit PME
      description: |
        Créditer le porte-monnaie électronique d’un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: GENERICTPV
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Crédit PME effectué 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Credit'
  '/tpe/pme/debit/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME - Porte-Monnaie Electronique
        - Terminal de Paiement Electronique
      summary: Débit PME
      description: |
        Débiter le porte-monnaie électronique d’un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Débit PME effectué 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Debit'
  '/tpv/pme/debit/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME - Porte-Monnaie Electronique
        - Terminal Point de Vente
      summary: Débit PME
      description: |
        Débiter le porte-monnaie électronique d’un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Débit PME effectué 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Debit'
  '/tpv/pme/transfert/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME - Porte-Monnaie Electronique
        - Terminal Point de Vente
      summary: Transfert PME
      description: >
        Effectuer un transfert entre les porte-monnaie électronique de deux
        badges
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Transfert PME effectué 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Transfert'
  '/tpe/pme/transfert/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME - Porte-Monnaie Electronique
        - Terminal de Paiement Electronique
      summary: Transfert PME
      description: >
        Effectuer un transfert entre les porte-monnaie électronique de deux
        badges
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPE'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Transfert PME effectué 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Transfert'
  '/tpe/pme/remboursement/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME - Porte-Monnaie Electronique
        - Terminal de Paiement Electronique
      summary: Remboursement PME
      description: |
        Rembourser le solde d’un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Remboursement PME effectué 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Remboursement'
  '/tpv/pme/remboursement/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME - Porte-Monnaie Electronique
        - Terminal Point de Vente
      summary: Remboursement PME
      description: |
        Rembourser le solde d’un badge
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      Remboursement PME effectué 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Remboursement'
  '/tpe/pmeoffline/refill/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME Offline - Porte-Monnaie Electronique (evenements hors-ligne)
        - Terminal de Paiement Electronique
      summary: Crédit PME Offline (cartes MiFare UltraLight C)
      description: >
        Créditer le porte-monnaie électronique physique d’un badge MiFare
        UltraLight C avec un prépaiement ou un solde online.

        Necessite que l'évènement soit déclaré et de type offline
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    example: |
                      rechargement effectué 
                    description: Contient le message d’erreur si OK=0
                  Ticket:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStruct'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Rechargement:
                  $ref: '#/components/schemas/PMEOfflineRefill'
  '/tpe/pmeoffline/debitonline/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME Offline - Porte-Monnaie Electronique (evenements hors-ligne)
        - Terminal de Paiement Electronique
      summary: Débit PME Online (cartes MiFare UltraLight C)
      description: >
        Débiter le porte-monnaie électronique a distance d’un badge MiFare
        UltraLight C avec un prépaiement ou un solde online.

        Necessite que l'évènement soit déclaré et de type offline
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  IDTransaction:
                    type: integer
                    example: 2152
                    description: L'identifiant unique de transaction
                  IDBadge:
                    type: string
                    example: "_123456"
                  Montant:
                    type: integer
                    example: 1000
                    description: le montant en centimes
      requestBody:
        $ref: '#/components/requestBodies/DebitOnline'
  
  '/tpe/pmeoffline/creditoffline/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME Offline - Porte-Monnaie Electronique (evenements hors-ligne)
        - Terminal de Paiement Electronique
      summary: Crédit PME Offline (cartes MiFare UltraLight C)
      description: >
        Créditer le porte-monnaie électronique a distance d’un badge MiFare
        UltraLight C avec un prépaiement ou un solde online.

        Necessite que l'évènement soit déclaré et de type offline
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  Display:
                    type: string
                    description: Message à afficher sur le TPE
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/CreditOffline'
  
  '/tpe/pmeoffline/envoi/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - PME Offline - Porte-Monnaie Electronique (evenements hors-ligne)
        - Terminal de Paiement Electronique
      summary: Envoi des transactions Offline
      description: |
        Envoie les transactions réalisées en mode offline
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                TransactionsOffline:
                  $ref: '#/components/schemas/TransactionsOffline'
  '/tpv/contact/{BuilderKey}/{IDMarchand}/{Session}/{IDContact}':
    get:
      tags:
        - Utilisateurs
        - Terminal Point de Vente
      summary: Infos utilisateur
      description: |
        Consulter les informations d’un utilisateur dans le carnet d’adresses
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
        - in: path
          name: IDContact
          required: true
          description: ID du contact dont on veut récupérer les informations
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec
                  Code:
                    type: string
                    example: 1
                    description: Contient le code d’erreur en cas d’échec de l’ajout
                  IDContact:
                    type: string
                    example: '12354'
                    description: Contient l’identifiant du contact si réussite de l’ajout
                  Contact:
                    $ref: '#/components/schemas/ContactFull'
    patch:
      tags:
        - Utilisateurs
        - Terminal Point de Vente
      summary: Modification d'un utilisateur
      description: >
        Modifier les informations d’un contact du carnet d’adresses.

        Ne modifie que les champs envoyés ("patch").

        L'IdContact est récupéré a partir de /tpv/badgeinfo (qui le crée et
        l'associe au badge le cas échéant)
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
        - in: path
          name: IDContact
          required: true
          description: ID du contact dont on veut récupérer les informations
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec
                  Msg:
                    $ref: '#/components/schemas/ContactMsg'
                  IDContact:
                    type: string
                    example: '12354'
                    description: >-
                      Contient l’identifiant du contact si réussite de la
                      modification
                  Code:
                    type: string
                    example: 1
                    description: Contient le code d’erreur en cas d’échec de l’ajout
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Contact:
                  $ref: '#/components/schemas/Contact'
  '/tpv/fid/calcul/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Fidélité
        - Terminal Point de Vente
      summary: Calcul des gains fidélité
      description: |
        Envoi de la transaction de fidélité pour calcul des gains (Earn)
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 0
                    description: 1 => Réussite ; 0 => Echec
                  Msg:
                    type: string
                    example: OK
                  Display:
                    type: string
                    example: |-
                      Fidélité enregistrée 
                       
                  IDAchat:
                    type: integer
                    example: 1487834
                    description: Contient l’identifiant de l'achat
                  Remise:
                    type: integer
                    example: 500
                    default: 0
                    description: Montant de la remise à appliquer sur l’achat en cours
                  SoldePME:
                    type: integer
                    example: 500
                    description: Nouveau solde du PME
                  UsagePME:
                    type: integer
                    example: 0
                    default: 1
                    description: Présent si le scénario PME ne doit pas être joué ensuite
                  DisplayPME:
                    type: string
                    description: Affichage optionnel
                  Cadeaux:
                    $ref: '#/components/schemas/Cadeaux'
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Calcul'
  '/tpe/fid/calcul/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Fidélité
        - Terminal de Paiement Electronique
      summary: Calcul des gains fidélité
      description: |
        Envoi de la transaction de fidélité pour calcul des gains (Earn)
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 0
                    description: 1 => Réussite ; 0 => Echec
                  Msg:
                    type: string
                    example: OK
                  Display:
                    type: string
                    example: |-
                      Fidélité enregistrée 
                       
                  IDAchat:
                    type: integer
                    example: 1487834
                    description: Contient l’identifiant de l'achat
                  Remise:
                    type: integer
                    example: 500
                    default: 0
                    description: Montant de la remise à appliquer sur l’achat en cours
                  SoldePME:
                    type: integer
                    example: 500
                    description: Nouveau solde du PME
                  UsagePME:
                    type: integer
                    example: 0
                    default: 1
                    description: Présent si le scénario PME ne doit pas être joué ensuite
                  DisplayPME:
                    type: string
                    description: Affichage optionnel
                  Cadeaux:
                    $ref: '#/components/schemas/Cadeaux'
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Calcul'
  '/tpv/fid/consommation/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Fidélité
        - Terminal Point de Vente
      summary: Burn des gains fidélité
      description: |
        Consommation des cadeaux de fidélité (Burn)
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPV'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 0
                    description: 1 => Réussite ; 0 => Echec
                  Msg:
                    type: string
                    example: OK
                  Display:
                    type: string
                    example: |-
                      Fidélité enregistrée 
                       
                  IDAchat:
                    type: integer
                    example: 1487834
                    description: Contient l’identifiant de l'achat
                  Remise:
                    type: integer
                    example: 500
                    default: 0
                    description: Montant de la remise à appliquer sur l’achat en cours
                  SoldePME:
                    type: integer
                    example: 500
                    description: Nouveau solde du PME
                  UsagePME:
                    type: integer
                    example: 0
                    default: 1
                    description: Présent si le scénario PME ne doit pas être joué ensuite
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Consommation'
  '/tpe/fid/consommation/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Fidélité
        - Terminal de Paiement Electronique
      summary: Burn des gains fidélité
      description: |
        Consommation des cadeaux de fidélité (Burn)
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPE'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 0
                    description: 1 => Réussite ; 0 => Echec
                  Msg:
                    type: string
                    example: OK
                  Display:
                    type: string
                    example: |-
                      Fidélité enregistrée 
                       
                  IDAchat:
                    type: integer
                    example: 1487834
                    description: Contient l’identifiant de l'achat
                  Remise:
                    type: integer
                    example: 500
                    default: 0
                    description: Montant de la remise à appliquer sur l’achat en cours
                  SoldePME:
                    type: integer
                    example: 500
                    description: Nouveau solde du PME
                  UsagePME:
                    type: integer
                    example: 0
                    default: 1
                    description: Présent si le scénario PME ne doit pas être joué ensuite
                  Ticket:
                    $ref: '#/components/schemas/TicketStruct'
      requestBody:
        $ref: '#/components/requestBodies/Consommation'
  '/tpe/chequier/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Fidélité
        - Terminal de Paiement Electronique
      summary: Création d'un chequier
      description: |
        Permet la création d'un chequier avec le montant donnée en paramêtre.
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPE'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: string
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      requestBody:
        $ref: '#/components/requestBodies/GenerationChequier'
      responses:
        200:
          description: succes
          content:
            '*/*':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 0
                    description: 1 => Réussite ; 0 => Echec
                  Msg:
                    type: string
                    example: OK
                  CodeCheque:
                    type: string
                    example: CHQ_10023_EA54ADD3
                  Numero:
                    type: string
                    example: 0020365
                    description: Le numéro du cheque
  '/tpe/catalogue/listearticles/{IDCatalogue}/{IDMarchand}/{Session}':
    get:
      tags:
        - Terminal de Paiement Electronique
        - Catalogue
      summary: Récupération d'un catalogue d'articles
      description: |
        Permet d'obtenir la liste des articles d'un catalogue
      parameters:
        - in: path
          name: IDCatalogue
          description: Identifiant du catalogue
          required: true
          schema:
            type: integer
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: integer
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Succès
          content:
            'application/json':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  ProductList:
                    type: object
                    properties:
                      Nb:
                        type: integer
                        example: 1
                        description: Nombre d'articles du catalogue
                      Products:
                        type: array
                        items:
                          type: object
                          properties:
                            IDArticle:
                              type: integer
                              example: 1
                              description: Identifiant de l'article
                            Libelle:
                              type: string
                              description: Le libelle de l'article
                            Description:
                              type: string
                              description: Description de l'article
                            Reference:
                              type: string
                              description: Référence de l'article
                            PrixUnitaireHT:
                              type: integer
                              description: Prix hors taxe de l'article en centimes
                            PrixUnitaireTTC:
                              type: integer
                              description: Prix TTC de l'article en centimes
                            TVA:
                              type: number
                              nullable: true
                              example: 0.1
                              description: Taux de la TVA
  '/tpe/catalogue/carte/produits/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Terminal de Paiement Electronique
        - Catalogue
      summary: Récupération des articles liés à une carte
      description: |
        Permet d'obtenir la liste des articles liés à une carte
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPE'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: integer
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              type: object
              properties:
                Catalogue:
                  type: object
                  required:
                    - IDBadge
                  properties:
                    IDBadge:
                      type: string
                      description: Identifiant du badge
      responses:
        '200':
          description: Succès
          content:
            'application/json':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  produits:
                    type: array
                    items:
                      type: object
                      properties:
                        IDArticle:
                          type: integer
                          example: 1
                        Libelle:
                          type: string
                          example: toto
                        Description:
                          type: string
                          example: Description longue du produit
                        Reference:
                          type: string
                          example: Référence du produit
                        IDADesTarifs:
                          type: integer
                          example: 1
                        PrixUnitaireHT:
                          type: integer
                          example: 12
                        PrixUnitaireTTC:
                          type: integer
                          example: 13
                        DateDebut:
                          type: string
                          example: '2018-02-05 18:06:01'
  '/catalogue/carte/achat/{BuilderKey}/{IDMarchand}/{Session}':
    post:
      tags:
        - Terminal de Paiement Electronique
        - Catalogue
      summary: Enregistre un achat lié aux articles d'un carte
      description: |
        Enregistre un achat lié aux articles d'un carte
      parameters:
        - in: path
          name: BuilderKey
          description: 'Clef de version, spécifique à chaque client ET version de TPE'
          required: true
          schema:
            type: string
            minimum: 1
            maximum: 1
            default: EXAMPLEKEY
        - in: path
          name: IDMarchand
          description: Identifiant du marchand
          required: true
          schema:
            type: integer
        - in: path
          name: Session
          description: Identifiant de la session précédemment ouverte
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          'application/json':
            schema:
              type: object
              properties:
                Catalogue:
                  type: object
                  required:
                    - NumSerie
                    - IDBadge
                    - Achat
                  properties:
                    NumSerie:
                      type: string
                      example: 'AERA-1545'
                      description: | 
                        Numero de serie de l'equipement
                    IDBadge:
                      type: string
                      description: Identifiant du badge
                    Achat:
                      type: array
                      description: Tableau des articles achetés
                      items:
                        type: object
                        required:
                          - IDArticle
                          - Quantite
                          - MontantTotal
                        properties:
                          IDArticle:
                            type: integer
                            example: 1
                            description: Identifiant de l'article acheté
                          Quantite:
                            type: number
                            example: 1.1
                            description: Quantité acheté (int ou float)
                          MontantTotal:
                            type: integer
                            example: 100
                            description: Montant total de la ligne en centimes
                    Reponses:
                      type: array
                      description: Tableau des réponses aux questions
                      items:
                        type: object
                        required:
                          - IDQuestion
                          - IDReponsePossible
                          - Reponse
                        properties:
                          IDQuestion:
                            type: integer
                            example: 1
                            description: Identifiant de la question
                          IDReponsePossible:
                            type: integer
                            example: 1
                            description: Identifiant de la réponse possible
                          Reponse:
                            type: string
                            example: "homme"
                            description: Réponse de la question
      responses:
        '200':
          description: Succès
          content:
            'application/json':
              schema:
                type: object
                properties:
                  OK:
                    type: integer
                    example: 1
                    default: 1
                    description: 1 => Réussite ; 0 => Echec ; voir l’élément Msg
                  Msg:
                    type: string
                    example: OK
                    description: Contient le message d’erreur si OK=0
                  produits:
                    type: array
                    items:
                      type: object
                      properties:
                        IDArticle:
                          type: integer
                          example: 1
                        Libelle:
                          type: string
                          example: toto
                        Description:
                          type: string
                          example: Description longue du produit
                        Reference:
                          type: string
                          example: Référence du produit
                        IDADesTarifs:
                          type: integer
                          example: 1
                        PrixUnitaireHT:
                          type: integer
                          example: 12
                        PrixUnitaireTTC:
                          type: integer
                          example: 13
                        DateDebut:
                          type: string
                          example: '2018-02-05 18:06:01'
servers:
  - url: 'https://api-int.paiement.solutions/'
components:
  requestBodies:
    GenerationChequier:
      content:
        application/json:
          schema:
            type: object
            properties:
              Montant:
                type: integer
                format: int64
                description: montant en centimes
              DateFinValidite:
                type: string
                format: date
                example: '2019-06-26'
                description: la date ou le chequier n'est plus valide
              NumSerie:
                type: string
                example: 'AERA-1545'
                description: | 
                  Numero de serie de l'equipement
            required:
              - Montant
    DebitOnline:
      content:
        application/json:
          schema:
            type: object
            properties:
              DebitOnline:
                type: object
                properties:
                  NumSerie:
                    type: string
                  MontantMax:
                    type: integer
                    description: Montant à débiter
                  IDProgram:
                    type: integer
                  UserData:
                    type: string
                    description: Le numéro du billet/badge/autres..
    CreditOffline:
      content:
        application/json:
          schema:
            type: object
            properties:
              CreditOffline:
                type: object
                properties:
                  NumSerie:
                    type: string
                  NumBadge:
                    type: string
                    description: Numéro NFC de la carte Mifare
                  IDBadgeOnline:
                    type: string
                    example: "_123456"
                    description: IDBadge renvoyé par la route debitonline
                  IDTransaction:
                    type: integer
                    description: IDTransaction renvoyé par la route debitonline
    Annulation:
      content:
        application/json:
          schema:
            type: object
            properties:
              Annulation:
                $ref: '#/components/schemas/ConsultationBadge'
    Consommation:
      content:
        application/json:
          schema:
            type: object
            properties:
              Consommation:
                $ref: '#/components/schemas/FidConsommation'
    Teleparametrage:
      content:
        application/json:
          schema:
            type: object
            properties:
              Teleparametrage:
                $ref: '#/components/schemas/NumSerie'
    Consultation:
      content:
        application/json:
          schema:
            type: object
            properties:
              Consultation:
                $ref: '#/components/schemas/Consultation'
    Credit:
      content:
        application/json:
          schema:
            type: object
            properties:
              Credit:
                $ref: '#/components/schemas/PMECredit'
    Debit:
      content:
        application/json:
          schema:
            type: object
            properties:
              Debit:
                $ref: '#/components/schemas/PMEDebit'
    Transfert:
      content:
        application/json:
          schema:
            type: object
            properties:
              Transfert:
                $ref: '#/components/schemas/PMETransfert'
    Telecollecte:
      content:
        application/json:
          schema:
            type: object
            properties:
              Telecollecte:
                $ref: '#/components/schemas/Telecollecte'
    Remboursement:
      content:
        application/json:
          schema:
            type: object
            properties:
              Remboursement:
                $ref: '#/components/schemas/PMERemboursement'
    Recherche:
      content:
        application/json:
          schema:
            type: object
            properties:
              Recherche:
                $ref: '#/components/schemas/ConsultationFull'
    Initialisation:
      content:
        application/json:
          schema:
            type: object
            properties:
              Initialisation:
                $ref: '#/components/schemas/InitObject'
    Informations:
      content:
        application/json:
          schema:
            type: object
            properties:
              Informations:
                $ref: '#/components/schemas/Informations'
    Reset:
      content:
        application/json:
          schema:
            type: object
            properties:
              Reset:
                $ref: '#/components/schemas/Reset'
    Duplicata:
      content:
        application/json:
          schema:
            type: object
            properties:
              Duplicata:
                $ref: '#/components/schemas/ConsultationBadge'
    Signature:
      content:
        application/json:
          schema:
            type: object
            properties:
              Signature:
                $ref: '#/components/schemas/ConsultationBadgeObl'
    Voucher:
      content:
        application/json:
          schema:
            type: object
            properties:
              Consommation:
                $ref: '#/components/schemas/VoucherConsommation'
    Calcul:
      content:
        application/json:
          schema:
            type: object
            properties:
              Calcul:
                $ref: '#/components/schemas/FidCalcul'
  schemas:
    InitObject:
      required:
        - PointDeVente
        - Licence
        - Rang
        - NomPoste
        - NumSerie
        - Modele
        - SDK
      properties:
        PointDeVente:
          type: integer
          example: 123456
          default: 0
        Licence:
          type: string
          description: Licence d'exploitation de Boostore
          example: '9876543'
        Rang:
          type: string
          description: 'Numéro de rang du TPV (incrémental, libre)'
          example: '001'
        NomPoste:
          type: string
          description: Champ libre de description du TPV
          example: Bar
        NumSerie:
          type: string
          description: Numéro de série du TPV
          example: 187-432
        Modele:
          type: string
          example: Light
        SDK:
          type: string
          description: Numero de la version installée sur TPV
          example: '2.25'
        Remplacer:
          type: string
          description: Renseigner à OUI lors d’une maintenance matérielle
          example: Non
          default: Non
    TicketStruct:
      required:
        - Nb
      properties:
        Nb:
          type: integer
          example: 1
          default: 1
        Lignes:
          type: array
          items:
            $ref: '#/components/schemas/TicketObject'
    TicketObject:
      required:
        - Ligne
        - Msg
        - Img
        - Align
        - Taille
        - Gras
      properties:
        Ligne:
          type: integer
          description: Numero incrémental de la ligne
          example: 1
        Msg:
          type: string
          description: Texte à imprimer
          example: Bienvenue
        Img:
          type: string
          description: URL de l'image a imprimer
          example: 'http://example.com/image.bmp'
        Align:
          type: string
          description: 'Alignement de la ligne (L=> gauche, R => droite, C => centré)'
          example: L
        Taille:
          type: integer
          description: Taille (relatif au terminal)
          example: 1
          minimum: 1
          maximum: 3
        Gras:
          type: integer
          description: Mise en gras du texte
          example: 1
          minimum: 0
          maximum: 1
    Consultation:
      required:
        - NumSerie
      properties:
        NumSerie:
          type: string
          example: 178-35515
    ConsultationFull:
      required:
        - NumSerie
        - recherche
        - type
      properties:
        NumSerie:
          type: string
          example: 178-35515
          description: numéro de série du TPV
        recherche:
          type: string
          example: '41551'
          description: Saisie effectuée sur le TPV
        type:
          type: string
          enum:
            - T
            - C
            - 'N'
          description: >-
            Type de recherche; T= Téléphone, C=Numéro de badge ou partie du
            numéro en numérique ou en alpha, N=Nom en alpha
    ConsultationBadge:
      required:
        - NumSerie
      properties:
        NumSerie:
          type: string
          example: 178-35515
        IDBadge:
          type: integer
          example: '515155'
    ConsultationBadgeObl:
      required:
        - NumSerie
        - IDBadge
      properties:
        NumSerie:
          type: string
          example: 178-35515
        IDBadge:
          type: integer
          example: '515155'
    ConsultationbyIDBadge:
      required:
        - IDBadge
      properties:
        IDBadge:
          type: integer
          example: '515155'
    ReponseStruct:
      properties:
        Nb:
          type: integer
          example: '2'
          minimum: 1
          description: Nombre d'éléments de réponse
        Reponse:
          type: array
          items:
            $ref: '#/components/schemas/ReponseObject'
    ReponseObject:
      properties:
        Texte:
          type: string
          description: Texte à afficher dans une liste de choix
        NumBadge:
          type: string
          description: 'Identifiant du badge '
    NumSerie:
      required:
        - NumSerie
      properties:
        NumSerie:
          type: string
          example: 178-35515
    Telecollecte:
      required:
        - NumSerie
      properties:
        NumSerie:
          type: string
          example: 178-35515
        Version:
          type: string
          example: '2.22'
    TPEPMEInitObject:
      properties:
        Offline:
          type: integer
          example: '1'
          description: >-
            PME Offline, 0 ou absent pour PME Online. Si 1 alors l’élément
            PMEOffline est présent
          default: 0
        Debit:
          type: integer
          example: '1'
          description: Peut débiter le porte-monnaie
        Credit:
          $ref: '#/components/schemas/PMECreditObject'
    KDOObject:
      description: Non renvoyé pour les builderKeys Telium
      properties:
        CHQ:
          $ref: '#/components/schemas/PMEInitObject'
        CARTE:
          $ref: '#/components/schemas/PMEInitObject'
    PMEInitObject:
      properties:
        Debit:
          type: integer
          example: '1'
          description: Peut débiter le porte-monnaie
        Credit:
          $ref: '#/components/schemas/PMECreditObject'
    PMECreditObject:
      properties:
        CB:
          type: integer
          example: 1
          description: Peut créditer a partir d'une CB
        ESP:
          type: integer
          example: 1
          description: Peut créditer a partir d'un paiement en especes
        CHQ:
          type: integer
          example: 1
          description: Peut créditer a partir d'un chèque
        TOK:
          type: integer
          example: 1
          description: Peut créditer a partir d'un token
    PMEInitMenu:
      description: Autorise un menu supplémentaire de transfert et/ou rechargement
      properties:
        Trsf:
          type: integer
          example: '1'
          description: Propose le menu de transfert de solde
        Remb:
          type: integer
          example: '1'
          description: Propose le menu de remboursement de solde
    PMECredit:
      description: Créditer le porte-monnaie électronique d’un badge
      required:
        - NumSerie
        - IDBadge
        - Montant
        - ModeReg
      properties:
        NumSerie:
          type: string
          description: Numero de série du TPV
        IDBadge:
          type: integer
          description: Identifiant du badge
        Montant:
          type: integer
          description: Montant de la transaction en centimes
          example: 6590
        ModeReg:
          type: string
          description: >-
            1 -> Carte bancaire, 2 -> Amex, 3 -> Cetelem, 5 -> Cofinoga, 6 ->
            Diners, 8 -> Franfinance, 9 -> JCB, C -> Chèque, A->
            Accord/Finances, O -> Offert, U -> CUP, F -> Fintrax, 0 -> Autres ,
            E -> Espèces, P -> PME, T -> Token, G -> Gestion
          enum:
            - 1
            - C
            - E
            - T
        HashPAN:
          type: string
          description: PAN de la carte sous forme hashée
        TokenOK:
          type: integer
          description: '1= le client accepte la tokenisation de sa carte, sinon absent'
        MajPIN:
          type: integer
          example: 1234
          description: 'Si présent, met à jour le code PIN de la carte pour ce token'
        IDUtilisateur:
          type: string
          description: 'Le caissier qui a fait le crédit'
        RefTransac:
          type: string
          description: 'Référence de la transaction'
        NomClient:
          type: string
          description: Nom du client à mettre dans personne.Nom
        DateFinValidite:
          type: string
          format : date
          example: "2019-10-11"
          description : date de fin de validité du badge PME au format AAAA-MM-JJ
    PMEDebit:
      description: Débiter le porte-monnaie électronique d’un badge
      required:
        - NumSerie
        - IDBadge
        - Montant
      properties:
        NumSerie:
          type: string
          description: Numero de série du TPV
        IDBadge:
          type: integer
          description: Identifiant du badge
        IDAchat:
          type: integer
          description: Identifiant obtenu avec les fonctions fid/
        Montant:
          type: integer
          description: Montant de la transaction en centimes
          example: 6590
    PMETransfert:
      description: Débiter le porte-monnaie électronique d’un badge
      required:
        - NumSerie
        - IDBadgeFrom
        - NumBadgeTo
        - Montant
      properties:
        NumSerie:
          type: string
          description: Numero de série du TPV
        IDBadgeFrom:
          type: integer
          description: Identifiant obtenu avec la fonction badge/infos
        NumBadgeTo:
          type: integer
          description: Numero du badge à créditer lu lors de la demande de transfert
        Montant:
          type: integer
          description: Montant de la transaction en centimes
          example: 6590
    PMERemboursement:
      description: Rembourser le solde d’un badge
      required:
        - NumSerie
        - IDBadge
      properties:
        NumSerie:
          type: string
          description: Numero de série du TPV
        IDBadge:
          type: integer
          description: Identifiant obtenu avec la fonction badge/infos
    Informations:
      description: Requete
      properties:
        NumSerie:
          type: string
          example: 1024851-154
          description: Numéro de série du TPE
        NumBadge:
          type: integer
          example: '1551551'
          description: Numéro du badge ou de la carte
    Reset:
      description: Requete
      properties:
        NumSerie:
          type: string
          example: 1024851-154
          description: Numéro de série du TPE
        NumBadge:
          type: integer
          example: '1551551'
          description: Numéro du badge ou de la carte
    Badge:
      description: Requete
      properties:
        Porteur:
          $ref: '#/components/schemas/Porteur'
        LSTVCH:
          $ref: '#/components/schemas/LSTVCH'
        PME:
          $ref: '#/components/schemas/PME'
        VAD:
          type: string
          description: Numéro du token pour la VAD
        PIN:
          type: integer
        CCV:
          type: string
    BadgeTPV:
      description: Structure de badge Terminal Point de Vente
      properties:
        Porteur:
          $ref: '#/components/schemas/Porteur'
        LSTVCH:
          $ref: '#/components/schemas/LSTVCH'
        PME:
          $ref: '#/components/schemas/PME'
        VAD:
          type: string
          description: Numéro du token pour la VAD
        PIN:
          type: integer
        CCV:
          type: string
    BadgeTPE:
      description: Structure de badge Terminal de Paiement Electronique
      properties:
        Porteur:
          $ref: '#/components/schemas/PorteurTPE'
        VAD:
          type: string
          description: Numéro du token pour la VAD
        PIN:
          type: integer
        CCV:
          type: string
    Porteur:
      description: Informations du porteur
      properties:
        Prenom:
          type: string
        Nom:
          type: string
        IDContact:
          type: integer
          example: 156234
          description: Ne peut etre interrogé que si celui du groupe associé
    PorteurTPE:
      description: Informations du porteur
      properties:
        Prenom:
          type: string
        Nom:
          type: string
    LSTVCH:
      description: Présent si le badge a des vouchers disponibles
      properties:
        Nb:
          type: integer
          example: 1
          minimum: 0
          maximum: 1
          description: Nombre de vouchers différents liés au badge
        Vouchers:
          $ref: '#/components/schemas/Voucher'
    Voucher:
      description: Voucher
      properties:
        Nb:
          type: integer
          example: 1
          minimum: 1
          description: Nombre de vouchers valables
        IDVch:
          type: integer
          example: '1551551'
          description: Identifiant du voucher
        Libelle:
          type: string
          example: Entrée adulte
          description: Description du voucher
    VoucherConsommation:
      required:
        - NumSerie
        - IDBadge
        - IDVch
        - Nb
      properties:
        NumSerie:
          type: string
          description: Numero de série du TPV
        IDBadge:
          type: string
          description: 'Identifiant du badge '
        IDVch:
          type: string
          description: Identifiant obtenu avec la fonction badge/infos
        Nb:
          type: integer
          description: Nombre de badge a consommer ("burn")
    PME:
      description: Porte-monnaie électronique
      properties:
        Solde:
          type: integer
          example: 2590
          minimum: 1
          description: Montant en centime
        Devise:
          type: string
          example: EUR
          description: Devise du porte-monnaie
        minPIN:
          type: integer
          example: 2000
          description: >-
            Code PIN obligatoire au-delà du montant en centimes, jamais si
            absent
        minSoldeDebit:
          type: integer
          example: 500
          description: Solde minimum en centimes pour usage du PME
        Essais:
          type: integer
          example: 3
          description: Nombre de tentative pour la saisie du code PIN
        Tokenise:
          type: integer
          example: 1
          description: >-
            Demander la tokenisation en cas de rechargement par carte bancaire,
            0 sinon
        PIN:
          type: integer
          example: 1
          description: 'Demander la saisie d’un code PIN pour paiement par token, 0 sinon'
    QuestionFID:
      description: Présent si le point de vente propose un programme de fidélité
      properties:
        Nb:
          type: integer
          example: 2
          minimum: 1
          maximum: 12
          description: Présent si il faut poser des questions complémentaires
        QuestionsCLI:
          $ref: '#/components/schemas/QuestionStruct'
        Question:
          $ref: '#/components/schemas/QuestionStruct'
    QuestionStruct:
      description: Présent si le point de vente propose un programme de fidélité
      properties:
        Nb:
          type: integer
          example: 2
          minimum: 0
          maximum: 12
          description: Nombre de questions
        Question:
          $ref: '#/components/schemas/QuestionObject'
    QuestionObject:
      description: Object question (CLI ou FID)
      properties:
        ID:
          type: integer
          example: 2
        Titre:
          type: string
          description: Titre de la question
        Reponse:
          type: string
          enum:
            - 'N'
            - T
            - A
            - L
          description: 'N= numérique, T= texte, A= Alphanumérique, L= Liste de choix'
        A1:
          type: string
          description: Valeur à afficher
        R1:
          type: string
          description: Valeur à retourner
        A2:
          type: string
          description: Valeur à afficher
        R2:
          type: string
          description: Valeur à retourner
        A3:
          type: string
          description: Valeur à afficher
        R3:
          type: string
          description: Valeur à retourner
        A4:
          type: string
          description: Valeur à afficher
        R4:
          type: string
          description: Valeur à retourner
        A5:
          type: string
          description: Valeur à afficher
        R5:
          type: string
          description: Valeur à retourner
        A6:
          type: string
          description: Valeur à afficher
        R6:
          type: string
          description: Valeur à retourner
        A7:
          type: string
          description: Valeur à afficher
        R7:
          type: string
          description: Valeur à retourner
        A8:
          type: string
          description: Valeur à afficher
        R8:
          type: string
          description: Valeur à retourner
        A9:
          type: string
          description: Valeur à afficher
        R9:
          type: string
          description: Valeur à retourner
        A10:
          type: string
          description: Valeur à afficher
        R10:
          type: string
          description: Valeur à retourner
        A11:
          type: string
          description: Valeur à afficher
        R11:
          type: string
          description: Valeur à retourner
        A12:
          type: string
          description: Valeur à afficher
        R12:
          type: string
          description: Valeur à retourner
    ListeTransactions:
      description: Transaction effectuée
      required:
        - Debut
        - Fin
      properties:
        Rang:
          type: string
          description: 'Rang du TPE pour spécifier un terminal, 000 pour tous'
        Debut:
          type: string
          example: '2016-12-15T09:00:10Z'
        Fin:
          type: string
          example: '2016-12-17T09:00:10Z'
        Nb:
          type: integer
          description: Nombre de transaction attendues au total ou 0 pour toutes
          default: 0
          example: 10
        Offset:
          type: integer
          description: Valeur de décalage du rapatriement des transactions
          example: 10
    TransactionsSimples:
      description: Liste des transactions simplifiée
      properties:
        Type:
          type: integer
          example: '0'
          description: >-
            Type de transactions; 0 -> Achat, 1 -> Remboursement, 2->
            Annulation, autres RUF
          minimum: 0
          maximum: 2
        Resultat:
          type: integer
          example: '0'
          description: 'Résultat de la transaction ;  0 = Réussie, 1 = Echouée'
        ModeReg:
          type: string
          enum:
            - 1
            - 2
            - 3
            - 5
            - 6
            - 8
            - 9
            - C
            - A
            - O
            - U
            - F
            - 0
            - E
            - T
          example: 1
          description: >
            Mode de reglement : 1 -> Carte bancaire, 2 -> Amex, 3 -> Cetelem, 5
            -> Cofinoga, 6 -> Diners, 8 -> Franfinance, 9 -> JCB, C -> Chèque,
            A-> Accord/Finances, O -> Moneo, U -> CUP, F -> Fintrax, 0 -> Autres
            , -> Espèces, T -> Token
        Montant:
          type: integer
          example: 6590
          description: 'Montant de la transaction, en centimes'
        Devise:
          type: string
          example: EUR
          description: Devise de règlement
        Date:
          type: string
          format: date-time
          example: '2016-12-15T09:00:10Z'
          description: Date et heure de la transaction
        NumTransac:
          type: string
          example: 123
        NumRemise:
          type: string
          example: 456
        NumLogique:
          type: string
          example: 789
        RangTPE:
          type: string
          example: 1
        Origine:
          type: string
          enum:
            - W2S
            - Concert
            - Saisie
        Application:
          type: string
          description: Référence application
        ChampPriv:
          type: string
          example: Reference client
          description: Champ privatif
        IDTransW2S:
          type: integer
          description: Référence Web2Store
          example: 1655323
        Affichage:
          type: string
          description: Référence d'affichage
          example: Table 15
        Carte:
          $ref: '#/components/schemas/CarteSimpleObject'
    TransactionsTPV:
      description: Transaction effectuée
      required:
        - Type
        - Resultat
        - ModeReg
        - Montant
        - Devise
        - Date
        - NumSerie
        - RangTPV
        - IDBadge
      properties:
        Type:
          type: integer
          example: '0'
          description: >-
            Type de transactions; 0=> Achat, 1=>Remboursement, 2=>Annulation,
            autres RUF
          minimum: 0
          maximum: 2
        Resultat:
          type: integer
          example: '0'
          description: 'Résultat de la transaction ;  0 = Réussie, 1 = Echouée'
        ModeReg:
          type: string
          example: 1
          description: Mode de reglement
        Montant:
          type: integer
          example: 6590
          description: 'Montant de la transaction, en centimes'
        Devise:
          type: string
          example: EUR
          description: Devise de règlement
        Date:
          type: string
          format: date-time
          example: '2016-12-15T09:00:10Z'
          description: Date et heure de la transaction
        RefTicket:
          type: string
          example: '456'
          description: Référence du ticket
        ChampPriv:
          type: string
          example: Whatever reference
          description: Champ privatif
        NuMSerie:
          $ref: '#/components/schemas/NumSerie'
        RangTPV:
          type: integer
          example: 1
          description: Rang du TPV
        Origine:
          type: string
          example: Salle
          description: Commentaire libre
        Partenaire:
          type: string
          example: Deliveroo
          description: Nom du partenaire
        IDBadge:
          type: integer
          example: 85210545
          description: Identifiant du badge
    TransactionTPE:
      description: Transaction effectuée
      required:
        - Type
        - Resultat
        - ModeReg
        - Montant
        - Devise
        - Date
        - NumTransac
        - NumRemise
        - NumLogique
        - NumSerie
        - RangTPE
        - Origine
        - Application
        - IDBadge
        - Carte
      properties:
        Type:
          type: integer
          example: '0'
          description: >-
            Type de transactions; 0=> Achat, 1=>Remboursement, 2=>Annulation,
            autres RUF
          minimum: 0
          maximum: 2
        Resultat:
          type: integer
          example: '0'
          description: 'Résultat de la transaction ;  0 = Réussie, 1 = Echouée'
        ModeReg:
          type: string
          enum:
            - 1
            - 2
            - 3
            - 5
            - 6
            - 8
            - 9
            - C
            - A
            - O
            - U
            - F
            - 0
            - E
            - T
          example: 1
          description: >
            Mode de reglement : 1 -> Carte bancaire, 2 -> Amex, 3 -> Cetelem, 5
            -> Cofinoga, 6 -> Diners, 8 -> Franfinance, 9 -> JCB, C -> Chèque,
            A-> Accord/Finances, O -> Moneo, U -> CUP, F -> Fintrax, 0 -> Autres
            , -> Espèces, T -> Token
        Montant:
          type: integer
          example: 6590
          description: 'Montant de la transaction, en centimes'
        Devise:
          type: string
          example: EUR
          description: Devise de règlement
        Date:
          type: string
          format: date-time
          example: '2016-12-15T09:00:10Z'
          description: Date et heure de la transaction
        NumTransac:
          type: string
          example: 123
        NumRemise:
          type: string
          example: 456
        NumLogique:
          type: string
          example: 789
        NumSerie:
          type: string
          description: Numéro de série du TPV
          example: 187-432
        RangTPE:
          type: integer
          example: 1
        Origine:
          type: string
          enum:
            - W2S
            - Concert
            - Saisie
        Application:
          type: string
          description: Référence application
        ChampPriv:
          type: string
          example: Reference client
          description: Champ privatif
        IDTransW2S:
          type: integer
          description: Référence Web2Store
          example: 1655323
        Affichage:
          type: string
          description: Référence d'affichage
          example: Table 15
        Carte:
          $ref: '#/components/schemas/CarteObject'
    TransactionPrestataire:
      required:
        - NumSerie
        - Code
        - Prestataire
      properties:
        NumSerie:
          type: string
          description: Numéro de série du TPE
          example: 187-432
        Code:
          type: string
          description: Référence saisie dans le menu du prestataire
        Prestataire:
          type: string
          description: Nom du prestataire obtenu lors lors du paramètrage RefTransac
    CarteObject:
      description: Informations de la carte
      required:
        - CodeType
        - HashPAN
      properties:
        CodeType:
          type: integer
          example: '497534'
          description: 6 premiers chiffres de la carte bancaire
          minLength: 6
          maxLength: 6
        Brand:
          type: string
          example: VISA
          description: Information obtenue lors de la tokenisation
        Issuer:
          type: string
          example: Natixis
          description: Information obtenue lors de la tokenisation
        Country:
          type: string
          example: FR
          description: Information obtenue lors de la tokenisation
        Type:
          type: string
          example: Debit
          description: Information obtenue lors de la tokenisation
        Category:
          type: string
          example: Gold
          description: Information obtenue lors de la tokenisation
        HashPAN:
          type: string
          description: PAN de la carte sous forme hashée
        EncryptedPAN:
          type: string
          description: Référence PAN encryptée par une méthode PCI-DSS
        PrestaPCIDSS:
          type: string
          description: Prestataire PCI-DSS
    CarteSimpleObject:
      description: Informations de la carte
      required:
        - CodeType
        - HashPAN
      properties:
        CodeType:
          type: integer
          example: '497534'
          description: 6 premiers chiffres de la carte bancaire
          minLength: 6
          maxLength: 6
        HashPAN:
          type: string
          description: PAN de la carte sous forme hashée
        EncryptedPAN:
          type: string
          description: Référence PAN encryptée par une méthode PCI-DSS
        PrestaPCIDSS:
          type: string
          description: Prestataire PCI-DSS
    Contact:
      description: >-
        Informations du contact. Necessite la création/affectation d'un badge
        auparavant (appel BadgeInfo obligatoire).
      required:
        - IdBadge
        - Nom
        - Prenom
        - Emails
        - Telephones
      properties:
        IDBadge:
          type: string
          example: '21515021'
          description: Identifiant du badge ou de la carte à utiliser pour les appels
        Nom:
          type: string
          example: Dupont
          description: Nom de famille
          minLength: 2
        Prenom:
          type: string
          example: Jean
          description: Prénom
          minLength: 2
        Civilite:
          enum:
            - 0
            - 1
            - 2
            - 3
          description: '0 => Inconnu, 1 => Mademoiselle, 2 => Madame, 3 => Monsieur'
          example: 1
        Sexe:
          enum:
            - 0
            - 1
            - 2
          description: '0 => Inconnu, 1 => Masculin, 2 => Feminin'
          example: 1
        DateNaissance:
          type: string
          format: date
          example: '1975-12-03'
          description: Date de naissance
        Password:
          type: string
          format: password
          description: Mot de passe
          minLength: 4
          maxLength: 64
        Email:
          type: array
          items:
            $ref: '#/components/schemas/Email'
        Telephone:
          type: array
          items:
            $ref: '#/components/schemas/Telephone'
        Adresse:
          type: array
          items:
            $ref: '#/components/schemas/Adresse'
    Email:
      description: E-mails
      required:
        - Email
      properties:
        Tag:
          type: string
          description: Etiquette à associer
        Email:
          type: string
          format: email
          example: jean.dupont@domaine.com
          description: email
        default:
          type: integer
          description: e-mail par défaut
          default: 0
          maximum: 1
          minimum: 0
    Telephone:
      description: N° de téléphone
      required:
        - Telephone
      properties:
        Tag:
          type: string
          description: Etiquette à associer
        Telephone:
          type: string
          format: email
          example: '+33478300295'
          description: Telephone au format international
        default:
          type: integer
          description: telephone par défaut
          default: 0
          maximum: 1
          minimum: 0
        IDTypeTelephone:
          enum:
            - 1
            - 2
            - 3
            - 4
          description: |
            1 : Fixe Personnel
            2 : Fixe Professionnel
            3 : Mobile Personnel
            4 : Mobile Professionnel
          example: 1
    Adresse:
      description: Adresse physique
      required:
        - AdresseA
        - CodePostal
        - Ville
        - Pays
      properties:
        Tag:
          type: string
          description: Etiquette à associer
        AdresseA:
          type: string
          example: 7 rue Laurent Vibert
          description: Adresse A au sens INSEE
        AdresseB:
          type: string
          example: Bâtiment A
          description: Adresse B au sens INSEE
        AdresseC:
          type: string
          example: Etage 1
          description: Adresse C au sens INSEE
        CodePostal:
          type: string
          example: '69006'
          description: Code postal
        Ville:
          type: string
          example: Lyon
          description: Ville
        Pays:
          type: string
          example: France
          description: Pays
    ContactMsg:
      description: >-
        Informations du contact , array [key => le champ, value => array les
        messages d’erreurs]]
      required:
        - Nb
        - Telephones
        - Emails
      properties:
        Nb:
          type: integer
          description: Nombre d'erreurs
        telephones:
          type: array
          items:
            $ref: '#/components/schemas/TelephoneErr'
        Emails:
          type: array
          items:
            $ref: '#/components/schemas/EmailsErr'
    TelephoneErr:
      description: Erreur de téléphone
      type: string
      example: Le champ Telephones est obligatoire si le champ emails n’est pas présent
    EmailsErr:
      description: Erreur de mail
      type: string
      example: Le champ mail est obligatoire si le champ téléphone n’est pas présent
    ContactFull:
      description: Informations completes du contact
      properties:
        IDContact:
          type: integer
          example: 12354
          description: Identifiant du contact
        IDSociete:
          type: integer
          example: null
        IDFamille:
          type: integer
          example: null
        IDTarif:
          type: integer
          example: null
        IDCompte:
          type: integer
          example: null
        IDCSP:
          type: integer
          example: null
        MotDePasse:
          type: string
          format: password
          description: Mot de passe
          minLength: 4
        Prenom:
          type: string
          example: Jean
          description: Prénom
          minLength: 2
        Nom:
          type: string
          example: Dupont
          description: Nom de famille
          minLength: 2
        DateNaissance:
          type: string
          format: date
          example: '1975-12-03'
          description: Date de naissance
        Civilite:
          enum:
            - 0
            - 1
            - 2
            - 3
          description: '0 => Inconnu, 1 => Mademoiselle, 2 => Madame, 3 => Monsieur'
          example: 1
        Sexe:
          enum:
            - 0
            - 1
            - 2
          description: '0 => Inconnu, 1 => Masculin, 2 => Feminin'
          example: 1
        Emails:
          type: array
          items:
            $ref: '#/components/schemas/Email'
        Telephones:
          type: array
          items:
            $ref: '#/components/schemas/Telephone'
        Adresses:
          type: array
          items:
            $ref: '#/components/schemas/Adresse'
        DateCreation:
          type: string
          format: date-time
          example: '2017-02-02 14:48:17'
          description: A mettre lors de la création
        DateModification:
          type: string
          format: date-time
          example: '2017-02-02 14:48:17'
        Observation:
          type: string
          example: 'null'
          description: Attention au contenu de ce champ
        SaisiePar:
          type: string
          example: 'null'
        Reference:
          type: string
          example: 'null'
        Remarques:
          type: string
          example: 'null'
    FidCalcul:
      description: Calcul de fidélité
      required:
        - NumSerie
        - IDBadge
        - Montant
      properties:
        NumSerie:
          type: string
          description: numéro de série du TPV
        IDBadge:
          type: integer
          description: Identifiant obtenu avec la fonction badge/infos
        Montant:
          type: integer
          description: Montant de la transaction en centimes d’euros
          example: 6590
        QuestionsFID:
          $ref: '#/components/schemas/QuestionStruct'
        QuestionsCLI:
          $ref: '#/components/schemas/QuestionStruct'
    Cadeaux:
      description: Présent si il y a des cadeaux à proposer
      properties:
        Nb:
          type: integer
          example: 1
          minimum: 0
          description: Nombre de cadeaux liés au badge
        Cadeau:
          type: array
          items:
            $ref: '#/components/schemas/CadeauObject'
    CadeauObject:
      description: Description du cadeau
      required:
        - IDCadeau
      properties:
        IDCadeau:
          type: integer
          example: 65456776
        Libelle:
          type: string
          example: 10% sur votre prochain achat
    FidConsommation:
      description: Consommation des cadeaux de fidélité (Burn)
      required:
        - NumSerie
        - IDBadge
        - IDAchat
      properties:
        NumSerie:
          type: string
          description: numéro de série du TPV
        IDBadge:
          type: integer
          description: Identifiant obtenu avec la fonction badge/infos
        IDAchat:
          type: integer
          example: 1487834
        IDCadeau:
          type: integer
          example: 65456776
    TPERefTransac:
      description: 'Si présent, qualifie les possibilités de configuration des références'
      properties:
        WS2Liste:
          type: integer
          description: >-
            Si présent, permet de proposer la liste des transactions Web2Store
            sur le TPE
          example: 1
        WS2Recherche:
          type: integer
          description: >-
            Si présent, permet de proposer la recherche des transactions
            Web2Store sur le TPE
          example: 1
        Saisie:
          type: integer
          description: >-
            Si présent, permet de proposer la recherche par saisie libre d'une
            référence sur le TPE
          example: 1
        Prestataire:
          type: string
          description: >-
            Si présent, permet de proposer la recherche d'une référence
            prestataire sur le TPE
          example: Nom
    PrestaPCIDSS:
      description: 'Si présent, informations sur le prestataire PCI-DSS utilisé'
      properties:
        Nom:
          type: string
          description: Nom du prestataire de tokenisation des cartes bancaires
        Env:
          type: string
          enum:
            - Dev
            - Stage
            - Prod
          description: Environnement de tokenisation utilisé chez le prestataire PCIDSS
        Username:
          type: string
          description: Nom d'utilisateur pour la tokenisation
        Pwd:
          type: string
          description: Mot de passe pour la tokenisation
    PMEOfflineStruct:
      properties:
        Nb:
          type: integer
          example: '1'
          minimum: 1
          description: Nombre d'éléments de réponse
        Programs:
          type: array
          items:
            $ref: '#/components/schemas/PMEOfflineObject'
    PMEOfflineObject:
      properties:
        Program:
          type: integer
          description: Numéro du programme dans la liste
          default: 1
          minimum: 1
          example: 1
        IDProgram:
          type: integer
          description: Identifiant du programme Cashless
          example: 1528
        Name:
          type: string
          description: Nom du programme Cashless
          example: Mon programme Cashless récurrent
        LockUserData:
          type: integer
          description: >-
            Verrouille (1) ou non (0) les zones privatives (hors IDProgram et
            zones techiques CISS)
          enum:
            - 0
            - 1
        Start:
          type: integer
          description: 'Si présent, date & heure de début du programme cashless'
          example: 201804031500
        End:
          type: integer
          description: 'Si présent, date & heure de fin du programme cashless'
          example: 201804051800
        Caution:
          type: integer
          description: >-
            Montant de la caution optionnelle en centimes d’euros à débiter lors
            de l’initialisation du badge
          example: 100
        InitCard:
          type: integer
          description: 'Si 0, ne permet pas l''initialisation de cartes vierges (fraude)'
          default: 1
          enum:
            - 0
            - 1
        DESKey:
          type: string
          description: >-
            Clef DES de cryptage des zones techniques. 16 caractères ASCII
            imprimables
          default: Aucune
    TPEPMEBadgeObject:
      properties:
        Debit:
          type: integer
          example: '1'
          description: Peut débiter le porte-monnaie
        Credit:
          $ref: '#/components/schemas/PMECreditObject'
        Solde:
          type: integer
          example: 2590
          minimum: 1
          description: Montant en centime
        Devise:
          type: string
          example: EUR
          description: Devise du porte-monnaie
        minPIN:
          type: integer
          example: 2000
          description: >-
            Code PIN obligatoire au-delà du montant en centimes, jamais si
            absent
        minSoldeDebit:
          type: integer
          example: 500
          description: Solde minimum en centimes pour usage du PME
        Essais:
          type: integer
          example: 3
          description: Nombre de tentative pour la saisie du code PIN
        Tokenise:
          type: integer
          example: 1
          description: >-
            Demander la tokenisation en cas de rechargement par carte bancaire,
            0 sinon
        PIN:
          type: integer
          example: 1
          description: 'Demander la saisie d’un code PIN pour paiement par token, 0 sinon'
    PMEOfflineRefill:
      required:
        - NumSerie
        - Numbadge
        - Montant
      properties:
        NumSerie:
          type: string
          description: Numéro de série du TPV
          example: 187-432
        NumBadge:
          type: string
          description: Identifiant du badge sans contact
        UserData:
          type: string
          description: >-
            Contenu des pages 6 à 20 du badge (zone privative), 20 octets max
            (tronqué au-delà), format libre
        MontantMax:
          type: integer
          description: 'Montant maximum autorisé pour le rechargement, en centimes'
        Montant:
          type: integer
          description: 'Montant de la recharge du PME, en centimes'
    TransactionsOffline:
      type: array
      items:
        $ref: '#/components/schemas/TransactionOffline'
    TransactionOffline:
      required:
        - Type
        - IDProgram
        - ModeReg
        - Montant
        - SoldeBadge
        - Devise
        - Date
        - NUmSerie
        - RangTPE
        - UserData
        - NumBadge
      properties:
        Type:
          type: integer
          example: '0'
          description: >-
            Type de transactions; 0 -> Achat, 1 -> Remboursement, 2->
            Annulation, autres RUF
          minimum: 1
          maximum: 1
        IDProgram:
          type: integer
          description: Identifiant du programme Cashless
          example: 1528
        ModeReg:
          type: string
          description: '1=Carte bancaire, C=Chèque, E=Espèces, T=TokenVAD'
          enum:
            - 1
            - C
            - E
            - T
        Montant:
          type: integer
          description: Montant de la transaction en centimes
          example: 6590
        SoldeBadge:
          type: integer
          description: Solde du badge apres la transaction en centimes
          example: 390
        Devise:
          type: string
          example: EUR
          description: Devise du porte-monnaie
        Date:
          type: string
          format: date-time
          example: '2016-12-15T09:00:10Z'
          description: Date et heure de la transaction
        NumSerie:
          type: string
          description: Numéro de série du TPE
          example: 187-432
        RangTPE:
          type: string
          example: '001'
        UserData:
          type: string
          description: >-
            Contenu des pages 6 à 20 du badge (zone privative), 20 octets max
            (tronqué au-delà), format libre
        NumBadge:
          type: string
          description: Identifiant du badge sans contact
        ExtraData:
          type: string
          description: Données supplementaires pour prestataires exterieurs par exemple.
          example: |
            {
              transaction:qsdhqoshqsf,
              qfsjqijsfqsf
            }