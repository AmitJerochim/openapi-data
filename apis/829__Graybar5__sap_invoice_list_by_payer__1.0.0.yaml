penapi: 3.0.0
info:
  version: '1.0.0'
  title: 'Luna Physical Therapy Availability'
  description: 'Sent by DocSpera to Luna when a new Case is created, to determine if Patient is eligible for Physical Therapy.'
security:
  - UserSecurity: []
paths:
  /availability:
    post:
      description: Sent by DocSpera to Luna when a new Case is created, to determine if Patient is eligible for Physical Therapy.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LunaAvailabilityReq"
      responses:
        "200":
          description: Luna has received DocSpera's availability request for this Case.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "available"
                    description: >
                      Has Luna determined if PT for this Case is available? Legal values:
                      
                      - "serviceable": Partner has determined that PT is available.
                      
                      - "unserviceable": Partner has determined that PT is not available.
                      
                      - "unprocessable_address": Partner could not determine availability due to invalid details in the Patient's address.
                      
                      - "unprocessable_insurance": Partner could not determine availability due to invalid details in the Patient's insurance.
        "400":
          $ref: "#/components/responses/400Error"
          
servers:
  - description: Luna Production API
    url: https://mkt.getluna.com/api/v1
# Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/DocSpera/Luna_PT_Availability/1.0.0
    
components:
  responses:
    400Error:
      description: Invalid request
      content:
        "*/*":
          schema:
            type: object
            properties:
              status:
                type: string
                example: "Error"
  securitySchemes:
    UserSecurity:
      type: http
      scheme: basic
  schemas:
    LunaAvailabilityReq:
      type: object
      properties:
        client_id:
          type: string
          description: set to "docspera"
        patient:
          type: object
          description: Details about the Patient which are necessary for geographically determining PT availability.
          properties:
            address:
              type: object
              description: Object containing Patient's residential address details.
              required:
                - street_address
                - street_address_2
                - city
                - state
                - zip_code
              properties:
                street_address:
                  type: string
                  example: "150 W Iowa Ave"
                  description: Line 1 of Patient's address (house number & street name).
                street_address_2:
                  type: string
                  example: "Ste 102"
                  description: Line 2 of Patient's address (Apt/Unit number).
                city:
                  type: string
                  example: "Sunnyvale"
                  description: Patient's city.
                state:
                  type: string
                  example: "CA"
                  description: Two-letter abbreviation for Patient's state of residence.
                zip_code:
                  type: integer
                  example: 94086
                  description: Patient's zip code.
            insurance:
              type: object
              description: Object containing Patient's primary insurance details.
              required:
                - provider
                - policy_id
                - group_id
              properties:
                provider:
                  type: string
                  example: "Aetna"
                  description: Name of primary insurance provider.
                policy_id:
                  type: string
                  example: "H239CS5756"
                  description: Primary insurance policy ID.
                group_id:
                  type: string
                  example: "749865200"
                  description: Primary insurance group ID.