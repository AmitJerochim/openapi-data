penapi: 3.0.0
info:
  version: "1.0.0"
  title: API de Cobrança do Sicred Internetbanking MEI
paths:
  /bff/cobranca/v1/cobrancas:
    post:
      tags:
        - cadastrar-cobranca
      summary: >-
        Cadastro de novas cobranças do associado (ex. boleto, cartão de cŕedito,
        QR Code)
      operationId: cadastrarCobranca
      parameters:
        - name: Content-Type
          in: header
          description: Content-Type
          required: true
          schema:
            type: string
            default: application/json;charset=UTF-8
        - name: Authorization
          in: header
          description: authorization
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CobrancaDTO'
      responses:
        '200':
          description: OK
          content:
            application/json;charset=UTF-8:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProtocoloDTO'
        '400':
          description: Requisição inválida
        '401':
          description: Erro de autenticação
        '403':
          description: Erro de autorização
        '404':
          description: Path inexistente
        '415':
          description: Media Type não suportado
        '422':
          description: Entidade não processável
  '/bff/cobrancaa/v1/cobrancas/{oidCobranca}':
    get:
      tags:
        - consultar-cobranca
      summary: Consulta detalhes da cobrança cadastrada pelo associado
      operationId: consultarCobranca
      parameters:
        - name: Content-Type
          in: header
          description: Content-Type
          required: true
          schema:
            type: string
            default: application/json;charset=UTF-8
        - name: Authorization
          in: header
          description: authorization
          required: true
          schema:
            type: string
        - name: oidCobranca
          in: path
          description: Identificador único da cobrança
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CobrancaDTO'
        '204':
          description: Recurso não localizado
        '400':
          description: Requisição inválida
        '401':
          description: Erro de autenticação
        '403':
          description: Erro de autorização
        '404':
          description: Path inexistente
        '415':
          description: Media Type não suportado
        '422':
          description: Entidade não processável
          
  '/bff/cobrancaa/v1/cobrancas':
    get:
      tags:
        - consultar-cobrancas
      summary: Consulta lista de cobranças cadastradas pelo associado
      operationId: consultarCobrancas
      parameters:
        - name: Content-Type
          in: header
          description: Content-Type
          required: true
          schema:
            type: string
            default: application/json;charset=UTF-8
        - name: Authorization
          in: header
          description: authorization
          required: true
          schema:
            type: string
        - name: situacao
          in: query
          description: Situação da cobrança
          required: true
          schema:
            type: string
            enum:
            - PENDENTE
            - LIQUIDADA
        - name: inicioPeriodo
          in: query
          description: Data inicial do vencimento/liquidação
          required: false
          schema:
            type: string
            format: date
        - name: fimPeriodo
          in: query
          description: Data final do vencimento/liquidação
          required: false
          schema:
            type: string
            format: date
        - name: pagina
          in: query
          description: Número da página
          required: false
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CobrancaDTO'
        '204':
          description: Recurso não localizado
        '400':
          description: Requisição inválida
        '401':
          description: Erro de autenticação
        '403':
          description: Erro de autorização
        '404':
          description: Path inexistente
        '415':
          description: Media Type não suportado
        '422':
          description: Entidade não processável
          
  '/bff/cobranca/v1/pagadores':
    get:
      tags:
        - consultar-pagadores
      summary: Consulta lista de pagadores de cobrança cadastrados pelo associado
      operationId: consultarPagadores
      parameters:
        - name: Content-Type
          in: header
          description: Content-Type
          required: true
          schema:
            type: string
            default: application/json;charset=UTF-8
        - name: Authorization
          in: header
          description: authorization
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PagadorCobrancaDTO'
        '204':
          description: Recurso não localizado
        '400':
          description: Requisição inválida
        '401':
          description: Erro de autenticação
        '403':
          description: Erro de autorização
        '404':
          description: Path inexistente
        '415':
          description: Media Type não suportado
        '422':
          description: Entidade não processável

  '/bff/cobranca/v1/pagadores/{oidPagador}':
    get:
      tags:
        - consultar-pagador
      summary: Consulta pagador cadastrado pelo associado
      operationId: consultarPagador
      parameters:
        - name: Content-Type
          in: header
          description: Content-Type
          required: true
          schema:
            type: string
            default: application/json;charset=UTF-8
        - name: Authorization
          in: header
          description: authorization
          required: true
          schema:
            type: string
        - name: oidPagador
          in: path
          description: Identificador único do pagador
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagadorCobrancaDTO'
        '204':
          description: Recurso não localizado
        '400':
          description: Requisição inválida
        '401':
          description: Erro de autenticação
        '403':
          description: Erro de autorização
        '404':
          description: Path inexistente
        '415':
          description: Media Type não suportado
        '422':
          description: Entidade não processável
    delete:
      tags:
        - excluir-pagador
      summary: Exclusão de pagadores (sacados) cadastrados pelo associado
      operationId: excluirPagador
      parameters:
        - name: Content-Type
          in: header
          description: Content-Type
          required: true
          schema:
            type: string
            default: application/json;charset=UTF-8
        - name: Authorization
          in: header
          description: authorization
          required: true
          schema:
            type: string
        - name: oidPagador
          in: path
          description: Identificador único do pagador
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: OK
        '400':
          description: Requisição inválida
        '401':
          description: Erro de autenticação
        '403':
          description: Erro de autorização
        '404':
          description: Path inexistente
        '415':
          description: Media Type não suportado
        '422':
          description: Entidade não processável

  '/bff/cobranca/v1/pagadores/{oidPagador}/configuracao':
    put:
      tags:
        - configurar-pagador
      summary: Configura parâmetros de cobrança utilizados para o pagador (sacado)
      operationId: configurarPagador
      parameters:
        - name: Content-Type
          in: header
          description: Content-Type
          required: true
          schema:
            type: string
            default: application/json;charset=UTF-8
        - name: Authorization
          in: header
          description: authorization
          required: true
          schema:
            type: string
        - name: oidPagador
          in: path
          description: Identificador único do pagador
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ParametrosPagadorCobrancaDTO'
      responses:
        '204':
          description: OK
        '400':
          description: Requisição inválida
        '401':
          description: Erro de autenticação
        '403':
          description: Erro de autorização
        '404':
          description: Path inexistente
        '415':
          description: Media Type não suportado
        '422':
          description: Entidade não processável
    
  '/bff/cobranca/v1/adesao-produtos':
    get:
      tags:
        - consultar-adesao-produtos
      summary: Consulta produtos de cobrança contratados pelo associado
      operationId: consultarProdutosAssociado
      parameters:
        - name: Content-Type
          in: header
          description: Content-Type
          required: true
          schema:
            type: string
            default: application/json;charset=UTF-8
        - name: Authorization
          in: header
          description: authorization
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AdesaoProdutoCobrancaDTO'
        '204':
          description: Recurso não localizado
        '400':
          description: Requisição inválida
        '401':
          description: Erro de autenticação
        '403':
          description: Erro de autorização
        '404':
          description: Path inexistente
        '415':
          description: Media Type não suportado
        '422':
          description: Entidade não processável
  '/bff/cobranca/v1/adesao-produtos/{tipoProduto}/adesao-vigente':
    get:
      tags:
        - consultar-adesao-vigente
      summary: Consulta detalhes da adesão vigente (adesão principal / ativa) do associado a um tipo específico de produto de cobrança
      operationId: consultarAdesaoVigente
      parameters:
        - name: Content-Type
          in: header
          description: Content-Type
          required: true
          schema:
            type: string
            default: application/json;charset=UTF-8
        - name: Authorization
          in: header
          description: authorization
          required: true
          schema:
            type: string
        - name: tipoProduto
          in: path
          description: Tipo do produto de cobrança
          required: true
          schema:
            type: string
            enum: 
            - BOLETO
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                $ref: '#/components/schemas/AdesaoProdutoCobrancaDTO'
        '204':
          description: Recurso não localizado
        '400':
          description: Requisição inválida
        '401':
          description: Erro de autenticação
        '403':
          description: Erro de autorização
        '404':
          description: Path inexistente
        '415':
          description: Media Type não suportado
        '422':
          description: Entidade não processável

servers:
  - url: 'https://virtserver.swaggerhub.com/bgbauer/Cobranca/1.0.0'
components:
  schemas:
    CobrancaDTO:
      type: object
      required:
        - convenio
        - pagador
        - tipoCobranca
        - identificador
        - dataVencimento
        - valor
        - tipoProduto
      properties:
        convenio:
          type: string
          description: identificador do convênio de cobrança
        pagador:
          $ref: '#/components/schemas/PagadorCobrancaDTO'
        salvarPagador:
          type: boolean
        tipoCobranca:
          type: string
          enum:
            - VENDA_PRODUTO
            - PRESTACAO_SERVICO
            - OUTRO
        identificador:
          type: string
          description: identificador da cobrança definido pelo associado (ex. número da NF origem da cobrança)
        dataVencimento:
          type: string
          format: date
        valor:
          type: number
          format: double
        juros:
          type: number
          format: double
        multa:
          type: number
          format: double
        mensagem:
          type: string
        tipoProduto:
          type: string
          description: tipo do produto de cobrança a ser utilizado
          enum:
          - BOLETO
          - ADQUIRENCIA
    ProtocoloDTO:
      type: object
      properties:
        idProtocolo:
          type: integer
        statusProtocolo:
          type: string
        retorno:
          type: string
    PagadorCobrancaDTO:
      type: object
      required:
        - oidPagador
        - nome
        - numeroDocumento
      properties:
        oidPagador:
          type: integer
          description: identificador do pagador cadastrado anteriormente
        nome:
          type: string
          description: nome do pagador (requerido se identificador não informado)
        numeroDocumento:
          type: string
          description: CPF/CNPJ do pagador (requerido se identificador não informado)
    ParametrosPagadorCobrancaDTO:
      type: object
      required:
        - pagador
        - tipoCobrancaPadrao
        - informaIdentificador
        - informaMensagem
        - prazoVencimento
        - jurosPadrao
        - multaPadrao
      properties:
        pagador:
          $ref: '#/components/schemas/PagadorCobrancaDTO'
        tipoCobrancaPadrao:
          type: string
          enum:
            - VENDA_PRODUTO
            - PRESTACAO_SERVICO
            - OUTRO
        informaIdentificador:
          type: boolean
        informaMensagem:
          type: boolean
        prazoVencimento:
          type: integer
        jurosPadrao:
          type: number
          format: double
        multaPadrao:
          type: number
          format: double
    AdesaoProdutoCobrancaDTO:
      type: object
      required:
        - identificador
        - tipoProduto
        - tipoConvenio
        - dataAdesao
        - situacaoConvenio
      properties:
        identificador:
          type: string
          description: identificador do convênio de cobrança (contrato de adesão)
        tipoProduto:
          type: string
          enum:
          - BOLETO
        tipoConvenio:
          type: string
          enum:
          - EMISSAO_OPERACAO
          - OPERACAO
          - CONSULTA
          description: ações admitidas com este convênio no canal
        dataAdesao:
          type: string
          format: date
        situacaoConvenio:
          type: string
          enum:
          - ATIVO
          - PENDENTE
          - INATIVO