penapi: 3.0.1
info:
  title: Plano Service
  description: Microserviço responsável por fornecer as APIs dos Planos.
  termsOfService: 'https://example.com/terms'
  version: V1
servers:
  - url: 'http://52.147.215.127/plano-service'
paths:
  /api/nivel-plano:
    post:
      tags:
        - NivelPlano
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NivelPlanoDTO'
      responses:
        '200':
          description: Success
    get:
      tags:
        - NivelPlano
      parameters:
        - name: tamanhoPagina
          in: query
          schema:
            type: integer
            format: int32
            default: 10
        - name: pagina
          in: query
          schema:
            type: integer
            format: int32
            default: 1
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/NivelPlanoDTO'
  '/api/nivel-plano/{id}':
    put:
      tags:
        - NivelPlano
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NivelPlanoDTO'
      responses:
        '200':
          description: Success
    get:
      tags:
        - NivelPlano
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Success
    delete:
      tags:
        - NivelPlano
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Success
  /api/planos:
    post:
      tags:
        - Plano
      parameters:
        - name: X-Empresa-Id
          in: header
          schema:
            type: string
            default: ''
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PlanoDTO'
      responses:
        '200':
          description: Success
    get:
      tags:
        - Plano
      parameters:
        - name: status
          in: query
          schema:
            $ref: '#/components/schemas/StatusEnum'
        - name: cpfUsuario
          in: query
          schema:
            type: string
            default: ''
        - name: organizacaoId
          in: query
          schema:
            type: integer
            format: int64
            default: 0
        - name: tamanhoPagina
          in: query
          schema:
            type: integer
            format: int32
            default: 10
        - name: pagina
          in: query
          schema:
            type: integer
            format: int32
            default: 1
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/GetPlanoDTO'
  '/api/planos/{id}':
    put:
      tags:
        - Plano
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutPlanoDTO'
      responses:
        '200':
          description: Success
    get:
      tags:
        - Plano
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Success
    delete:
      tags:
        - Plano
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Success
  '/api/planos/ativar/{id}':
    put:
      tags:
        - Plano
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Success
  '/api/planos/{idPlano}/associar/usuario':
    patch:
      tags:
        - Plano
      parameters:
        - name: idPlano
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/UsuarioDTO'
      responses:
        '200':
          description: Success
components:
  schemas:
    NivelPlanoDTO:
      type: object
      properties:
        descricao:
          type: string
          nullable: true
        id:
          type: integer
          format: int64
      additionalProperties: false
    StatusEnum:
      enum:
        - Ativo
        - Inativo
        - Default
      type: string
    PoliticaDTO:
      type: object
      properties:
        descricao:
          type: string
          nullable: true
        valor:
          type: integer
          format: int32
      additionalProperties: false
    CategoriaPlanoEnum:
      enum:
        - Customizado
        - Padrao
      type: string
    ProdutoDTO:
      type: object
      properties:
        descricao:
          type: string
          nullable: true
        nome:
          type: string
          nullable: true
        produtoPayPalId:
          type: string
          nullable: true
        tipo:
          type: string
          nullable: true
      additionalProperties: false
    PrecoEsquemaDTO:
      type: object
      properties:
        versao:
          type: integer
          format: int32
        codigoMoeda:
          type: string
          nullable: true
        valor:
          type: number
          format: double
      additionalProperties: false
    CiclosDTO:
      type: object
      properties:
        tipoAssinatura:
          type: string
          nullable: true
        sequencia:
          type: integer
          format: int32
        precoEsquema:
          $ref: '#/components/schemas/PrecoEsquemaDTO'
        frequencia:
          type: string
          nullable: true
        qtdCiclos:
          type: integer
          format: int32
      additionalProperties: false
    PlanoDTO:
      type: object
      properties:
        nome:
          type: string
          nullable: true
        descricao:
          type: string
          nullable: true
        nivelPlanoId:
          type: integer
          format: int64
        dataInicio:
          type: string
          format: date-time
        dataFim:
          type: string
          format: date-time
        valor:
          type: number
          format: double
        status:
          $ref: '#/components/schemas/StatusEnum'
        politicas:
          type: array
          items:
            $ref: '#/components/schemas/PoliticaDTO'
          nullable: true
        categoriaPlano:
          $ref: '#/components/schemas/CategoriaPlanoEnum'
        produto:
          $ref: '#/components/schemas/ProdutoDTO'
        organizacaoId:
          type: integer
          format: int64
        planoPayPalId:
          type: string
          nullable: true
        taxaConfiguracao:
          type: number
          format: double
        ciclosRecorrencia:
          type: array
          items:
            $ref: '#/components/schemas/CiclosDTO'
          nullable: true
        id:
          type: integer
          format: int64
      additionalProperties: false
    GetPlanoDTO:
      type: object
      properties:
        nome:
          type: string
          nullable: true
        descricao:
          type: string
          nullable: true
        nivelPlano:
          $ref: '#/components/schemas/NivelPlanoDTO'
        dataInicio:
          type: string
          format: date-time
        dataFim:
          type: string
          format: date-time
        valor:
          type: number
          format: double
        status:
          $ref: '#/components/schemas/StatusEnum'
        politicas:
          type: array
          items:
            $ref: '#/components/schemas/PoliticaDTO'
          nullable: true
        categoriaPlano:
          $ref: '#/components/schemas/CategoriaPlanoEnum'
        produto:
          $ref: '#/components/schemas/ProdutoDTO'
        organizacaoId:
          type: integer
          format: int64
        planoPayPalId:
          type: string
          nullable: true
        taxaConfiguracao:
          type: number
          format: double
        ciclosRecorrencia:
          type: array
          items:
            $ref: '#/components/schemas/CiclosDTO'
          nullable: true
        id:
          type: integer
          format: int64
      additionalProperties: false
    PutPlanoDTO:
      type: object
      properties:
        descricao:
          type: string
          nullable: true
        dataFim:
          type: string
          format: date-time
      additionalProperties: false
    UsuarioDTO:
      type: object
      properties:
        nome:
          type: string
          nullable: true
        cpf:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        id:
          type: integer
          format: int64
      additionalProperties: false