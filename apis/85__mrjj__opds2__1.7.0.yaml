openapi: 3.0.0
info:
  version: 1.7.0
  title: NEB - Catalog Service
  description: Russian National Instance Library - Catalog service

security:
  - BasicAuth: []

paths:
  '/':
    post:
      operationId: 'importData'
      description: 'Add or update information about electronic Objects (Files) or Physical Items'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                url:
                  type: string
                  format: uri
                source:
                  type: string
                  default: 'RuMoRGB'
                marc:
                  type: "string"
                  enum:
                    - "rusmarc"
                    - "marc21"
                limit:
                  type: "integer"
              required:
                - "url"
      responses:
        '200':
          description: 'Successfully added records about electronic Objects (Files) or Physical Items'
        '400':
          $ref: '#/components/responses/400Error'
    get:
      parameters:
        - $ref: '#/components/parameters/OutputFormat'
        - $ref: '#/components/parameters/Format'
        - $ref: '#/components/parameters/TsMs'
      operationId: 'getOpds2Root'
      description: Get OPDS 2.0 catalog root
      responses:
        '200':
          $ref: '#/components/responses/200Opds2Root'
        '400':
          $ref: '#/components/responses/400Error'
#  /favicon.ico:
#    get:
#      operationId: 'getFavicon'
#      responses:
#        '404':
#          $ref: '#/components/responses/404Error'

  /{kind}/{source}/{key}/:
    get:
      parameters:
        - $ref: '#/components/parameters/Kind'
        - $ref: '#/components/parameters/Source'
        - $ref: '#/components/parameters/Key'
        - $ref: '#/components/parameters/OutputFormat'
        - $ref: '#/components/parameters/Format'
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
        - $ref: '#/components/parameters/TsMs'
      operationId: 'getOpds2EntityByKindSourceKey'
      description: "Get OPDS 2.0 catalog
                    Actually all this path = key, but OAI3/Swagger can't handle path reminder or path regexps to
                    process tail like :`/electronic/a/b/c4/LC` as a single `/a/b/c4/LC` reminder."
      responses:
        '200':
          $ref: '#/components/responses/200Opds2Publication'
        '400':
          $ref: '#/components/responses/400Error'

  /{kind}/{source}/:
    get:
      description: "Get OPDS 2.0 record.
                    Actually all this path = key, but OAI3/Swagger can't handle path reminder or path regexps to
                    process tail like :`/electronic/a/b/c4/LC` as a single `/a/b/c4/LC` reminder.
                    Metadata from physical instance/edition will be included to the response if there are any actual records in catalog."
      operationId: 'getOpds2EntityByKindSource'
      parameters:
#        - $ref: '#/components/parameters/Key'
        - $ref: '#/components/parameters/Kind'
        - $ref: '#/components/parameters/Source'
        - $ref: '#/components/parameters/OutputFormat'
        - $ref: '#/components/parameters/Format'
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
        - $ref: '#/components/parameters/TsMs'
      responses:
        '200':
          $ref: '#/components/responses/200Opds2Group'
        '400':
          $ref: '#/components/responses/400Error'

  /{kind}/:
    get:
      parameters:
        - $ref: '#/components/parameters/Kind'
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
        - $ref: '#/components/parameters/TsMs'
      operationId: 'getOpds2EntityByKind'
      description: "Get OPDS 2.0 Entity facet"
      responses:
        '200':
          $ref: '#/components/responses/200Opds2Group'
        '400':
          $ref: '#/components/responses/400Error'
components:
  securitySchemes:
    BasicAuth:
      type: http
      scheme: basic

  schemas:
    mapping-error:
      title: "Information about error during metadata fields mapping (error localisation is related to [JSONata](http://jsonata.org) expression."
      type: "object"
      properties:
        error:
          type: "object"
          properties:
            message:
              type: "string"
            position:
              type: "integer"
            line:
              type: "integer"
            column:
              type: "integer"
            stack:
              type: "string"
            input:
              type: "object"
          required:
            - "message"
      required:
        - "error"
    jsonLdContext:
      type: "object"
      additionalProperties: true
      properties:
        "@context":
          description: Used to define the short-hand names that are used throughout
            a JSON-LD document.
          anyOf:
            - type: object
            - type: string
            - type: array
    jsonLdGraph:
      type: "object"
      additionalProperties: true
      properties:
        "@graph":
          description: Used to express a graph.
          anyOf:
            - type: array
            - type: object
    jsonLdCommon:
      additionalProperties: true
      properties:
        "@id":
          description: Used to uniquely identify things that are being described in
            the document with IRIs or blank node identifiers.
          type: string
          format: uri
        "@value":
          description: Used to specify the data that is associated with a particular
            property in the graph.
          anyOf:
            - type: string
            - type: boolean
            - type: number
        "@language":
          description: Used to specify the language for a particular string value or
            the default language of a JSON-LD document.
          type: string
        "@type":
          description: Used to set the data type of a node or typed value.
          anyOf:
            - type: string
            - type: array
        "@container":
          description: Used to set the default container type for a term.
          type: string
          enum:
            - "@language"
            - "@list"
            - "@index"
            - "@set"
        "@list":
          description: Used to express an ordered set of data.
        "@set":
          description: Used to express an unordered set of data and to ensure that values
            are always represented as arrays.
        "@reverse":
          description: Used to express reverse properties.
          anyOf:
            - type: string
            - type: object
          additionalProperties: true
        "@base":
          description: Used to set the base IRI against which relative IRIs are resolved
          type: string
          format: uri
        "@vocab":
          description: Used to expand properties and values in @type with a common prefix
            IRI
          type: string
          format: uri

    jsonLd:
      allOf:
        - "$ref": "#/components/schemas/jsonLdContext"
        - "$ref": "#/components/schemas/jsonLdGraph"
        - "$ref": "#/components/schemas/jsonLdCommon"
      anyOf:
        - type: object
          additionalProperties: true
        - type: array

    readium-metadata:
      title: "Publication Metadata based on Readium publication manifest and some extra fields"
      type: "object"
      properties:
        identifier:
          description: "Идентификатор вида: '(ОРГАНИЗАЦИЯ)ИДЕНТИФИКАТОР'"
          type: "string"
          format: "uri"
        modified:
          title: "ISO Дата последнего изменения записи"
          type: "string"
          format: "date-time"
        type:
          title: "Тип медиа (IANA)"
          type: "string"
          format: "uri"
        href:
          $ref: "#/components/schemas/link"
        title:
          title: "Название"
          oneOf:
            - type: "string"
            - description: "The language in a language map must be a valid BCP 47 tag."
              type: "object"
              properties:
                en:
                  type: "string"
                en-EN:
                  type: "string"
                ru:
                  type: "string"
                ru-RU:
                  type: "string"
              additionalProperties: true
              minProperties: 1
        sortAs:
          title: "Нормализованное название"
          type: "string"
        subtitle:
          title: "Примечание к названию"
          type: "string"
        alternateName:
          title: "Альтернативная форма названия"
          anyOf:
            - type: "string"
            - type: "array"
              items:
                type: "string"
        nameOfWorkPart:
          title: "Сведения о томе, текст"
          type: "string"
          properties:
            numberOfWorkPart:
              title: "Номер тома, части, выпуска числм или римскими цифрами"
              anyOf:
                - type: "integer"
                - type: "string"
        belongsTo:
          title: "Принадлежит к сборнику/серии"
          type: "object"
          properties:
            collection:
              "$ref": "#/components/schemas/contributor"
            series:
              "$ref": "#/components/schemas/contributor"
        "marc:type":
          title: "Тип издания/Категория информации (Код MARC 21) https://www.loc.gov/marc/bibliographic/bdleader.html"
          type: "string"
          enum:
            - "a"
            - "c"
            - "d"
            - "e"
            - "f"
            - "g"
            - "i"
            - "j"
            - "k"
            - "o"
            - "p"
            - "r"
            - "t"
        content:
          title: "Тип издания/Категория информации (Текстовая расшифровка кодф MARC 21)"
          oneOf:
            - type: "string"
            - type: "object"
              properties:
                ru:
                  type: "string"
                  enum:
                    - "Афиши и листовки"
                    - "Изоматериал"
                    - "Изобразительные издания"
                    - "Карты"
                    - "Книги"
                    - "Ноты"
                    - "Периодика"
                    - "Рукописи"
                    - "Прочее"
                en:
                  type: "string"
                  enum:
                    - "Text"
                    - "NotatedMusic"
                    - "Cartography"
                    - "MovingImage"
                    - "Audio"
                    - "Music"
                    - "StillImage"
                    - "MixedMaterial"
                    - "Object"
                    - "book/album"
                    - "book/dissert"
                    - "book/graphic"
                    - "book/manuscript"
                    - "book/multivol"
                    - "book/notatedmusic"
                    - "book/outline"
                    - "book/rare"
                    - "book/science"
                    - "book/symposium"
                    - "book/tech"
                    - "book/text"
                    - "book/other"
                    - "cartographic/atlas"
                    - "cartographic/map"
                    - "cartographic/plan"
                    - "cartographic/text"
                    - "leaflet/collection"
                    - "leaflet/engrave"
                    - "leaflet/leaflet"
                    - "leaflet/manuscript"
                    - "leaflet/note"
                    - "leaflet/photo"
                    - "leaflet/picture"
                    - "leaflet/placard"
                    - "leaflet/plate"
                    - "leaflet/postcard"
                    - "other/audio"
                    - "other/book"
                    - "other/exhibitions"
                    - "other/images"
                    - "other/other"
                    - "other/text"
                    - "periodic/article"
                    - "periodic/magazine"
                    - "periodic/newspaper"
        language:
          title: "Язык издания"
          anyOf:
            - type: "string"
            - type: "object"
              properties:
                code:
                  type: "string"
                note:
                  anyOf:
                    - type: "string"
                    - type: "array"
                      items:
                        type: "string"
        numberOfPages:
          title: "Количество страниц/Объем издания"
          type: "integer"
          minimum: 1
        materialExtent:
          title: "Описание объема содержания текстом"
          type: "string"
        dimensions:
          title: "Размер, вес, прочие количественные метрики"
          type: "string"
        author:
          $ref: "#/components/schemas/contributor"
        contributor:
          title: "Авторские права: люда и организации причастные к донесению произведение до потребителя"
          type: array
          items:
            $ref: "#/components/schemas/contributor"
        publisher:
          title: "Сведения об издании"
          type: "object"
          properties:
            name:
              title: "Издательство"
              type: "string"
            location:
              title: "Место издания (Город, Страна и т.п.)"
              type: "string"
        published:
          title: "Дата выпуска электронной публикации"
          type: "string"
          anyOf:
            - format: "date"
            - format: "date-time"
        issued:
          title: "Дата или год публикации работы (не нормализованные)"
          description: "Не нормализованные"
          type: "string"
          anyOf:
            - format: "date"
            - format: "date-time"
            - format: "integer"
            - format: "string"
        "dc:issued":
          title: "Нормализованные дата или год публикации работы (Нормализованные)"
          description: "Нормализованные до вида 1569-03-17 (str) или 1569 (int), в случае диапазона берется первое значение"
          type: "string"
          anyOf:
            - format: "date"
            - format: "integer"
        "bf:illustrativeContent":
          title: "Сведения об иллюстрациях"
          type: "string"
        "bf:scale":
          title: "Сведения о масштабе и/или способе картографической проекции, построении координат"
          type: "string"
        subject:
          title: "Примечания о содержании"
          type: "object"
          properties:
            place:
              title: "Географические места"
              anyOf:
                - type: "string"
                - type: "array"
                  items:
                    type: "string"
            topic:
              title: "Категория, топик"
              anyOf:
                - type: "string"
                - type: "array"
                  items:
                    type: "string"
            genreForm:
              title: "Жанр"
              anyOf:
                - type: "string"
                - type: "array"
                  items:
                    type: "string"
            work:
              title: "Произведение"
              anyOf:
                - type: "string"
                - type: "array"
                  items:
                    type: "string"
            occupation:
              title: "Профессии/занятия"
              anyOf:
                - type: "string"
                - type: "array"
                  items:
                    type: "string"
            summary:
              title: "Общие примечания"
              anyOf:
                - type: "string"
                - type: "array"
                  items:
                    type: "string"
        toc:
          title: "Таблица содержания"
          anyOf:
            - type: "array"
              uniqueItems: true
              items:
                anyOf:
                  - type: "string"
                  - type: "object"
                    properties:
                      title:
                        type: "string"
                      location:
                        oneOf:
                          - type: "string"
                          - $ref: "#/components/schemas/link"
                  - $ref: "#/components/schemas/link"
        citation:
          title: "Внещнике ссылки на эту публикацию"
          type: "array"
          items:
            type: "object"
            properties:
              name:
                title: "Название ссылающейся работы"
                type: "string"
              coverage:
                title: "Временная и/или географическая привязка"
                type: "string"
              locationWithinSource:
                title: "Положение ссылки в ссылающейся работе"
                type: "string"
              uri:
                title: "URI"
                type: "string"
                format: "uri"
              issn:
                title: "ISSN"
                type: "string"
        description:
          title: "Описание"
          anyOf:
            - type: "string"
            - type: "array"
              items:
                type: "string"
        materialDescription:
          title: "Материальное описание"
          anyOf:
            - type: "string"
            - type: "array"
              items:
                type: "string"
        responsibilityNotes:
          title: "Авторские права, сведения об ответственности"
          anyOf:
            - type: "string"
            - type: "array"
              items:
                type: "string"
        restrictionAndAccessNote:
          title: "Ограничения и сведения о доступе"
          anyOf:
            - type: "string"
            - type: "array"
              items:
                type: "string"
        Group:
          title: "Принадлежит к коллекциям"
          type: "object"
          properties:
            organization:
              title: "Ссылка на словарь/код или сайт организции"
              type: "string"
            name:
              title: "Название/обозначение коллекции"
              type: "string"
              format: "uri"
            barcode:
              title: "Шифр хранения"
              type: "string"
            shelfMark:
              title: "Место хранения"
              type: "string"

        # Не используемые каталогом НЭБ поля
        readingProgression:
          type: "string"
          enum:
            - "rtl"
            - "ltr"
            - "ttb"
            - "btt"
            - "auto"
          default: "auto"
        duration:
          type: "number"
          minimum: 1
        translator:
          $ref: "#/components/schemas/contributor"
        editor:
          $ref: "#/components/schemas/contributor"
        artist:
          $ref: "#/components/schemas/contributor"
        illustrator:
          $ref: "#/components/schemas/contributor"
        letterer:
          $ref: "#/components/schemas/contributor"
        penciler:
          $ref: "#/components/schemas/contributor"
        colorist:
          $ref: "#/components/schemas/contributor"
        inker:
          $ref: "#/components/schemas/contributor"
        narrator:
          $ref: "#/components/schemas/contributor"
        imprint:
          $ref: "#/components/schemas/contributor"
      required:
        - "identifier"
        - "modified"
        - "title"
    contributor-metadata:
      type: "object"
      title: "Contributor detailed information"
      properties:
        name:
          title: "Имя"
          type: "string"
        relCode:
          title: "[Relator code](http://memory.loc.gov/diglib/loc.terms/relators/)"
          type: "string"
        relTerm:
          title: "Отношение к работе"
          anyOf:
            - type: "string"
            - type: "array"
              items:
                type: "string"
        "identifier":
          "type": "string"
          "format": "uri"
        "sortAs":
          "type": "string"
        "role":
          anyOf:
            - type: "string"
            - type: "array"
          "items":
            "type": "string"
        "position":
          "type": "number"
        birthDate:
          title: "Дата рождения"
          anyOf:
            - type: "string"
            - type: "integer"
        deathDate:
          title: "Дата смерти"
          anyOf:
            - type: "string"
            - type: "integer"
    contributor:
      title: "Contributor"
      anyOf:
        - $ref: "#/components/schemas/contributor-metadata"
        - type: "array"
          items:
            anyOf:
              - $ref: "#/components/schemas/contributor-metadata"
              - type: "string"
        - type: "string"

    publication:
      title: "OPDS Publication"
      type: "object"
      properties:
        metadata:
          anyOf:
            - $ref: "#/components/schemas/readium-metadata"
            - $ref: "#/components/schemas/jsonLd"
            - $ref: "#/components/schemas/mapping-error"
        links:
          type: "array"
          items:
            properties:
              rel:
                anyOf:
                  - type: "string"
                    enum:
                      - "preview"
                      - "http://opds-spec.org/acquisition"
                      - "http://opds-spec.org/acquisition/buy"
                      - "http://opds-spec.org/acquisition/open-access"
                      - "http://opds-spec.org/acquisition/borrow"
                      - "http://opds-spec.org/acquisition/sample"
                      - "http://opds-spec.org/acquisition/subscribe"
                  - type: "array"
                    items:
                      type: "string"
                      enum:
                        - "preview"
                        - "http://opds-spec.org/acquisition"
                        - "http://opds-spec.org/acquisition/buy"
                        - "http://opds-spec.org/acquisition/open-access"
                        - "http://opds-spec.org/acquisition/borrow"
                        - "http://opds-spec.org/acquisition/sample"
                        - "http://opds-spec.org/acquisition/subscribe"
                  - type: "string"
        images:
          description: "Images are meant to be displayed to the user when browsing publications"
          type: "array"
          items:
            $ref: "#/components/schemas/image-link"

      required:
        - "metadata"
        - "links"

    feed-metadata:
      title: "OPDS Metadata"
      type: "object"
      properties:
        identifier:
          type: "string"
          format: "uri"
        type:
          type: "string"
          format: "uri"
        title:
          anyOf:
            - type: "string"
            - type: "array"
            - type: "object"
        subtitle:
          anyOf:
            - type: "string"
            - type: "array"
            - type: "object"
        modified:
          type: "string"
          format: "date-time"
        description:
          type: "string"
        itemsPerPage:
          type: "integer"
          minimum: 1
        currentPage:
          type: "integer"
          minimum: 1
        numberOfItems:
          type: "integer"
          minimum: 0
      required:
        - "title"
    link:
      title: "Link"
      type: "object"
      properties:
        href:
          description: "URI or URI template of the linked resource"
          type: "string"
        type:
          description: "MIME type of the linked resource"
          type: "string"
        templated:
          description: "Indicates that a URI template is used in href"
          type: "boolean"
        title:
          description: "Title of the linked resource"
          type: "string"
        rel:
          description: "Relation between the linked resource and its containing Group"
          anyOf:
            - type: "string"
            - type: "array"
              items:
                type: "string"
        properties:
          description: "Properties associated to the linked resource"
          type: object
        height:
          description: "Height of the linked resource in pixels"
          type: "integer"
          minimum: 1
        width:
          description: "Width of the linked resource in pixels"
          type: "integer"
          minimum: 1
        bitrate:
          description: "Bitrate of the linked resource in kbps"
          type: "number"
          minimum: 1
        duration:
          description: "Length of the linked resource in seconds"
          type: "number"
          minimum: 1
        language:
          description: "Expected language of the linked resource"
          anyOf:
            - type: "array"
              items:
                type: "string"
            - type: "string"
            - type: "object"
              properties:
                code:
                  type: "string"
                note:
                  oneOf:
                    - type: "string"
                    - type: "array"
                      items:
                        type: "string"
              required:
                - "code"
        alternate:
          description: "Alternate resources for the linked resource"
          type: "array"
          items:
            type: object
            title: "#/components/schemas/link"
        children:
          description: "Resources that are children of the linked resource, in the context of a given Group role"
          type: "array"
          items:
            type: object
            title: "#/components/schemas/link"
      required:
        - "href"

    image-link:
      title: "Link on Image"
      type: "object"
      description: "Image reference"
      properties:
        href:
          description: "URI or URI template of the linked resource"
          type: "string"
        type:
          description: "MIME type of the linked image resource"
          type: "string"
          enum:
            - "image/jpeg"
            - "image/png"
            - "image/gif"
        templated:
          description: "Indicates that a URI template is used in href"
          type: "boolean"
        title:
          description: "Title of the linked resource"
          type: "string"
        rel:
          description: "Relation between the linked resource and its containing Group"
          anyOf:
            - type: "string"
            - type: "array"
              items:
                type: "string"
        properties:
          description: "Properties associated to the linked resource"
          type: object
        height:
          description: "Height of the linked resource in pixels"
          type: "integer"
          minimum: 1
        width:
          description: "Width of the linked resource in pixels"
          type: "integer"
          minimum: 1
        bitrate:
          description: "Bitrate of the linked resource in kbps"
          type: "number"
          minimum: 1
        duration:
          description: "Length of the linked resource in seconds"
          type: "number"
          minimum: 1
        language:
          description: "Expected language of the linked resource"
          anyOf:
            - type: "array"
            - type: "string"
          items:
            type: "string"
        alternate:
          description: "Alternate resources for the linked resource"
          type: "array"
          items:
            type: object
        children:
          description: "Resources that are children of the linked resource, in the context of a given Group role"
          type: "array"
          items:
            type: object
      required:
        - "href"

    feed:
      title: "OPDS Feed"
      oneOf:
        - type: string
        - type: object
          properties:
            metadata:
              # description: "Contains feed-level metadata such as title or number of items"
              $ref: "#/components/schemas/feed-metadata"
            links:
              description: "Feed-level links such as search or pagination"
              type: "array"
              items:
                type: object
                properties:
                  rel:
                    anyOf:
                      - enum:
                          - "self"
                      - type: "array"
                      - type: "string"
                required:
                  - "rel"
            publications:
              description: "A list of publications that can be acquired"
              type: "array"
              items:
                $ref: "#/components/schemas/publication"
              uniqueItems: true
            navigation:
              type: "array"
              items:
                description: "Navigation for the catalog using links. Link Object in a navigation Group must contain a title"
                type: object
                properties:
                  title:
                    type: object
            groups:
              description: "Groups provide a curated experience, grouping publications or navigation links together"
              type: "array"
              items:
                type: object
                properties:
                  metadata:
                    type: object
                    description: "feed-metadata"
                  links:
                    type: "array"
                    items:
                      type: object
                    uniqueItems: true
                  publications:
                    type: "array"
                    items:
                      $ref: "#/components/schemas/publication"
                    uniqueItems: true
                  navigation:
                    type: "array"
                    items:
                      $ref: "#/components/schemas/link"
                    uniqueItems: true
            facets:
              description: "Фасеты представляют переупорядоченное или фильтрованное подмножество общего списка публикаций"
              type: "array"
              items:
                type: "object"
                properties:
                  metadata:
                    "$ref": "#/components/schemas/feed-metadata"
                  links:
                    type: "array"
                    items:
                      "$ref": "#/components/schemas/link"
                    uniqueItems: true
              uniqueItems: true
          required:
            - "metadata"
            - "links"
          anyOf:
            - required:
                - "publications"
            - required:
                - "navigation"
            - required:
                - "groups"

  parameters:
    Source:
      name: source
      in: path
      required: true
      description: "Entity source"
      schema:
        type: string
    Kind:
      name: kind
      in: path
      required: true
      description: "Entity kind"
      schema:
        pattern: '^[a-zA-Z0-9_\-]+$'
        type: string
    Key:
      name: key
      in: path
      required: true
      description: "Entity key"
      schema:
        type: string
    Page:
      name: page
      required: false
      in: query
      description: "Group items page"
      schema:
        type: integer
    PageSize:
      name: page_size
      required: false
      in: query
      description: "Items per page"
      schema:
        type: integer
    OutputFormat:
      name: output
      required: false
      in: query
      description: "Metadata format (default: opds2)"
      schema:
        type: string
        enum:
          - "opds2"
          - "bibframe2"
          - "marc21"
          - "rusmarc"
          - "raw"
    Format:
      name: format
      required: false
      in: query
      description: "Data format (default: json)"
      schema:
        type: string
        enum:
          - "json"
          - "xml"
          - "txt"
          - "csv"
          - "tsv"
          - "turtle"
    TsMs:
      name: tsms
      description: "OPDS feed state at timestamp (Linux epoch) defined in milliseconds"
      required: false
      in: query
      schema:
        type: integer

  responses:
    400Error:
      description: Invalid request
      content:
        application/json:
          schema:
            type: array
            items:
              type: object

    404Error:
      description: Not Found
      content:
        application/json:
          schema:
            type: array
            items:
              type: object

    200Opds2Root:
      description: Successfully retrievid root of OPDS 2.0 catalog
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/feed'
        text/csv:
          schema:
            $ref: '#/components/schemas/feed'
        text/tab-separated-values:
          schema:
            $ref: '#/components/schemas/feed'

    200Opds2Group:
      description: Successfully retrievid OPDS 2.0 group
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/feed'
        text/csv:
          schema:
            $ref: '#/components/schemas/feed'
        text/tab-separated-values:
          schema:
            $ref: '#/components/schemas/feed'

    200Opds2Publication:
      description: Successfully retrievid root of OPDS 2.0 catalog
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/publication'

  headers:
    X-RateLimit-Limit:
      description: Request limit per hour
      schema:
        type: integer
      example: 100
    X-RateLimit-Remaining:
      description: Remaining requests for the hour
      schema:
        type: integer
      example: 94