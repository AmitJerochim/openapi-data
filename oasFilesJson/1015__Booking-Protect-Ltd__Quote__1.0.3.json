{"openapi":"3.0.0","info":{"description":"This is the first step to integrate with our platform. This API allows you to tell us the products your customer has in their basket and in response, we will return an offering for you to present to the customer.","version":"1.0.3","title":"Quote API","contact":{"email":"technology@bookingprotect.com"}},"servers":[{"url":"https://quote.insure-hub.net","description":"Production"},{"url":"https://quote.uat.insure-hub.net","description":"UAT"}],"tags":[{"name":"quote","description":"request a quote"}],"paths":{"/quote":{"post":{"tags":["quote"],"summary":"request an offering","operationId":"requestQuote","description":"request a offering for the products in your customer's basket","parameters":[{"in":"header","name":"X-InsuranceHub-VendorId","schema":{"type":"string","format":"uuid"},"required":true,"example":"0aa8b695-67dd-4629-9f1e-233d0445d357","description":"Your unique vendor identifier - as displayed in your Account page."},{"in":"header","name":"X-InsuranceHub-AuthToken","schema":{"type":"string"},"required":true,"description":"The authentication token value is generated by concatenating your vendor identifier (for example 59b9f7da07bde3119956002186eb0899) with current ***UTC date*** in the format ddMMyyyy (for example, the 5th October 2018 would be 05102018).\n\nAn HMAC digest is then generated from the resulting string using the SHA1 hash function and your API Key as the HMAC key. Finally, this value is then base64 encoded.\n\nRequests with invalid or missing authentication headers will receive a status 401 Unauthorized\n"}],"responses":{"200":{"description":"OK - Offering generated and returned in body","content":{"application/json":{"schema":{"$ref":"#/components/schemas/offering"}}}},"400":{"description":"Bad Request - The data in the request is either invalid or incomplete","content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - You can not read, create or update data for the specified vendor"},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"}}}}},"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/offeringRequest"}}},"description":"request with products to cover"}}}},"components":{"schemas":{"offeringRequest":{"type":"object","required":["vendorId","vendorRequestReference","products","premiumAsSummary"],"properties":{"vendorId":{"type":"string","format":"uuid","example":"0aa8b695-67dd-4629-9f1e-233d0445d357","description":"Your unique vendor identifier"},"vendorRequestReference":{"type":"string","example":"YourRequestRef123","nullable":true,"description":"A unique reference created by the Vendor for the request that can be used for diagnostic/trace purposes. This field is optional."},"products":{"type":"array","items":{"$ref":"#/components/schemas/product"},"description":"Array of Products that describes the products the customer has to cover in their basket"},"premiumAsSummary":{"type":"boolean","description":"Typically set to true. When true, the response will contain a single ProductOffering for each categoryCode, currencyCode, languageCode combination in the products array."}}},"product":{"required":["categoryCode","price","completionDate"],"properties":{"categoryCode":{"type":"string","example":"TKT","minLength":3,"maxLength":10,"description":"The code defined in your matrix for your specified product. Default is TKT."},"languageCode":{"type":"string","minLength":3,"maxLength":12,"example":"eng","description":"The [ISO 639-3](https://en.wikipedia.org/wiki/ISO_639-3) language code of the request. \n\nThis field is optional. If it is not supplied the default defined for your account will be used.\n\nFor languages with different written and local variants this can be further extended. Language code can be suffixed with [ISO 1524](https://en.wikipedia.org/wiki/ISO_15924) script type and then with [ISO-3166-1](https://en.wikipedia.org/wiki/ISO_3166) geographic code (alpha and numeric codes are supported) using the following format\n\n_&lt;language code&gt;-&lt;script type&gt;-&lt;geographic code&gt;_\n\nScript type and geographic code are not required. Variants for region only or script type only are supported, as are macrolanguage codes such as _zho_.\n\nExamples\n\n* _cmn-hans-tw_ - Mandarin Simplified Taiwan\n* _cmn-hanh-hk_ - Mandarin Traditional Hong Kong\n* _aze-arab-364_ - Azerbaijani Arabic Iran\n* _zho-hans_ - \"Chinese\" Simplified\n* _eng-gb_ - English UK\n* _eng-us_ - English USA\n"},"currencyCode":{"type":"string","minLength":3,"maxLength":3,"example":"USD","description":"The [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217) currency code as per the Product in the request. This field is optional. If it is not supplied the default defined for your account will be used."},"price":{"type":"number","format":"float","example":99.99,"description":"The cost of your product to the customer."},"completionDate":{"type":"string","format":"date-time","description":"A UTC date in the [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format which defines the end of the booking/event. For example, the last day of a 3 day festival or the specific performance date.\n\nThe date cannot be in the past.\n"}}},"offering":{"properties":{"id":{"type":"string","format":"uuid","example":"fa4ecb5d-f0a6-45e6-89ef-d425d6b064f6","description":"Unique identifier"},"productOfferings":{"type":"array","items":{"$ref":"#/components/schemas/productOffering"},"description":"An array containing the ProductOfferings for the individual Products in the request. The order of items will match that of the request.\n\nNote - if premiumAsSummary is set to true, this array will only contain 1 item per categoryCode, currencyCode, languageCode combination.\n"}}},"productOffering":{"properties":{"id":{"type":"string","format":"uuid","example":"fa4ecb5d-f0a6-45e6-89ef-d425d6b064f6","description":"Unique identifier"},"categoryCode":{"type":"string","example":"TKT","minLength":3,"maxLength":10,"description":"The product category"},"currencyCode":{"type":"string","minLength":3,"maxLength":12,"example":"eng","description":"The currency code as requested in the Product of the OfferingRequest."},"premium":{"type":"number","format":"float","example":9.99,"description":"The premium (cost to the customer) to protect the item. To amount be collected by you as part of the checkout process."},"wording":{"$ref":"#/components/schemas/productOfferingWording"}}},"productOfferingWording":{"description":"Text and other resources used to aid the display of the offering to the customer.","properties":{"categoryCode":{"type":"string","example":"TKT","minLength":3,"maxLength":10,"description":"The product category"},"description":{"type":"string","example":"Ticket Protection","description":"Product description"},"languageCode":{"type":"string","minLength":3,"maxLength":12,"example":"eng","description":"The language code as requested in the Product of the OfferingRequest."},"salesProcessCode":{"type":"string","minLength":2,"maxLength":2,"enum":["OO","OI","IC"],"example":"OI","description":"For most standard integrations this field can be ignored. For those vendors looking to drive multivariate testing it can define how the protection product should be presented to the customer.\n\nOO Opt Out - a “pre-ticked” checkbox which the customer must de-select if they do not require protection.\nOI Opt In - a “un-ticked” checkbox which the customer must select if they require protection.\nIC Informed Choice - two radio buttons presenting Yes & No. The customer must select either option to determine their protection requirement.\n\nCodes can be customised and we will work with you to understand your needs. Please [contact us](mailto:technology@bookingprotect.com?subject=Enquiry%20-%20Multivariate%20testing) if you would like to discuss this in more detail.\n"},"salesProcessMessage":{"type":"string","example":"Check this box to protect your purchase","nullable":true,"description":"A message to display alongside the checkbox. For most standard integrations this field can be ignored."},"salesMessage":{"type":"string","example":"<div>Refund protection is available at a cost of $5.99. We strongly recommend that you include this option. Your order is non-refundable and this will protect you against cancellation resulting from accidents and unexpected illness.</div>","description":"The main sales message to be displayed for the protection. The content is usually HTML (default CSS uses [Twitter Bootstrap](https://getbootstrap.com/docs/3.3/) classes).\n\nYou do not have to use this field however, if you do, it allows us to monitor your sales conversion and make optimisations to improve this - No changes would be made without prior consultation with you. It also allows us to manage any regulatory changes for you with respect to the information displayed to the customer.\n\nThis field can be customised to suit your requirements. Please [contact us](mailto:technology@bookingprotect.com?subject=Enquiry%20-%20New%20Custom%20Sales%20Message) if you would like to alter the default response or if you do not intend to use our text so that we can remove it from the response payload.\n"},"advertisement":{"type":"string","nullable":true,"example":"<div>You could protect your purchase with Booking Protect - Find out more.</div>","description":"An additional message to display in an advertising space. This may be null."},"advertisementUrl":{"type":"string","format":"uri","example":"https://content.bookingprotect.com/advert-1","nullable":true,"description":"A link to an additional advertisement resource. This may be null."},"logoUrl":{"type":"string","format":"uri","example":"https://cdn.bookingprotect.com/bplogo.png","description":"A link to our logo to be displayed to the customer and included in any correspondence."},"termsAndConditions":{"type":"string","format":"uri","example":"https://documents.bookingprotect.com/marketing/sample-terms/terms-and-conditions-eng.pdf","description":"A link to the full terms and conditions of the protection. This value must not be cached and must be made available to the customer at point of sale."}}},"error":{"properties":{"message":{"type":"string","example":"Invalid Request","description":"Short description of the error."},"validationMessages":{"type":"array","items":{"type":"string","example":"Product missing completionDate"},"description":"Array of validation messages."}}}}}}