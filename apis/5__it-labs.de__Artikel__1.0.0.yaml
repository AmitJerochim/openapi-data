penapi: 3.0.0
# Added by API Auto Mocking Plugin
servers:
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/it-labs.de/Artikel/1.0.0
info:
  description: Synchronisation der Artikel mit Kumavision
  version: "1.0.0"
  title: Artikel - Warenwirtschaft (Basis)
paths:
  /article:
    post:
      summary: neuen Artikel in Alberta anlegen
      operationId: addArticle
      description: Legt einen neuen Artikel in Alberta an
      parameters: 
          - name: alberta-api-key
            in: header
            required: true
            schema:
              type: string
          - name: tenant
            in: header
            required: true
            schema:
              type: string
      responses:
        '201':
          description: Created - Artikel wurde angelegt. Das Artikel-Mapping wird zurückgegeben.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleMapping'
        '401':
          description: Unauthorized -> keine Berechtigung für Operation
        '400':
          description: Bad Request -> Syntaxfehler im Request
        '405':
          description: Validierung fehlgeschlagen -> fehlende Pflichtfelder
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Article'
        description: article to add
    put:
      summary: Artikel in Alberta ändern
      operationId: updateArticle
      description: ändert einen Artikel in Alberta
      parameters: 
          - name: alberta-api-key
            in: header
            required: true
            schema:
              type: string
          - name: customerNumber
            in: path
            required: true
            schema:
              type: string
      responses:
        '200':
          description: OK - Artikel wurde geändert. Das Artikel-Mapping wird zurückgegeben.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArticleMapping'
        '401':
          description: Unauthorized -> keine Berechtigung für Operation
        '400':
          description: Bad Request -> Syntaxfehler im Request
        '405':
          description: Validierung fehlgeschlagen -> Dublettenprüfung, fehlende Pflichtfelder
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Article'
        description: article to update
components:
  schemas:
    Article:
      type: object
      required:
        - customerNumber
        - name
        - packagingUnits
      properties:
        customerNumber:
          type: string
          example: "17373"
          description: Eindeutige Nummer aus der Warenwirtschaft
        name:
          type: string
          example: "BLUE LINE Ultra Innenkan Gr9"
          description: Name des Artikels
        description:
          type: string
          example: "Innenkan mit Fen"
          description: Beschreibung des Artikels
        additionalDescription:
          type: string
          example: "Niederprofilansatz, gefenstert"
          description: Zusatzbeschreibung des Artikels
        manufacturer:
          type: string
          example: "Smiths Medical Deutschland GmbH"
          description: Name des Herstellers
        manufacturerNumber:
          type: string
          example: "100/851/090"
          description: Herstellernummer des Artikels
        therapyIds:
          type: array
          items:
            type: string
          example: [4]
          description: Auflistung der Therapien, in denen der Artikel verwendet wird (0= Unbekannt, 1 = Parenterale Ernährung, 2 = Enterale Ernährung, 3 = Stoma, 4 = Tracheostoma, 5 = Inkontinenz ableitend, 6 = Wundversorgung, 7 = IV-Therapien, 8 = Beatmung, 9 = Diabetes, 10 = Pflegehilfsmittel)
        billableTherapies:
          type: array
          items:
            type: string
          example: [4]
          description: Auflistung der abrechenbaren Therapien für den Artikel (siehe therapies)
        productGroupId:
          type: string
          example: 9a4a09b6-8988-4745-8311-f8dd49df1829
          description: Id der Warengruppe (Voraussetzung, Alberta-Id ist bereits durch initialen Abgleich der Warengruppen in WaWi vorhanden)
        size:
          type: string
          example: "IDM 9 mm"
          description: Die Beschreibung der Größe
        inventoryType:
          type: number
          description: "Art der Bevorratung 1=Lagerartikel / 2=Kommisionnierartikel"
          example: 1
        status:
          type: number
          description: Status des Artikels (0= Unbekannt, 1=Verfügbar, 2=Gesperrt, 3=Temporär nicht verfügbar, 4=Endgültig nicht verfügbar")
          example: "1"
        medicalAidPositionNumber:
          type: string
          example: "12.24.06.2025"
          description: Hilfsmittelpositionsnummer
        stars:
          type: number
          example: 3
          description: Sterneranking des einzelnen Artikels im Warenkorb, falls keine Wirtschaftlichkeitsberechnung gewünscht
        assortmentType:
          type: number
          description: Sortimentsart (0=Unbekannt / 1=Fokusartikel / 2=Standardartikel / 3=Randartikel) - beeinflusst die Darstellung im Warenkorb
          example: 1
        pharmacyPrice:
          type: string
          example: "1,99"
          description: Der Apothekeneinkaufspreis des Artikels (AEP)
        fixedPrice:
          type: string
          example: "2,10"
          description: Der Festbetrag des Artikels
        purchaseRating:
          type: number
          example: 0
          description: Rating (virtueller Rabatt) für die Wirtschaftlichkeitsberechung - Werte von 0 bis 6  (0 = sehr wirtschaftlich 6 = nicht wirtschaftlich)
        packagingUnits:
          type: array
          items: 
            $ref: '#/components/schemas/PackagingUnit'
    PackagingUnit:
      required:
        - unit
        - quantity
        - pcn
        - defaultPackagingUnit
      properties:
        unit:
          type: string
          example: "Stk"
          description: Verpackungseinheit Stk für Einzelartikel oder Ktn für Verpackungen mit mehreren Stück
        quantity:
          type: number
          example: '3'
          description: Menge
        pcn:
          type: string
          example: "02151950"
          description: PZN (Pharmazentralnummer)
        defaultPackagingUnit:
          type: boolean
          example: "true"
          description: Voreingestelle Verpackungseinheit Ja/Nein (für Warenkorb)
        archived:
          type: boolean
          example: false
          description: Kennzeichen ob Verpackungseinheit archiviert ist, d. h. nicht mehr im Warenkorb ausgewählt werden kann
      type: object
    ArticleMapping:
        type: object
        required:
          - customerId
          - _id
        properties:
          _id:
            type: string
            format: uuid
            example: a4adecb6-126a-4fa6-8fac-e80165ac4264
            description: Alberta-Id des Artikels
          customerId:
            type: string
            example: 43435 
            description: eindeutige Artikelnummer aus WaWi
          updated:
            type: string
            format: date
            example: "2019-11-28T08:37:39.637Z"
            description: Der Zeitstempel der letzten Änderung